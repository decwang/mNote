<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2017-05-15T02:41:55Z"/><meta name="updated" content="2017-05-15T02:47:17Z"/><title>浮点型变量在计算机内存中占用4字节（Byte）,即32-bit。遵循IEEE-754格式标准。 一个浮点数由2部分组成：底数m 和 指数e。                          ±ma</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">浮点型变量在计算机内存中占用4字节（Byte）,即32-bit。遵循IEEE-754格式标准。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">一个浮点数由2部分组成：底数m&nbsp;和&nbsp;指数e。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;±mantissa&nbsp;×&nbsp;2exponent</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;（注意，公式中的mantissa&nbsp;和&nbsp;exponent使用二进制表示）</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">底数部分　使用２进制数来表示此浮点数的实际值。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">指数部分　占用８-bit的二进制数，可表示数值范围为0－255。　但是指数应可正可负，所以IEEE规定，此处算出的次方须减去127才是真正的指数。所以float的指数可从&nbsp;-126到128.</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">底数部分实际是占用24-bit的一个值，由于其最高位始终为&nbsp;1&nbsp;，所以最高位省去不存储，在存储中只有23-bit。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">到目前为止，&nbsp;底数部分&nbsp;23位&nbsp;加上指数部分&nbsp;8位&nbsp;使用了31位。那么前面说过，float是占用4个字节即32-bit,那么还有一位是干嘛用的呢？&nbsp;&nbsp;还有一位，其实就是4字节中的最高位，用来指示浮点数的正负，当最高位是1时，为负数，最高位是0时，为正数。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;</span><span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;color:blue;">&nbsp;&nbsp;浮点数据就是按下表的格式存储在4个字节中：<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Address+0&nbsp;&nbsp;&nbsp;&nbsp;Address+1&nbsp;&nbsp;&nbsp;&nbsp;Address+2&nbsp;&nbsp;&nbsp;&nbsp;Address+3<br />
Contents&nbsp;&nbsp;&nbsp;&nbsp;SEEE&nbsp;EEEE&nbsp;&nbsp;&nbsp;&nbsp;EMMM&nbsp;MMMM&nbsp;&nbsp;&nbsp;&nbsp;MMMM&nbsp;MMMM&nbsp;&nbsp;&nbsp;&nbsp;MMMM&nbsp;MMMM</span><span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S:&nbsp;表示浮点数正负，1为负数，0为正数</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E:&nbsp;指数加上127后的值的二进制数</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M:&nbsp;24-bit的底数（只存储23-bit）</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">主意：这里有个特例，浮点数&nbsp;为0时，指数和底数都为0，但此前的公式不成立。因为2的0次方为1，所以，0是个特例。当然，这个特例也不用认为去干扰，编译器会自动去识别。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过上面的格式，我们下面举例看下-12.5在计算机中存储的具体数据：</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;Address+0&nbsp;&nbsp;&nbsp;&nbsp;Address+1&nbsp;&nbsp;&nbsp;&nbsp;Address+2&nbsp;&nbsp;&nbsp;&nbsp;Address+3<br />
Contents&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xC1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x48&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00</span><span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;接下来我们验证下上面的数据表示的到底是不是-12.5，从而也看下它的转换过程。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">由于浮点数不是以直接格式存储，他有几部分组成，所以要转换浮点数，首先要把各部分的值分离出来。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;color:purple;">&nbsp;&nbsp;&nbsp;&nbsp;Address+0&nbsp;&nbsp;&nbsp;&nbsp;Address+1&nbsp;&nbsp;&nbsp;&nbsp;Address+2&nbsp;&nbsp;&nbsp;&nbsp;Address+3<br />
格式&nbsp;&nbsp;&nbsp;&nbsp;SEEEEEEE&nbsp;&nbsp;&nbsp;&nbsp;EMMMMMMM&nbsp;&nbsp;&nbsp;&nbsp;MMMMMMMM&nbsp;&nbsp;&nbsp;&nbsp;MMMMMMMM<br />
二进制&nbsp;&nbsp;&nbsp;&nbsp;11000001&nbsp;&nbsp;&nbsp;&nbsp;01001000&nbsp;&nbsp;&nbsp;&nbsp;00000000&nbsp;&nbsp;&nbsp;&nbsp;00000000<br />
16进制&nbsp;&nbsp;&nbsp;&nbsp;C1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;48&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;可见：</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S:&nbsp;为1，是个负数。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E:为&nbsp;10000010&nbsp;&nbsp;转为10进制为130，130-127=3，即实际指数部分为3.</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M:为&nbsp;10010000000000000000000。&nbsp;这里，在底数左边省略存储了一个1，使用&nbsp;实际底数表示为&nbsp;1.10010000000000000000000&nbsp;</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;到此，我们吧三个部分的值都拎出来了，现在，我们通过指数部分E的值来调整底数部分M的值。调整方法为：如果指数E为负数，底数的小数点向左移，如果指数E为正数，底数的小数点向右移。小数点移动的位数由指数E的绝对值决定。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里，E为正3，使用向右移3为即得：</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1100.10000000000000000000</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">至次，这个结果就是12.5的二进制浮点数，将他换算成10进制数就看到12.5了，如何转换，看下面：</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;小数点左边的1100&nbsp;表示为&nbsp;(1&nbsp;×&nbsp;23)&nbsp;+&nbsp;(1&nbsp;×&nbsp;22)&nbsp;+&nbsp;(0&nbsp;×&nbsp;21)&nbsp;+&nbsp;(0&nbsp;×&nbsp;20),&nbsp;其结果为&nbsp;12&nbsp;。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;小数点右边的&nbsp;.100…&nbsp;表示为&nbsp;(1&nbsp;×&nbsp;2-1)&nbsp;+&nbsp;(0&nbsp;×&nbsp;2-2)&nbsp;+&nbsp;(0&nbsp;×&nbsp;2-3)&nbsp;+&nbsp;...&nbsp;，其结果为.5&nbsp;。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">以上二值的和为12.5，&nbsp;由于S&nbsp;为1，使用为负数，即-12.5&nbsp;。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">所以，16进制&nbsp;0XC1480000&nbsp;是浮点数&nbsp;-12.5&nbsp;。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">上面是如何将计算机存储中的二进制数如何转换成实际浮点数，下面看下如何将一浮点数装换成计算机存储格式中的二进制数。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">举例将17.625换算成&nbsp;float型。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">首先，将17.625换算成二进制位：10001.101&nbsp;&nbsp;(&nbsp;0.625&nbsp;=&nbsp;0.5+0.125,&nbsp;0.5即&nbsp;1/2,&nbsp;0.125即&nbsp;1/8&nbsp;如果不会将小数部分转换成二进制，请参考其他书籍。)&nbsp;再将&nbsp;10001.101&nbsp;向右移，直到小数点前只剩一位&nbsp;成了&nbsp;1.0001101&nbsp;x&nbsp;2的4次方（因为右移了4位）。此时&nbsp;我们的底数M和指数E就出来了：</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">底数部分M，因为小数点前必为1，所以IEEE规定只记录小数点后的就好，所以此处底数为&nbsp;&nbsp;0001101&nbsp;。</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">指数部分E，实际为4，但须加上127，固为131，即二进制数&nbsp;10000011&nbsp;</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">符号部分S，由于是正数，所以S为0.</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">综上所述，17.625的&nbsp;float&nbsp;存储格式就是：</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">0&nbsp;10000011&nbsp;00011010000000000000000</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">转换成16进制：0x41&nbsp;8D&nbsp;00&nbsp;00</span><br style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;" />
<span style="font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;">所以，一看，还是占用了4个字节。</span></body></html>