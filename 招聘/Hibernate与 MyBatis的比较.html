<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2017-05-15T02:48:10Z"/><meta name="updated" content="2017-05-15T02:54:26Z"/><title>Hibernate与 MyBatis的比较</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;">2012-12</p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;">最近做了一个Hibernate与MyBatis的对比总结，希望大家指出不对之处。</p>
<h1 style="margin:0px;padding:0px;color:#333333;font-family:Arial;font-variant-ligatures:normal;orphans:2;widows:2;"><a name="t0" style="color:#336699;"></a><span style="font-size:18px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;"><span style="padding:0px;margin:0px;">第一章&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;"><span style="padding:0px;margin:0px;">Hibernate</span></span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;"><span style="padding:0px;margin:0px;">与</span></span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;"><span style="padding:0px;margin:0px;">MyBatis</span></span></span></h1>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">是当前最流行的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">O/R mapping</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">框架，它出身于</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">sf.net</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">，现在已经成为</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Jboss</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的一部分。&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">是另外一种优秀的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">O/R mapping</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">框架。目前属于</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">apache</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的一个子项目。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">参考资料官网：</span><span style="padding:0px;margin:0px;"><a href="http://www.mybatis.org/core/zh/index.html" rel="nofollow" style="color:#4466bb;text-decoration:none;padding:0px;margin:0px;outline:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">http://www.mybatis.org/core/zh/index.html</span></a><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;&nbsp;</span></span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">参考资料：&nbsp;</span><span style="padding:0px;margin:0px;"><a href="http://docs.jboss.org/hibernate/core/3.6/reference/zh-CN/html_single/" rel="nofollow" style="color:#4466bb;text-decoration:none;padding:0px;margin:0px;outline:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">http://docs.jboss.org/hibernate/core/3.6/reference/zh-CN/html_single/</span></a></span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t1" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">1.1 Hibernate&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">简介</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">对数据库结构提供了较为完整的封装，</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">O/R Mapping</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">实现了</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">POJO&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">和数据库表之间的映射，以及</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的自动生成和执行。程序员往往只需定义好了</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">POJO&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">到数据库表的映射关系，即可通过</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">提供的方法完成持久层操作。程序员甚至不需要对</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的熟练掌握，</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;Hibernate/OJB&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">会根据制定的存储逻辑，自动生成对应的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">并调用</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">JDBC&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">接口加以执行。</span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t2" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">1.2 MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">简介</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">iBATIS&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的着力点，则在于</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">POJO&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">与</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">之间的映射关系。然后通过映射配置文件，将</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">所需的参数，以及返回的结果字段映射到指定</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">POJO</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。 相对</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">“</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">O/R</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">”而言，</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">iBATIS&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">是一种“</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Sql Mapping</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">”的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">ORM</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">实现。</span></p>
<h1 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t3" style="color:#336699;"></a><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">第二章 开发对比</span></h1>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t4" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">开发速度</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的真正掌握要比</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">来得难些。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">框架相对简单很容易上手，但也相对简陋些。个人觉得要用好</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">还是首先要先理解好</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。</span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t5" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">开发社区</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">与</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">都是流行的持久层开发框架，但</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">开发社区相对多热闹些，支持的工具也多，更新也快，当前最高版本</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">4.1.8</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。而</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">相对平静，工具较少，当前最高版本</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">3.2</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。</span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t6" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">开发工作量</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">和</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">都有相应的代码生成工具。可以生成简单基本的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">DAO</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">层方法。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">针对高级查询，</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">需要手动编写</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">语句，以及</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">ResultMap</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。而</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">有良好的映射机制，开发者无需关心</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的生成与结果映射，可以更专注于业务流程。</span></p>
<h1 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t7" style="color:#336699;"></a><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">第三章 系统调优对比</span></h1>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t8" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">的调优方案</span></span></h2>
<ol style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding:0px;margin:0px 0px 10px 20px;list-style-position:inside;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">制定合理的缓存策略；</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">尽量使用延迟加载特性；</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">采用合理的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">管理机制；</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">使用批量抓取，设定合理的批处理参数（</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">batch_size</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">）</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">;</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">进行合理的O/R映射设计</span></li>
</ol>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t9" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">调优方案</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">在</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">方面和</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">生命周期是一致的，同样需要合理的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">管理机制。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">同样具有二级缓存机制。&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">可以进行详细的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">优化设计。</span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t10" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">优化方面</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的查询会将表中的所有字段查询出来，这一点会有性能消耗。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">也可以自己写</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">来指定需要查询的字段，但这样就破坏了</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">开发的简洁性。而</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">是手动编写的，所以可以按需求指定查询的字段。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate HQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">语句的调优需要将</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">打印出来，而</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">被很多人嫌弃因为太丑了。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">是自己手动写的所以调整方便。但</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">具有自己的日志统计。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">本身不带日志统计，使用</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Log4j</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">进行日志记录。</span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t11" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">扩展性方面</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">与具体数据库的关联只需在</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">XML</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">文件中配置即可，所有的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">HQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">语句与具体使用的数据库无关，移植性很好。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">项目中所有的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">语句都是依赖所用的数据库的，所以不同数据库类型的支持不好。</span></p>
<h1 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t12" style="color:#336699;"></a><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">第四章 对象管理与抓取策略</span></h1>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t13" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">对象管理</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">是完整的对象</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">/</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">关系映射解决方案，它提供了对象</span><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">状态管理（</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">state management</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">）</span></span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的功能，使开发者不再需要理会底层数据库系统的细节。也就是说，相对于常见的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;JDBC/SQL&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">持久层方案中需要管理</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;SQL&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">语句，</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">采用了更自然的面向对象的视角来持久化</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;Java&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">应用中的数据。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">换句话说，使用</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;Hibernate&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的开发者应该总是关注对象的</span><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">状态（</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">state</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">）</span></span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">，不必考虑</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;SQL&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">语句的执行。这部分细节已经由</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;Hibernate&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">掌管妥当，只有开发者在进行系统性能调优的时候才需要进行了解。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">而</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">在这一块没有文档说明，用户需要对对象自己进行详细的管理。</span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t14" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">抓取策略</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">对实体关联对象的抓取有着良好的机制。对于每一个关联关系都可以详细地设置是否延迟加载，并且提供关联抓取、查询抓取、子查询抓取、批量抓取四种模式。 它是详细配置和处理的。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">而</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的延迟加载是全局配置的。</span></p>
<h1 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t15" style="color:#336699;"></a><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">第五章 缓存机制对比</span></h1>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t16" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">缓存</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">一级缓存是</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">缓存，利用好一级缓存就需要对</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的生命周期进行管理好。建议在一个</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Action</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">操作中使用一个</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。一级缓存需要对</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">进行严格管理。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">二级缓存是</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SessionFactory</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">级的缓存。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;SessionFactory</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的缓存分为内置缓存和外置缓存。内置缓存中存放的是</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SessionFactory</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">对象的一些集合属性包含的数据</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">(</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">映射元素据及预定</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">语句等</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">),</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">对于应用程序来说</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">它是只读的。外置缓存中存放的是数据库数据的副本</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">其作用和一级缓存类似</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">.</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">二级缓存除了以内存作为存储介质外</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">还可以选用硬盘等外部存储设备。二级缓存称为进程级缓存或</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SessionFactory</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">级缓存，它可以被所有</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">共享，它的生命周期伴随着</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SessionFactory</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的生命周期存在和消亡。</span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t17" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">缓存</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">包含一个非常强大的查询缓存特性</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">它可以非常方便地配置和定制。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis 3&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">中的缓存实现的很多改进都已经实现了</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">使得它更加强大而且易于配置。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">默认情况下是没有开启缓存的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">除了局部的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;session&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">缓存</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">可以增强变现而且处理循环 依赖也是必须的。要开启二级缓存</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">你需要在你的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;SQL&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">映射文件中添加一行</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">:&nbsp; &lt;cache/&gt;</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">字面上看就是这样。这个简单语句的效果如下</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">:</span></p>
<ol style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding:0px;margin:0px 0px 10px 20px;list-style-position:inside;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">映射语句文件中的所有</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;select&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">语句将会被缓存。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">映射语句文件中的所有</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;insert,update&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">和</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;delete&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">语句会刷新缓存。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">缓存会使用</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;Least Recently Used(LRU,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">最近最少使用的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">)</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">算法来收回。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">根据时间表</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">(</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">比如</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;no Flush Interval,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">没有刷新间隔</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">),&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">缓存不会以任何时间顺序 来刷新。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">缓存会存储列表集合或对象</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">(</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">无论查询方法返回什么</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">)</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;1024&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">个引用。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">缓存会被视为是</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;read/write(</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">可读</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">/</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">可写</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">)</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的缓存</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">意味着对象检索不是共享的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">而 且可以安全地被调用者修改</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">而不干扰其他调用者或线程所做的潜在修改。</span></li>
</ol>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">所有的这些属性都可以通过缓存元素的属性来修改。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">比如</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">: &lt;cache &nbsp;eviction="FIFO"&nbsp; flushInterval="60000"&nbsp; size="512"&nbsp; readOnly="true"/&gt;</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">这个更高级的配置创建了一个</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;FIFO&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">缓存</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">并每隔</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;60&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">秒刷新</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">存数结果对象或列表的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;512&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">个引用</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">而且返回的对象被认为是只读的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">因此在不同线程中的调用者之间修改它们会 导致冲突。可用的收回策略有</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">默认的是</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;LRU:</span></p>
<ol style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding:0px;margin:0px 0px 10px 20px;list-style-position:inside;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">LRU&nbsp;–&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">最近最少使用的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">:</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">移除最长时间不被使用的对象。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">FIFO&nbsp;–&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">先进先出</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">:</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">按对象进入缓存的顺序来移除它们。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SOFT&nbsp;–&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">软引用</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">:</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">移除基于垃圾回收器状态和软引用规则的对象。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">WEAK&nbsp;–&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">弱引用</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">:</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">更积极地移除基于垃圾收集器状态和弱引用规则的对象。</span></li>
</ol>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">flushInterval(</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">刷新间隔</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">)</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">可以被设置为任意的正整数</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">而且它们代表一个合理的毫秒 形式的时间段。默认情况是不设置</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">也就是没有刷新间隔</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">缓存仅仅调用语句时刷新。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">size(</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">引用数目</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">)</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">可以被设置为任意正整数</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">要记住你缓存的对象数目和你运行环境的 可用内存资源数目。默认值是</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">1024</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">readOnly(</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">只读</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">)</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">属性可以被设置为</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;true&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">或</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;false</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。只读的缓存会给所有调用者返回缓 存对象的相同实例。因此这些对象不能被修改。这提供了很重要的性能优势。可读写的缓存 会返回缓存对象的拷贝</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">(</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">通过序列化</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">)&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。这会慢一些</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">但是安全</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">,</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">因此默认是</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;false</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。</span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t18" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">相同点</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">和</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的二级缓存除了采用系统默认的缓存机制外，都可以通过实现你自己的缓存或为其他第三方缓存方案，创建适配器来完全覆盖缓存行为。</span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t19" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">不同点</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的二级缓存配置在</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SessionFactory</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">生成的配置文件中进行详细配置，然后再在具体的表</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">-</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">对象映射中配置是那种缓存。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的二级缓存配置都是在每个具体的表</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">-</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">对象映射中进行详细配置，这样针对不同的表可以自定义不同的缓存机制。并且</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">可以在命名空间中共享相同的缓存配置和实例，通过</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Cache-ref</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">来实现。</span></p>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t20" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">两者比较</span></span></h2>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">因为</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">对查询对象有着良好的管理机制，用户无需关心</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。所以在使用二级缓存时如果出现脏数据，系统会报出错误并提示。</span></p>
<p style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding-top:0px;padding-bottom:0px;margin-top:0px;margin-bottom:15px;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">而</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">在这一方面，使用二级缓存时需要特别小心。如果不能完全确定数据更新操作的波及范围，避免</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Cache</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的盲目使用。否则，脏数据的出现会给系统的正常运行带来很大的隐患。</span></p>
<h1 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t21" style="color:#336699;"></a><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">第六章&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">与</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">对比总结</span></h1>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t22" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">两者相同点</span></span></h2>
<ul style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding:0px;margin:0px 0px 10px 20px;list-style-position:inside;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">与</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">都可以是通过</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SessionFactoryBuider</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">由</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">XML</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">配置文件生成</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SessionFactory</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">，然后由</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SessionFactory&nbsp;</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">生成</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">，最后由</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">来开启执行事务和</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">语句。其中</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SessionFactoryBuider</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">，</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SessionFactory</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">，</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Session</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的生命周期都是差不多的。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">和</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">都支持</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">JDBC</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">和</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">JTA</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">事务处理。</span></li>
</ul>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t23" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">优势</span></span></h2>
<ul style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding:0px;margin:0px 0px 10px 20px;list-style-position:inside;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">可以进行更为细致的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">优化，可以减少查询字段。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">容易掌握，而</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">门槛较高。</span></li>
</ul>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t24" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">优势</span></span></h2>
<ul style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding:0px;margin:0px 0px 10px 20px;list-style-position:inside;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">DAO</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">层开发比</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">简单，</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Mybatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">需要维护</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">和结果映射。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">对对象的维护和缓存要比</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">好，对增删改查的对象的维护要方便。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">数据库移植性很好，</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">的数据库移植性不好，不同的数据库需要写不同</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">SQL</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">。</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">有更好的二级缓存机制，可以使用第三方缓存。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">MyBatis</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">本身提供的缓存机制不佳。</span></li>
</ul>
<h2 style="margin:0px;padding:0px;color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><a name="t25" style="color:#336699;"></a><span style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;font-size:14px;">他人总结</span></span></h2>
<ul style="color:#333333;font-variant-ligatures:normal;orphans:2;widows:2;padding:0px;margin:0px 0px 10px 20px;list-style-position:inside;font-family:微软雅黑, Verdana, sans-serif, 宋体;"><li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate功能强大，数据库无关性好，O/R映射能力强，如果你对Hibernate相当精通，而且对Hibernate进行了适当的封装，那么你的项目整个持久层代码会相当简单，需要写的代码很少，开发速度很快，非常爽。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">Hibernate的缺点就是学习门槛不低，要精通门槛更高，而且怎么设计O/R映射，在性能和对象模型之间如何权衡取得平衡，以及怎样用好Hibernate方面需要你的经验和能力都很强才行。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">iBATIS入门简单，即学即用，提供了数据库查询的自动对象绑定功能，而且延续了很好的SQL使用经验，对于没有那么高的对象模型要求的项目来说，相当完美。</span><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">&nbsp;</span></li>
<li style="padding:0px;margin:0px;"><span style="padding:0px;margin:0px;font-family:&quot;Microsoft YaHei&quot;;">iBATIS的缺点就是框架还是比较简陋，功能尚有缺失，虽然简化了数据绑定代码，但是整个底层数据库查询实际还是要自己写的，工作量也比较大，而且不太容易适应快速数据库修改。</span></li>
</ul></body></html>