<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2017-08-03T07:28:42Z"/><meta name="updated" content="2017-08-03T07:28:46Z"/><title>在介绍GROUP BY 和 HAVING 子句前，我们必需先讲讲sql语言中一种特殊的函数：聚合函数，  例如SUM, COUNT, MAX, AVG等。这些函数和其它函数的根本区别就是它们一般作用</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;color:#333333;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-family:Helvetica, Tahoma, Arial, sans-serif;"><span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">在介绍GROUP BY 和 HAVING 子句前，我们必需先讲讲sql语言中一种特殊的函数：聚合函数，&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">例如SUM, COUNT, MAX, AVG等。这些函数和其它函数的根本区别就是它们一般作用在多条记录上。&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">SELECT SUM(population) FROM bbc&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">这里的SUM作用在所有返回记录的population字段上，结果就是该查询只返回一个结果，即所有&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">国家的总人口数。&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
</p>
<pre style="line-height:25.1875px;white-space:pre-wrap;color:#333333;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;"><span style="line-height:28px;color:#ff0000;"><strong style="line-height:28px;">having是分组（group by）后的筛选条件，分组后的数据组内再筛选
where则是在分组前筛选</strong></span></pre><p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;color:#333333;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-family:Helvetica, Tahoma, Arial, sans-serif;"><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">通过使用GROUP BY 子句，可以让SUM 和 COUNT 这些函数对属于一组的数据起作用。&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">当你指定 GROUP BY region 时， 属于同一个region（地区）的一组数据将只能返回一行值．&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">也就是说，表中所有除region（地区）外的字段，只能通过 SUM, COUNT等聚合函数运算后返回一个值．&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">HAVING子句可以让我们筛选成组后的各组数据．&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">WHERE子句在聚合前先筛选记录．也就是说作用在GROUP BY 子句和HAVING子句前．&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">而 HAVING子句在聚合后对组记录进行筛选。&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">让我们还是通过具体的实例来理解GROUP BY 和 HAVING 子句，还采用第三节介绍的bbc表。&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">SQL实例：&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">一、显示每个地区的总人口数和总面积．&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;"><span style="line-height:21.6px;color:#000000;font-family:Arial, Helvetica, sans-serif;">SELECT region, SUM(population), SUM(area)</span><br style="line-height:normal !important;color:#000000;font-family:Arial, Helvetica, sans-serif;font-size:12px;" />
<span style="line-height:21.6px;color:#000000;font-family:Arial, Helvetica, sans-serif;">FROM bbc</span><span style="line-height:normal !important;font-family:Arial, Helvetica, sans-serif;font-size:0px;color:#ffffff;"># `&amp; e4 k' X* n1 v% ?+ |</span><br style="line-height:normal !important;color:#000000;font-family:Arial, Helvetica, sans-serif;font-size:12px;" />
<span style="line-height:21.6px;color:#000000;font-family:Arial, Helvetica, sans-serif;">GROUP BY region</span><br style="line-height:normal !important;color:#000000;font-family:Arial, Helvetica, sans-serif;font-size:12px;" />
<span style="line-height:21.6px;color:#000000;font-family:Arial, Helvetica, sans-serif;">&nbsp;先以region把返回记录分成多个组，这就是GROUP BY的字面含义。分完组后，然后用聚合函数对每组中的不同字段（一或多条记录）作运算。</span><span style="line-height:normal !important;font-family:Arial, Helvetica, sans-serif;font-size:0px;color:#ffffff;"># B* i' z&nbsp;&nbsp;`, }* S, E5 i</span>&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;">二、 显示每个地区的总人口数和总面积．仅显示那些面积超过1000000的地区。&nbsp;</span><br style="line-height:28px;color:#454545;font-family:tahoma, helvetica, arial;" />
<span style="line-height:21.6px;font-family:Arial, Helvetica, sans-serif;">SELECT region, SUM(population), SUM(area)</span><span style="line-height:normal !important;font-family:Arial, Helvetica, sans-serif;font-size:0px;color:#ffffff;">7 ]; Z&amp; I! t% i</span><br style="line-height:normal !important;font-family:Arial, Helvetica, sans-serif;font-size:12px;" />
<span style="line-height:21.6px;font-family:Arial, Helvetica, sans-serif;">FROM bbc</span><span style="line-height:normal !important;font-family:Arial, Helvetica, sans-serif;font-size:0px;color:#ffffff;">8 F4 w2 v( P- f</span><br style="line-height:normal !important;font-family:Arial, Helvetica, sans-serif;font-size:12px;" />
<span style="line-height:21.6px;font-family:Arial, Helvetica, sans-serif;">GROUP BY region</span><br style="line-height:normal !important;font-family:Arial, Helvetica, sans-serif;font-size:12px;" />
<span style="line-height:21.6px;font-family:Arial, Helvetica, sans-serif;">HAVING SUM(area)&gt;1000000</span><span style="line-height:normal !important;font-family:Arial, Helvetica, sans-serif;font-size:0px;color:#ffffff;"># y" P&nbsp;&nbsp;z. O7 D9 `# X</span><br style="line-height:normal !important;font-family:Arial, Helvetica, sans-serif;font-size:12px;" />
<span style="line-height:normal !important;font-family:Arial, Helvetica, sans-serif;color:#660000;">在这里，我们不能用where来筛选超过1000000的地区，因为表中不存在这样一条记录。<br style="line-height:28px;" />
相反，HAVING子句可以让我们筛选成组后的各组数据</span></p>
<p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;color:#333333;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-family:Helvetica, Tahoma, Arial, sans-serif;">&nbsp;</p>
<p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;color:#454545;font-family:tahoma, helvetica, arial;">三、查询CUSTOMER 和ORDER表中用户的订单数</p>
<p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;color:#454545;font-family:tahoma, helvetica, arial;">select c.name, count(order_number) as count from orders o,customer c where c.id=o.customer_id group by customer_id;</p>
<p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;color:#454545;font-family:tahoma, helvetica, arial;">+--------+-------+<br style="line-height:28px;" />
| name&nbsp;&nbsp; | count |<br style="line-height:28px;" />
+--------+-------+<br style="line-height:28px;" />
| d&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 9 |<br style="line-height:28px;" />
| cc&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 6 |<br style="line-height:28px;" />
| 菩提子 |&nbsp;&nbsp;&nbsp;&nbsp; 1 |<br style="line-height:28px;" />
| cccccc |&nbsp;&nbsp;&nbsp;&nbsp; 2 |<br style="line-height:28px;" />
+--------+-------+</p>
<p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;color:#454545;font-family:tahoma, helvetica, arial;">增加HAVING过滤</p>
<p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;color:#454545;font-family:tahoma, helvetica, arial;">select c.name, count(order_number) as count from orders o,customer c where c.id=o.customer_id group by customer_id having count(order_number)&gt;5;</p>
<p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;color:#454545;font-family:tahoma, helvetica, arial;">+------+-------+<br style="line-height:28px;" />
| name | count |<br style="line-height:28px;" />
+------+-------+<br style="line-height:28px;" />
| d&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 9 |<br style="line-height:28px;" />
| cc&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 6 |<br style="line-height:28px;" />
+------+-------+</p>
<p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;color:#454545;font-family:tahoma, helvetica, arial;">&nbsp;</p>
<p style="line-height:25.1875px;margin-top:0px;margin-bottom:0px;padding:0px;font-size:16px;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;color:#454545;font-family:tahoma, helvetica, arial;">&nbsp;</p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;"><span style="line-height:normal !important;">四、我在多举一些例子</span></span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">SQL&gt; select * from sc;</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SNO PNO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GRADE</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">---------- ----- ----------</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 YW &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 95</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 SX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;98</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 YY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 90</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 YW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 89</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 SX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 91</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 YY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 92</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 YW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 85</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 SX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 88</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 YY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 96</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 YW &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;95</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 SX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 89</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SNO PNO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GRADE</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">---------- ----- ----------</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 &nbsp; &nbsp;YY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;88</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">这个表所描述的是4个学生对应每科</span><span style="line-height:24.5px;font-size:14px;">学习</span><span style="line-height:24.5px;font-size:14px;">成绩的记录，其中SNO（学生号）、PNO（课程名）、GRADE（成绩）。</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">1、显示90分以上学生的课程名和成绩</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">//这是一个简单的查询，并没有使用分组查询</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">SQL&gt; select sno,pno,grade from sc where grade&gt;=90;</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SNO PNO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GRADE</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">---------- ----- ----------</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 YW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 95</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 SX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 98</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 YY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 90</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 SX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 91</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 YY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 92</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 YY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 96</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 YW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 95</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">已选择7行。</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">2、显示每个学生的成绩在90分以上的各有多少门</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">//进行分组显示，并且按照where条件之后计数</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">SQL&gt; select sno,count(*) from sc where grade&gt;=90 group by sno;</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SNO&nbsp;&nbsp; COUNT(*)</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">---------- ----------</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">3、这里我们并没有使用having语句，接下来如果我们要评选三好学生，条件是至少有两门课程在90分以上才能有资格，列出有资格的学生号及90分以上的课程数。</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">//进行分组显示，并且按照where条件之后计数，在根据having子句筛选分组</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">SQL&gt; select sno,count(*) from sc where grade&gt;=90 group by sno having count(*)&gt;=2；</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SNO&nbsp;&nbsp; COUNT(*)</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">---------- ----------</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;color:#ff0000;">这个结果是我们想要的，它列出了具有评选三好学生资格的学生号，跟上一个例子比较之后，发现这是在分组后进行的子查询。</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">4、学校评选先进学生，要求平均成绩大于90分的学生都有资格，并且语文课必须在95分以上，请列出有资格的学生</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">//实际上，这个查询先把语文大于95分的学生号提取出来，之后求平均值，分组显示后根据having语句选出平均成绩大于90的</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">SQL&gt; select sno,avg(grade) from sc where SNO IN (SELECT SNO FROM SC WHERE GRADE&gt;=95 AND PNO='YW') group by sno having avg(grade)&gt;=90;</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SNO AVG(GRADE)</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">---------- ----------</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 &nbsp; &nbsp;94.3333333</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 &nbsp; &nbsp;90.6666667</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">5、查询比平均成绩至少比学号是3的平均成绩高的学生学号以及平均分数</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">//having子句中可进行比较和子查询</span></p>
<p style="line-height:21.6px;margin-top:0px;margin-bottom:10px;padding:0px;color:#333333;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-variant-ligatures:normal;orphans:2;widows:2;background-color:#ccced0;font-size:12px;"><span style="line-height:24.5px;font-size:14px;">SQL&gt; select sno,avg(grade) from sc</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group by sno</span><br style="line-height:normal !important;" />
<span style="line-height:24.5px;font-size:14px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; having avg(grade) &gt; (select avg(grade) from sc where sno=3);</span></p></body></html>