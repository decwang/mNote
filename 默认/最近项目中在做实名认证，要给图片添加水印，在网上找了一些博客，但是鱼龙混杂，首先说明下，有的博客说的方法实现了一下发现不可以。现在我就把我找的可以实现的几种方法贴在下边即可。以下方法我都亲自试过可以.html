<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2017-03-14T03:53:25Z"/><meta name="updated" content="2017-03-14T03:54:33Z"/><title>最近项目中在做实名认证，要给图片添加水印，在网上找了一些博客，但是鱼龙混杂，首先说明下，有的博客说的方法实现了一下发现不可以。现在我就把我找的可以实现的几种方法贴在下边即可。以下方法我都亲自试过可以</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"><span style="color:#555555;font-family:'microsoft yahei';font-size:15px;line-height:35px;">最近项目中在做实名认证，要给图片添加水印，在网上找了一些博客，但是鱼龙混杂，首先说明下，有的博客说的方法实现了一下发现不可以。现在我就把我找的可以实现的几种方法贴在下边即可。以下方法我都亲自试过可以：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"><span style="color:#555555;font-family:'microsoft yahei';line-height:35px;"><span style="font-family:tahoma, arial, 宋体;line-height:25.2px;">为了防止自己辛苦做的项目被别人盗走，采取图片添加水印，在此表示图片的独一无二。加水印不是在上面添加几个Label，而是我们把字画到图片上成为一个整体，下面我给大家分享IOS给图片添加水印（两种方式）。</span><br />
</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"><span style="color:#555555;font-family:'microsoft yahei';line-height:35px;"><span style="font-family:tahoma, arial, 宋体;line-height:25.2px;"><br />
</span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"><span style="font-family:'microsoft yahei';line-height:35px;"><span style="font-family:tahoma, arial, 宋体;line-height:25.2px;"><span style="font-size:18px;color:#330000;">第一种方式：</span><span style="font-size:12px;color:#330000;">绘制</span><span style="color:#555555;">文字，将文字绘制到图片上（缺陷是文字是</span><span style="color:#cc0000;">平行</span><span style="color:#555555;">的加在图片上的，不好控制其斜着或任意方向放）</span></span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"></p>
<div class="dp-highlighter bg_objc" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.53125px;overflow-y:hidden;overflow-x:auto;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[objc]</b>&nbsp;<a href="http://blog.csdn.net/jiadabin/article/details/51669497#" class="ViewSource" title="view plain" style="color:#a0a0a0;text-decoration:none;background-image:url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:0% 0%;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/jiadabin/article/details/51669497#" class="CopyToClipboard" title="copy" style="color:#a0a0a0;text-decoration:none;background-image:url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:0% 0%;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:685px;top:684px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_1" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_1" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=1&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span><span data-mod="popu_169">&nbsp;</span><span class="tracking-ad" data-mod="popu_167"><a href="https://code.csdn.net/snippets/1716546" target="_blank" title="在CODE上查看代码片" style="color:#a0a0a0;text-decoration:none;background-image:none;background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;background-position:0% 0%;background-repeat:no-repeat no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border:none;position:relative;top:1px;left:2px;" /></a></span><span class="tracking-ad" data-mod="popu_170"><a href="https://code.csdn.net/snippets/1716546/fork" target="_blank" title="派生到我的代码片" style="color:#a0a0a0;text-decoration:none;background-image:none;background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;background-position:0% 0%;background-repeat:no-repeat no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border:none;position:relative;top:2px;left:2px;" /></a></span></div>
</div>
<ol start="1" class="dp-objc" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">-(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)watermarkImage:(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)img</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;withName</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">NSString</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)name&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;{&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;NSString*&nbsp;mark&nbsp;=&nbsp;name;&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;w&nbsp;=&nbsp;img</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.width</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">;&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;h&nbsp;=&nbsp;img</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.height</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">;&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;UIGraphicsBeginImageContext(img<span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">);&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;[img<span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;drawInRect</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:CGRectMake(,&nbsp;,&nbsp;w,&nbsp;h)];&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">NSDictionary</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*attr&nbsp;=&nbsp;@{&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;NSFontAttributeName</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:&nbsp;[UIFont</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;boldSystemFontOfSize</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:],&nbsp;&nbsp;</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//设置字体</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSForegroundColorAttributeName&nbsp;:&nbsp;[UIColor<span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;redColor</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">]&nbsp;&nbsp;&nbsp;</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//设置字体颜色</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;[mark<span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;drawInRect</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:CGRectMake(,&nbsp;,&nbsp;,&nbsp;)</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;withAttributes</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:attr];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//左上角</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;[mark<span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;drawInRect</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:CGRectMake(w&nbsp;-&nbsp;,&nbsp;,&nbsp;,&nbsp;)</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;withAttributes</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:attr];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//右上角</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;[mark<span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;drawInRect</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:CGRectMake(w&nbsp;-&nbsp;,&nbsp;h&nbsp;-&nbsp;-&nbsp;,&nbsp;,&nbsp;)</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;withAttributes</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:attr];&nbsp;&nbsp;</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//右下角</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;[mark<span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;drawInRect</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:CGRectMake(,&nbsp;h&nbsp;-&nbsp;-&nbsp;,&nbsp;,&nbsp;)</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;withAttributes</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:attr];&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//左下角</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*aimg&nbsp;=&nbsp;UIGraphicsGetImageFromCurrentImageContext();&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;UIGraphicsEndImageContext();&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">return</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;aimg;&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;}&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;color:#330000;"><span style="font-family:'microsoft yahei';line-height:35px;"><span style="font-family:tahoma, arial, 宋体;line-height:25.2px;"><span style="color:#555555;"><span style="color:#330000;font-size:18px;line-height:25.2px;"><br />
</span></span></span></span></p>
<span style="font-family:Arial;color:#330000;">第二种方式：</span><span style="font-family:Arial;line-height:26px;"><span style="color:#660000;">合成图片了，推荐大家使用这种方法，（缺点：合成图片打，但可以缩小其尺寸，有点水印可以任意形状样式：找美工做就好了，还很容易做成透明的）</span></span><p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"></p>
<div class="dp-highlighter bg_objc" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.53125px;overflow-y:hidden;overflow-x:auto;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[objc]</b>&nbsp;<a href="http://blog.csdn.net/jiadabin/article/details/51669497#" class="ViewSource" title="view plain" style="color:#a0a0a0;text-decoration:none;background-image:url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:0% 0%;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/jiadabin/article/details/51669497#" class="CopyToClipboard" title="copy" style="color:#a0a0a0;text-decoration:none;background-image:url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:0% 0%;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:685px;top:1499px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_2" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_2" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=2&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span><span data-mod="popu_169">&nbsp;</span><span class="tracking-ad" data-mod="popu_167"><a href="https://code.csdn.net/snippets/1716546" target="_blank" title="在CODE上查看代码片" style="color:#a0a0a0;text-decoration:none;background-image:none;background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;background-position:0% 0%;background-repeat:no-repeat no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border:none;position:relative;top:1px;left:2px;" /></a></span><span class="tracking-ad" data-mod="popu_170"><a href="https://code.csdn.net/snippets/1716546/fork" target="_blank" title="派生到我的代码片" style="color:#a0a0a0;text-decoration:none;background-image:none;background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;background-position:0% 0%;background-repeat:no-repeat no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border:none;position:relative;top:2px;left:2px;" /></a></span></div>
</div>
<ol start="1" class="dp-objc" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">/**</span>&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">&nbsp;加半透明水印</span>&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">&nbsp;@param&nbsp;useImage&nbsp;需要加水印的图片</span>&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">&nbsp;@param&nbsp;addImage1&nbsp;水印不要传jpg类型图，支持png</span>&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">&nbsp;@returns&nbsp;加好水印的图片</span>&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">&nbsp;*/</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">-&nbsp;(<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)addImage:(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)useImage</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;addMsakImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)maskImage&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">{&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="xcodepreprocessor" style="margin:0px;padding:0px;border:none;background-color:inherit;">#if&nbsp;__IPHONE_OS_VERSION_MAX_ALLOWED&nbsp;&gt;=&nbsp;40000</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">if</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;([[[UIDevice</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;currentDevice</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">]</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;systemVersion</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">]</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;floatValue</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">]&nbsp;&gt;=&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">4</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">)&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UIGraphicsBeginImageContextWithOptions(useImage<span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;,</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">NO</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">);&nbsp;</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//&nbsp;0.0&nbsp;for&nbsp;scale&nbsp;means&nbsp;"scale&nbsp;for&nbsp;device's&nbsp;main&nbsp;screen".</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="xcodepreprocessor" style="margin:0px;padding:0px;border:none;background-color:inherit;">#else</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">if</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;([[[UIDevice</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;currentDevice</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">]</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;systemVersion</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">]</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;floatValue</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">]&nbsp;&lt;&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">4</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">)&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UIGraphicsBeginImageContext(useImage<span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">);&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="xcodepreprocessor" style="margin:0px;padding:0px;border:none;background-color:inherit;">#endif</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;[useImage<span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;drawInRect</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:CGRectMake(</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;useImage</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.width</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;useImage</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.height</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">)];&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//四个参数为水印图片的位置</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;[maskImage<span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;drawInRect</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:CGRectMake(</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;useImage</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.width</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;useImage</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.height</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">/</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">2</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">)];&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;[maskImage<span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;drawInRect</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:CGRectMake(</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;useImage</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.height</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">/</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">2</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;useImage</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.width</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;useImage</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.height</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">/</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">2</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">)];&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*resultingImage&nbsp;=&nbsp;UIGraphicsGetImageFromCurrentImageContext();&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;UIGraphicsEndImageContext();&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">return</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;resultingImage;&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">}&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"><span style="font-size:18px;"><span style="line-height:26px;">下边还有两种方法：其中第一种还不支持中文，字符串不可传入中文，第二种logo水印的不支持jpg</span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"></p>
<div class="dp-highlighter bg_objc" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:693px;overflow:auto;padding-top:1px;position:relative;color:#362e2b;line-height:26px;margin:18px 0px !important;"><ol start="1" class="dp-objc" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">-(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)addText:(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)img</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;text</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">NSString</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)text</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">1</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">{&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//上下文的大小&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;w&nbsp;=&nbsp;img</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.width</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">;&nbsp;&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;h&nbsp;=&nbsp;img</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.height</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">;&nbsp;&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGColorSpaceRef&nbsp;colorSpace&nbsp;=&nbsp;CGColorSpaceCreateDeviceRGB();<span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//创建颜色&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//创建上下文&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextRef&nbsp;context&nbsp;=&nbsp;CGBitmapContextCreate(<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">NULL</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;w,&nbsp;h,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">8</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">4</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">4</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*&nbsp;w,&nbsp;colorSpace,&nbsp;kCGImageAlphaPremultipliedFirst);&nbsp;&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextDrawImage(context,&nbsp;CGRectMake(<span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;w,&nbsp;h),&nbsp;img</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.CGImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">);</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//将img绘至context上下文中&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextSetRGBFillColor(context,&nbsp;<span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">1</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">1</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">1</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">);</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//设置颜色&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">char</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">*&nbsp;text&nbsp;=&nbsp;(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">char</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">char</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)[text</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">1</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;cStringUsingEncoding</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:NSASCIIStringEncoding];&nbsp;&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextSelectFont(context,&nbsp;<span class="string" style="margin:0px;padding:0px;border:none;color:blue;background-color:inherit;">"Georgia"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">3</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;kCGEncodingMacRoman);</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//设置字体的大小&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextSetTextDrawingMode(context,&nbsp;kCGTextFill);<span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//设置字体绘制方式&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextSetRGBFillColor(context,&nbsp;<span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">2</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">5</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">5</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">1</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">);</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//设置字体绘制的颜色&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextShowTextAtPoint(context,&nbsp;w/<span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">2</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">-strlen(text)*</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">5</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;h/</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">2</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;text,&nbsp;strlen(text));</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//设置字体绘制的位置&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//Create&nbsp;image&nbsp;ref&nbsp;from&nbsp;the&nbsp;context&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGImageRef&nbsp;imageMasked&nbsp;=&nbsp;CGBitmapContextCreateImage(context);<span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//创建CGImage&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextRelease(context);&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGColorSpaceRelease(colorSpace);&nbsp;&nbsp;&nbsp;</span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">return</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;[UIImage</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;imageWithCGImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:imageMasked];</span><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//获得添加水印后的图片&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">}&nbsp;&nbsp;</span></li>
</ol>
</div>
<br style="font-family:Arial;color:#362e2b;line-height:26px;" />
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;color:#362e2b;line-height:26px;"></p>
<p style="margin-top:0px;margin-bottom:0.75em;padding:0px;font-size:16px;line-height:28.8px;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;">在上面的方法中，我们可以看到，我们可以通过将图片和文字绘制到同一个上下文中，并且重新生成图片，所获得图片就是包括图片和文字。</p>
<p style="margin-top:0px;margin-bottom:0.75em;padding:0px;font-size:16px;line-height:28.8px;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;">另外在一些项目中我们可能还回用到图片叠加，比如打水印等功能，这种功能相对上面给图片添加文字更容易，只是在上下文中，绘制两张图片，然后重新生成，以达到图片的叠加、代码如下：</p>
<p style="margin-top:0px;margin-bottom:0.75em;padding:0px;font-size:16px;line-height:28.8px;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;"></p>
<div class="dp-highlighter bg_objc" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:693px;overflow:auto;padding-top:1px;position:relative;color:#362e2b;line-height:26px;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><strong>[objc]</strong>&nbsp;<a target="_blank" href="http://blog.csdn.net/wsk_123_123/article/details/26721975#" class="ViewSource" title="view plain" style="color:#a0a0a0;text-decoration:none;background-image:url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:0% 0%;background-repeat:no-repeat no-repeat;">view plain</a>&nbsp;<a target="_blank" href="http://blog.csdn.net/wsk_123_123/article/details/26721975#" class="CopyToClipboard" title="copy" style="color:#a0a0a0;text-decoration:none;background-image:url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:0% 0%;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:685px;top:2718px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_3" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_3" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=3&amp;width=18&amp;height=18" wmode="transparent" /></div>
&nbsp;<div style="position:absolute;left:519px;top:1277px;width:18px;height:18px;z-index:99;"></div>
&nbsp;<span class="tracking-ad"><a target="_blank" href="https://code.csdn.net/snippets/360226" title="在CODE上查看代码片" style="color:#a0a0a0;text-decoration:none;background-image:none;background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:0% 0%;background-repeat:no-repeat no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border:none;position:relative;top:1px;left:2px;" /></a></span><span class="tracking-ad"><a target="_blank" href="https://code.csdn.net/snippets/360226/fork" title="派生到我的代码片" style="color:#a0a0a0;text-decoration:none;background-image:none;background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:0% 0%;background-repeat:no-repeat no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border:none;position:relative;top:2px;left:2px;" /></a></span></div>
</div>
<ol start="1" class="dp-objc" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">-(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)addImageLogo:(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)img</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;text</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:(</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">UIImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*)logo&nbsp;&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">{&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//get&nbsp;image&nbsp;width&nbsp;and&nbsp;height&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;w&nbsp;=&nbsp;img</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.width</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">;&nbsp;&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;h&nbsp;=&nbsp;img</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.height</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">;&nbsp;&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;logoWidth&nbsp;=&nbsp;logo</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.width</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">;&nbsp;&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;logoHeight&nbsp;=&nbsp;logo</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.size</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.height</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">;&nbsp;&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGColorSpaceRef&nbsp;colorSpace&nbsp;=&nbsp;CGColorSpaceCreateDeviceRGB();&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//create&nbsp;a&nbsp;graphic&nbsp;context&nbsp;with&nbsp;CGBitmapContextCreate&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextRef&nbsp;context&nbsp;=&nbsp;CGBitmapContextCreate(<span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">NULL</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;w,&nbsp;h,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">8</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">4</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">4</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;*&nbsp;w,&nbsp;colorSpace,&nbsp;kCGImageAlphaPremultipliedFirst);&nbsp;&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextDrawImage(context,&nbsp;CGRectMake(<span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;</span><span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;w,&nbsp;h),&nbsp;img</span><span class="xcodeconstants" style="margin:0px;padding:0px;border:none;background-color:inherit;">.CGImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">);&nbsp;&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextDrawImage(context,&nbsp;CGRectMake(w-logoWidth,&nbsp;<span class="xcodenumber" style="margin:0px;padding:0px;border:none;background-color:inherit;">0</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">,&nbsp;logoWidth,&nbsp;logoHeight),&nbsp;[logo</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;CGImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">]);&nbsp;&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGImageRef&nbsp;imageMasked&nbsp;=&nbsp;CGBitmapContextCreateImage(context);&nbsp;&nbsp;&nbsp;</span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGContextRelease(context);&nbsp;&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">CGColorSpaceRelease(colorSpace);&nbsp;&nbsp;&nbsp;</span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">return</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;[UIImage</span><span class="vars" style="margin:0px;padding:0px;border:none;color:#dd0000;background-color:inherit;">&nbsp;imageWithCGImage</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">:imageMasked];&nbsp;&nbsp;&nbsp;</span></span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span class="comment" style="margin:0px;padding:0px;border:none;color:#008200;background-color:inherit;">//&nbsp;CGContextDrawImage(contextRef,&nbsp;CGRectMake(100,&nbsp;50,&nbsp;200,&nbsp;80),&nbsp;[smallImg&nbsp;CGImage]);&nbsp;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&nbsp;</span></span></li>
<li style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">}&nbsp;&nbsp;</span></li>
</ol>
</div>
<br style="font-family:Arial;color:#362e2b;line-height:26px;" />
<span style="color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-size:16px;line-height:28.8px;">对于图片叠加文字，和图片叠加图片，基本的原理是一样的，创建绘图上下文，然后在上下文中绘制图片或者文字，然后重新生成图片，以达到我们需要的效果。</span><br style="font-family:Arial;" />
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;"><img src="http://img.blog.csdn.net/20160614153232016?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" style="border:none;color:#555555;font-family:'microsoft yahei';font-size:15px;line-height:35px;" /><img src="http://img.blog.csdn.net/20160614153249017?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" style="border:none;color:#555555;font-family:'microsoft yahei';font-size:15px;line-height:35px;" /></p></body></html>