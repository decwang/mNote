<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2016-11-16T09:45:03Z"/><meta name="updated" content="2016-11-16T09:45:06Z"/><title>è°ˆè°ˆUIViewçš„å‡ ä¸ªlayoutæ–¹æ³•-layoutSubviewsã€layoutIfNeededã€setNeedsLayout...  å­—æ•°1201Â é˜…è¯»18278Â è¯„è®º35Â å–œæ¬¢148  æœ€è¿‘åœ¨</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><h1 class="title" style="margin:10px 0px;font-family:-apple-system, 'Helvetica Neue', Arial, 'PingFang SC', 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.5;color:#555555;text-rendering:optimizelegibility;font-size:32px;word-break:break-all;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;">è°ˆè°ˆUIViewçš„å‡ ä¸ªlayoutæ–¹æ³•-layoutSubviewsã€layoutIfNeededã€setNeedsLayout...</h1>
<div class="meta-top" style="font-family:-apple-system, 'Helvetica Neue', Arial, 'PingFang SC', 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;margin:20px 0px;color:#555555;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:20px;widows:1;"><span class="wordage" style="position:relative;top:1px;margin-right:10px;font-size:12px;color:#999999;">å­—æ•°1201</span>&nbsp;<span class="views-count" style="position:relative;top:1px;margin-right:10px;font-size:12px;color:#999999;">é˜…è¯»18278</span>&nbsp;<span class="comments-count" style="position:relative;top:1px;margin-right:10px;font-size:12px;color:#999999;">è¯„è®º35</span>&nbsp;<span class="likes-count" style="position:relative;top:1px;margin-right:10px;font-size:12px;color:#999999;">å–œæ¬¢148</span></div>
<div class="show-content" style="color:#2f2f2f;font-size:16px;line-height:1.7;font-family:-apple-system, 'Helvetica Neue', Arial, 'PingFang SC', 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;"><p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">æœ€è¿‘åœ¨å­¦ä¹ swiftåšåŠ¨ç”»ï¼Œç”¨åˆ°constraintçš„åŠ¨ç”»ï¼Œç”¨åˆ°layoutIfNeededå°±å»ç ”ç©¶äº†ä¸‹UIViewçš„è¿™å‡ ä¸ªå¸ƒå±€çš„æ–¹æ³•ã€‚</p>
<pre class="hljs objectivec" style="padding:9.5px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:13px;color:#657b83;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;margin-top:0px;margin-bottom:20px;line-height:20px;word-break:break-all;word-wrap:normal;border:1px solid rgba(0, 0, 0, 0.14902);overflow:auto;background-color:#fdf6e3;background-position:initial initial;background-repeat:initial initial;"><code class="objectivec" style="padding:0px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;border:none;background-color:transparent;">ä¸‹é¢æ˜¯åšå¾—ä¸€ä¸ªåŠ¨ç”»ï¼Œä¸‹è½½åœ°å€ï¼šhttps:<span class="hljs-comment" style="color:#93a1a1;">//github.com/smalldu/IOS-Animations  </span> ä¸­çš„AnimationDemo3</code></pre><div class="image-package imagebubble" widget="ImageBubble" style="margin:0px auto 20px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/954071-0250322e5e3b5f0b.gif?imageMogr2/auto-orient/strip" data-original-src="http://upload-images.jianshu.io/upload_images/954071-0250322e5e3b5f0b.gif?imageMogr2/auto-orient/strip" class="imagebubble-image" style="height:auto;vertical-align:middle;border:0px;cursor:-webkit-zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br />
<div class="image-caption" style="min-width:20%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#d9d9d9;font-size:13px;color:#999999;font-style:italic;line-height:1.7;">åŠ¨ç”»</div>
</div>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">ä¸‹é¢åˆ—ä¸¾ä¸‹iOS layoutçš„ç›¸å…³æ–¹æ³•:</p>
<ul style="padding:0px;margin:0px 0px 20px 25px;text-align:justify;word-break:break-word;"><li style="line-height:30px;">layoutSubviews</li>
<li style="line-height:30px;">layoutIfNeeded</li>
<li style="line-height:30px;">setNeedsLayout</li>
<li style="line-height:30px;">setNeedsDisplay</li>
<li style="line-height:30px;">drawRect</li>
<li style="line-height:30px;">sizeThatFits</li>
<li style="line-height:30px;">sizeToFit</li>
</ul>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">å¤§æ¦‚å¸¸ç”¨çš„ä¸Šé¢å‡ ä¸ª ï¼Œ å…·ä½“çš„åº”è¯¥è¿˜æœ‰åˆ«çš„ã€‚</p>
<h4 style="margin:0px;font-family:inherit;line-height:1.8;color:inherit;text-rendering:optimizelegibility;font-size:20px;">layoutSubviews</h4>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">è¿™ä¸ªæ–¹æ³•ï¼Œé»˜è®¤æ²¡æœ‰åšä»»ä½•äº‹æƒ…ï¼Œéœ€è¦å­ç±»è¿›è¡Œé‡å†™ ã€‚ ç³»ç»Ÿåœ¨å¾ˆå¤šæ—¶å€™ä¼šå»è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼š</p>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">1.åˆå§‹åŒ–ä¸ä¼šè§¦å‘layoutSubviewsï¼Œä½†æ˜¯å¦‚æœè®¾ç½®äº†ä¸ä¸ºCGRectZeroçš„frameçš„æ—¶å€™å°±ä¼šè§¦å‘ã€‚<br />
2.addSubviewä¼šè§¦å‘layoutSubviews<br />
3.è®¾ç½®viewçš„Frameä¼šè§¦å‘layoutSubviewsï¼Œå½“ç„¶å‰ææ˜¯frameçš„å€¼è®¾ç½®å‰åå‘ç”Ÿäº†å˜åŒ–<br />
4.æ»šåŠ¨ä¸€ä¸ªUIScrollViewä¼šè§¦å‘layoutSubviews<br />
5.æ—‹è½¬Screenä¼šè§¦å‘çˆ¶UIViewä¸Šçš„layoutSubviewsäº‹ä»¶<br />
6.æ”¹å˜ä¸€ä¸ªUIViewå¤§å°çš„æ—¶å€™ä¹Ÿä¼šè§¦å‘çˆ¶UIViewä¸Šçš„layoutSubviewsäº‹ä»¶</p>
<blockquote style="padding:10px 15px;margin:0px 0px 20px;border-left-width:4px;border-left-style:solid;border-left-color:#999999;word-break:break-word;font-size:15px;line-height:30px;background-color:#f5f5f5;"><p style="margin-top:0px;margin-bottom:0px;line-height:1.7;text-align:justify;word-break:break-word;">åœ¨è‹¹æœçš„å®˜æ–¹æ–‡æ¡£ä¸­å¼ºè°ƒ: You should override this method only if the autoresizing behaviors of the subviews do not offer the behavior you want.layoutSubviews, å½“æˆ‘ä»¬åœ¨æŸä¸ªç±»çš„å†…éƒ¨è°ƒæ•´å­è§†å›¾ä½ç½®æ—¶ï¼Œéœ€è¦è°ƒç”¨ã€‚åè¿‡æ¥çš„æ„æ€å°±æ˜¯è¯´ï¼šå¦‚æœä½ æƒ³è¦åœ¨å¤–éƒ¨è®¾ç½®subviewsçš„ä½ç½®ï¼Œå°±ä¸è¦é‡å†™ã€‚</p>
</blockquote>
<h4 style="margin:0px;font-family:inherit;line-height:1.8;color:inherit;text-rendering:optimizelegibility;font-size:20px;">setNeedsLayout</h4>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">æ ‡è®°ä¸ºéœ€è¦é‡æ–°å¸ƒå±€ï¼Œä¸ç«‹å³åˆ·æ–°ï¼Œä½†layoutSubviewsä¸€å®šä¼šè¢«è°ƒç”¨<br />
é…åˆlayoutIfNeededç«‹å³æ›´æ–°</p>
<h4 style="margin:0px;font-family:inherit;line-height:1.8;color:inherit;text-rendering:optimizelegibility;font-size:20px;">layoutIfNeeded</h4>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">å¦‚æœï¼Œæœ‰éœ€è¦åˆ·æ–°çš„æ ‡è®°ï¼Œç«‹å³è°ƒç”¨layoutSubviewsè¿›è¡Œå¸ƒå±€</p>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">è¿™ä¸ªåŠ¨ç”»ä¸­æœ‰ç”¨åˆ° ä¸¾ä¸ªæ —å­ğŸŒ° ã€‚</p>
<div class="image-package imagebubble" widget="ImageBubble" style="margin:0px auto 20px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/954071-43b26489414f3d01.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/954071-43b26489414f3d01.png?imageMogr2/auto-orient/strip%7CimageView2/2" class="imagebubble-image" style="height:auto;vertical-align:middle;border:0px;cursor:-webkit-zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br />
</div>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;"><br />
å¦‚å›¾ ï¼Œ ä¸Šé¢æœ‰ä¸ªlabel ï¼Œä¸­é—´æœ‰ä¸ªæŒ‰é’® ï¼Œ labelå·²ç»è¢«è‡ªåŠ¨å¸ƒå±€åˆ°å·¦ä¸Šè§’ ã€‚ ç„¶åæˆ‘ä»¬é‚£ä¸ªleftçš„constraint</p>
<pre class="hljs swift" style="padding:9.5px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:13px;color:#657b83;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;margin-top:0px;margin-bottom:20px;line-height:20px;word-break:break-all;word-wrap:normal;border:1px solid rgba(0, 0, 0, 0.14902);overflow:auto;background-color:#fdf6e3;background-position:initial initial;background-repeat:initial initial;"><code class="swift" style="padding:0px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;border:none;background-color:transparent;">  <span class="hljs-preprocessor" style="color:#cb4b16;">@IBOutlet</span> <span class="hljs-keyword" style="color:#859900;">weak</span> <span class="hljs-keyword" style="color:#859900;">var</span> leftContrain:<span class="hljs-type" style="color:#b58900;">NSLayoutConstraint</span>!</code></pre><p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">åœ¨viewDidLoadä¸­å£°æ˜å¥½ï¼Œç„¶ååœ¨Main.storyboardä¸­è¿›è¡Œè¿çº¿ã€‚ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ ï¼Œæˆ‘ä»¬æŠŠå·¦è¾¹çš„è·ç¦»æ”¹æˆ100 ã€‚</p>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">åœ¨æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶é‡ŒåŠ ä¸Šè¿™å¥ã€‚</p>
<pre class="hljs cpp" style="padding:9.5px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:13px;color:#657b83;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;margin-top:0px;margin-bottom:20px;line-height:20px;word-break:break-all;word-wrap:normal;border:1px solid rgba(0, 0, 0, 0.14902);overflow:auto;background-color:#fdf6e3;background-position:initial initial;background-repeat:initial initial;"><code class="cpp" style="padding:0px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;border:none;background-color:transparent;">leftContrain.constant = <span class="hljs-number" style="color:#2aa198;">100</span></code></pre><p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">ç„¶åæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªåŠ¨ç”»çš„æ•ˆæœã€‚<br />
å¦‚æœè¿™ä¹ˆåš</p>
<pre class="hljs cpp" style="padding:9.5px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:13px;color:#657b83;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;margin-top:0px;margin-bottom:20px;line-height:20px;word-break:break-all;word-wrap:normal;border:1px solid rgba(0, 0, 0, 0.14902);overflow:auto;background-color:#fdf6e3;background-position:initial initial;background-repeat:initial initial;"><code class="cpp" style="padding:0px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;border:none;background-color:transparent;">   UIView.animateWithDuration(<span class="hljs-number" style="color:#2aa198;">0.8</span>, delay: <span class="hljs-number" style="color:#2aa198;">0</span>, usingSpringWithDamping: <span class="hljs-number" style="color:#2aa198;">0.5</span>, initialSpringVelocity: <span class="hljs-number" style="color:#2aa198;">0.5</span>, options: UIViewAnimationOptions.AllowAnimatedContent, animations: {
                self.leftContrain.constant = <span class="hljs-number" style="color:#2aa198;">100</span>             }, completion: nil)</code></pre><p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">ä½ ä¼šå‘ç°ç„¶å¹¶åµ ã€‚å…¶å®è¿™å¥è¯<code style="padding:2px 4px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;color:#657b83;border-radius:3px;border:none;white-space:pre-wrap;background-color:#fdf6e3;">self.leftContrain.constant = 100</code>åªæ˜¯æ‰§è¡Œäº†<code style="padding:2px 4px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;color:#657b83;border-radius:3px;border:none;white-space:pre-wrap;background-color:#fdf6e3;">setNeedsLayout</code>&nbsp;æ ‡è®°äº†éœ€è¦é‡æ–°å¸ƒå±€ï¼Œä½†æ˜¯æ²¡æœ‰ç«‹å³æ‰§è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨åŠ¨ç”»ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•<code style="padding:2px 4px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;color:#657b83;border-radius:3px;border:none;white-space:pre-wrap;background-color:#fdf6e3;">layoutIfNeeded</code><br />
æ‰€ä»¥ä»£ç åº”è¯¥è¿™ä¹ˆå†™</p>
<pre class="hljs cpp" style="padding:9.5px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:13px;color:#657b83;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;margin-top:0px;margin-bottom:20px;line-height:20px;word-break:break-all;word-wrap:normal;border:1px solid rgba(0, 0, 0, 0.14902);overflow:auto;background-color:#fdf6e3;background-position:initial initial;background-repeat:initial initial;"><code class="cpp" style="padding:0px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;border:none;background-color:transparent;">leftContrain.constant = <span class="hljs-number" style="color:#2aa198;">100</span>         UIView.animateWithDuration(<span class="hljs-number" style="color:#2aa198;">0.8</span>, delay: <span class="hljs-number" style="color:#2aa198;">0</span>, usingSpringWithDamping: <span class="hljs-number" style="color:#2aa198;">0.5</span>, initialSpringVelocity: <span class="hljs-number" style="color:#2aa198;">0.5</span>, options: UIViewAnimationOptions.AllowAnimatedContent, animations: {
                self.view.layoutIfNeeded() <span class="hljs-comment" style="color:#93a1a1;">//ç«‹å³å®ç°å¸ƒå±€</span>             }, completion: nil)</code></pre><p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">æ‰€ä»¥ä¸Šé¢ä¸ç®¡å†™å¤šå°‘çº¦æŸçš„æ”¹å˜ï¼Œåªéœ€è¦åœ¨åŠ¨ç”»é‡ŒåŠ¨ç”¨ ä¸€æ¬¡<code style="padding:2px 4px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;color:#657b83;border-radius:3px;border:none;white-space:pre-wrap;background-color:#fdf6e3;">self.view.layoutIfNeeded()</code>,æ‰€æœ‰çš„éƒ½ä¼šå·²åŠ¨ç”»çš„æ–¹å¼ ã€‚å¦‚æœä¸€äº›å˜åŒ–ä¸æƒ³åŠ¨ç”» ã€‚åœ¨åŠ¨ç”»å‰æ‰§è¡Œ<code style="padding:2px 4px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;color:#657b83;border-radius:3px;border:none;white-space:pre-wrap;background-color:#fdf6e3;">self.view.layoutIfNeeded()</code></p>
<h3 style="margin:0px;font-family:inherit;line-height:1.8;color:inherit;text-rendering:optimizelegibility;font-size:22px;">drawRect</h3>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥é‡ç»˜çš„ã€‚</p>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">drawRectåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä¼šè¢«è°ƒç”¨ï¼š<br />
1ã€å¦‚æœåœ¨UIViewåˆå§‹åŒ–æ—¶æ²¡æœ‰è®¾ç½®rectå¤§å°ï¼Œå°†ç›´æ¥å¯¼è‡´drawRectä¸è¢«è‡ªåŠ¨è°ƒç”¨ã€‚drawRectè°ƒç”¨æ˜¯åœ¨Controller-&gt;loadView, Controller-&gt;viewDidLoad ä¸¤æ–¹æ³•ä¹‹åæ‰ç”¨çš„.æ‰€ä»¥ä¸ç”¨æ‹…å¿ƒåœ¨æ§åˆ¶å™¨ä¸­,è¿™äº›Viewçš„drawRectå°±å¼€å§‹ç”»äº†.è¿™æ ·å¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­è®¾ç½®ä¸€äº›å€¼ç»™View(å¦‚æœè¿™äº›View drawçš„æ—¶å€™éœ€è¦ç”¨åˆ°æŸäº›å˜é‡å€¼).<br />
2ã€è¯¥æ–¹æ³•åœ¨è°ƒç”¨sizeToFitåè¢«è°ƒç”¨ï¼Œæ‰€ä»¥å¯ä»¥å…ˆè°ƒç”¨sizeToFitè®¡ç®—å‡ºsizeã€‚ç„¶åç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨drawRect:æ–¹æ³•ã€‚3ã€é€šè¿‡è®¾ç½®contentModeå±æ€§å€¼ä¸ºUIViewContentModeRedrawã€‚é‚£ä¹ˆå°†åœ¨æ¯æ¬¡è®¾ç½®æˆ–æ›´æ”¹frameçš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨drawRect:ã€‚4ã€ç›´æ¥è°ƒç”¨setNeedsDisplayï¼Œæˆ–è€…setNeedsDisplayInRect:è§¦å‘drawRect:ï¼Œä½†æ˜¯æœ‰ä¸ªå‰ææ¡ä»¶æ˜¯rectä¸èƒ½ä¸º0ã€‚ä»¥ä¸Š1,2æ¨èï¼›è€Œ3,4ä¸æå€¡</p>
<p style="margin-top:0px;margin-bottom:25px;text-align:justify;word-break:break-word;">drawRectæ–¹æ³•ä½¿ç”¨æ³¨æ„ç‚¹ï¼š<br />
1ã€è‹¥ä½¿ç”¨UIViewç»˜å›¾ï¼Œåªèƒ½åœ¨drawRectï¼šæ–¹æ³•ä¸­è·å–ç›¸åº”çš„contextRefå¹¶ç»˜å›¾ã€‚å¦‚æœåœ¨å…¶ä»–æ–¹æ³•ä¸­è·å–å°†è·å–åˆ°ä¸€ä¸ªinvalidateçš„refå¹¶ä¸”ä¸èƒ½ç”¨äºç”»å›¾ã€‚drawRectï¼šæ–¹æ³•ä¸èƒ½æ‰‹åŠ¨æ˜¾ç¤ºè°ƒç”¨ï¼Œå¿…é¡»é€šè¿‡è°ƒç”¨setNeedsDisplay æˆ–è€… setNeedsDisplayInRectï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨è°ƒè¯¥æ–¹æ³•ã€‚2ã€è‹¥ä½¿ç”¨calayerç»˜å›¾ï¼Œåªèƒ½åœ¨drawInContext: ä¸­ï¼ˆç±»ä¼¼äºdrawRectï¼‰ç»˜åˆ¶ï¼Œæˆ–è€…åœ¨delegateä¸­çš„ç›¸åº”æ–¹æ³•ç»˜åˆ¶ã€‚åŒæ ·ä¹Ÿæ˜¯è°ƒç”¨setNeedDisplayç­‰é—´æ¥è°ƒç”¨ä»¥ä¸Šæ–¹æ³•3ã€è‹¥è¦å®æ—¶ç”»å›¾ï¼Œä¸èƒ½ä½¿ç”¨gestureRecognizerï¼Œåªèƒ½ä½¿ç”¨touchbeganç­‰æ–¹æ³•æ¥æ‰ç”¨setNeedsDisplayå®æ—¶åˆ·æ–°å±å¹•</p>
<h3 style="margin:0px;font-family:inherit;line-height:1.8;color:inherit;text-rendering:optimizelegibility;font-size:22px;">sizeToFit</h3>
<ul style="padding:0px;margin:0px 0px 20px 25px;text-align:justify;word-break:break-word;"><li style="line-height:30px;">sizeToFitä¼šè‡ªåŠ¨è°ƒç”¨sizeThatFitsæ–¹æ³•ï¼›</li>
<li style="line-height:30px;">sizeToFitä¸åº”è¯¥åœ¨å­ç±»ä¸­è¢«é‡å†™ï¼Œåº”è¯¥é‡å†™sizeThatFits</li>
<li style="line-height:30px;">sizeThatFitsä¼ å…¥çš„å‚æ•°æ˜¯receiverå½“å‰çš„sizeï¼Œè¿”å›ä¸€ä¸ªé€‚åˆçš„size</li>
<li style="line-height:30px;">sizeToFitå¯ä»¥è¢«æ‰‹åŠ¨ç›´æ¥è°ƒç”¨sizeToFitå’ŒsizeThatFitsæ–¹æ³•éƒ½æ²¡æœ‰é€’å½’ï¼Œå¯¹subviewsä¹Ÿä¸è´Ÿè´£ï¼Œåªè´Ÿè´£è‡ªå·±</li>
</ul>
</div></body></html>