<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2017-07-22T11:39:14Z"/><meta name="updated" content="2017-07-22T11:39:16Z"/><title>彻底弄清 anchorPoint 和 position   作者 雨雪传奇 关注2016.07.06 11:01 字数 707 阅读 600评论 0喜欢 4      最近在研读《iOS Core </title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><h1 class="title" style="box-sizing:border-box;font-size:34px;margin:20px 0px 0px;font-family:-apple-system, 'SF UI Display', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.3;color:#333333;word-break:break-word;font-variant-ligatures:normal;orphans:2;widows:2;">彻底弄清 anchorPoint 和 position</h1>
<div class="author" style="box-sizing:border-box;margin:30px 0px 40px;color:#333333;font-family:-apple-system, 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-size:17px;font-variant-ligatures:normal;orphans:2;widows:2;"><a class="avatar" href="http://www.jianshu.com/u/2b9395997dab" style="box-sizing:border-box;background-color:transparent;color:#333333;text-decoration:none;cursor:pointer;width:48px;height:48px;display:inline-block;vertical-align:middle;"><img src="http://upload.jianshu.io/users/upload_avatars/1554569/7b2d41d384ac.jpeg?imageMogr2/auto-orient/strip|imageView2/1/w/144/h/144" alt="144" style="box-sizing:border-box;border:1px solid #dddddd;vertical-align:middle;width:48px;height:48px;border-radius:50%;" /></a>&nbsp;<div class="info" style="box-sizing:border-box;vertical-align:middle;display:inline-block;margin-left:8px;"><span class="tag" style="box-sizing:border-box;padding:1px 2px;font-size:12px;color:#ea6f5a;border:1px solid #ea6f5a;border-radius:3px;">作者</span>&nbsp;<span class="name" style="box-sizing:border-box;margin-left:3px;margin-right:3px;font-size:16px;vertical-align:middle;"><a href="http://www.jianshu.com/u/2b9395997dab" style="box-sizing:border-box;background-color:transparent;color:#333333;text-decoration:none;cursor:pointer;">雨雪传奇</a></span>&nbsp;<a class="btn btn-success follow" style="box-sizing:border-box;background-color:#42c02e;color:#ffffff;cursor:pointer;display:inline-block;margin-bottom:0px;text-align:center;vertical-align:middle;background-image:none;border:1px solid #42c02e;white-space:nowrap;padding:0px 7px 0px 5px;font-size:12px;line-height:normal;border-top-left-radius:40px;border-top-right-radius:40px;border-bottom-right-radius:40px;border-bottom-left-radius:40px;"><span style="box-sizing:border-box;margin-left:2px;">关注</span></a><div class="meta" style="box-sizing:border-box;margin-top:5px;font-size:12px;color:#969696;"><span class="publish-time" style="box-sizing:border-box;padding-right:5px;">2016.07.06 11:01</span>&nbsp;<span class="wordage" style="box-sizing:border-box;padding-right:5px;">字数 707</span>&nbsp;<span class="views-count" style="box-sizing:border-box;padding-right:5px;">阅读 600</span><span class="comments-count" style="box-sizing:border-box;padding-right:5px;">评论 0</span><span class="likes-count" style="box-sizing:border-box;padding-right:5px;">喜欢 4</span></div>
</div>
</div>
<div data-note-content="" class="show-content" style="box-sizing:border-box;color:#2f2f2f;word-break:break-word;font-size:16px;line-height:1.7;font-family:-apple-system, 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-variant-ligatures:normal;orphans:2;widows:2;"><p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">最近在研读《iOS Core Animation Advanced Techniques》这一本书，想系统地学习下关于 CALayer、Transition、以及动画等知识点。大家可以在 gitbook 上面找到该书的翻译版本。</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;"><a target="_blank" href="https://www.gitbook.com/book/zsisme/ios-/details" style="box-sizing:border-box;background-color:transparent;color:#3194d0;text-decoration:none;cursor:pointer;">传送门</a>&nbsp;&nbsp;</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">在读到图层几何学这一章的时候，了解到了两个概念：anchorPoint 和 position。之前一直把 position 当成是矩形的中心点，如同 UIView 的 center 属性（事实上，在不改变 anchorPoint 的前提下，它确实是图层的中心点），但当 anchorPoint 改变的时候，我一下子懵逼了，为什么 position 不会改变，为什么frame会改变，为什么图形要往某个特定方向移动，而使 anchorPoint 和 position 重合？什么鬼...</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">怀着一定要搞懂的心态，我去网上查询了很多帖子，有的看了也没懂，有的给了我很大启发。现在也想把自己的理解在这里分享一下：</p>
<div class="image-package" style="box-sizing:border-box;padding-bottom:25px;width:700px;margin-left:-40px;text-align:center;"><img data-height="1636" data-width="1496" data-image-slug="ca5c6b38485ced92" src="http://upload-images.jianshu.io/upload_images/1554569-ca5c6b38485ced92.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/1554569-ca5c6b38485ced92.png?imageMogr2/auto-orient/strip" style="box-sizing:border-box;border:0px;vertical-align:middle;height:auto;cursor:zoom-in;transition:all 0.25s ease-in-out;" /><br style="box-sizing:border-box;" />
<div class="image-caption" style="box-sizing:border-box;min-width:20%;max-width:80%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom:1px solid #d9d9d9;font-size:14px;color:#969696;line-height:1.7;">改变 anchorPoint 前后对照图<br style="box-sizing:border-box;" />
</div>
</div>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">说白了，position 是什么？其实就是图层（layer）在父图层（superLayer）中的位置，图层的 size 定下了，那么应该把它放在父图层的什么位置，不就是由 position 定的吗？此时，父图层就会告诉这个儿子：喂，小子，这个 position 就是你在我地盘上的位置，你啊，如果将来要做 transition 变换，默认是以这个点为基准的。</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">儿子：哦，那我到时候做旋转那肯定也绕着这个点转了。deimo（但是）... 我不想老是绕着我的肚脐眼转啊，一点也不刺激，“能不能绕着我的头转？” 儿子对它爸说。</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">父图层一听，好啊，你小子，有想法啊，“那行，绕着你的哪一点转都可以，不过，你必须还在我 给你的 position 位置转！你的 position 位置不能变！”</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">儿子想：那我只能挪挪我的 frame 咯，不然没法按照老子的要求转了。 于是，它把自己的 anchorPoint 点移到了 position 位置上，愉快地开始转了=。=</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">所以，总结一下，anchorPoint 是相对于自身的位置，而 position 是相对于父图层的，改变 anchorPoint 只是更改了图层自身旋转地位置，但始终还是要通过改变 frame 使 anchorPoint 和 position 重合，这样它老子才不会骂它😄， 不知道这样的方式大家能不能看懂啊：）<br style="box-sizing:border-box;" />
</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">好了，我的第一次简书分享也告一段落了。有什么问题大家一定！要！指出来！！！拜托了！</p>
</div></body></html>