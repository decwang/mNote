<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2016-10-10T06:22:53Z"/><meta name="updated" content="2016-10-10T06:22:55Z"/><title> 关于继承NSDictionary之后出现 [NSArray count]: method only defined for abstract class的问题    标签： NSDictionar</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="article_title" style="margin:5px 0px;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-size:20px;line-height:30px;font-family:'Microsoft YaHei';widows:1;">&nbsp;<h1 style="margin:0px;padding:0px;display:inline;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-weight:normal;font-size:20px;line-height:30px;vertical-align:middle;"><span class="link_title"><a href="http://blog.csdn.net/zyq527758142/article/details/40073829" style="color:#333333;text-decoration:none;">关于继承NSDictionary之后出现 [NSArray count]: method only defined for abstract class的问题</a></span></h1>
</div>
<div class="article_manage clearfix" style="padding:0px 20px 5px;color:#999999;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-size:12px;line-height:22px;font-family:Arial;text-align:right;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:#ededed;margin:0px -20px;overflow:hidden;widows:1;"><div class="article_l" style="width:806.797px;float:left;"><span class="link_categories" style="margin:0px 5px;float:left;">标签：&nbsp;<a href="http://www.csdn.net/tag/NSDictionary" target="_blank" style="color:#ff9900;text-decoration:none;display:inline-block;margin-right:10px;">NSDictionary</a><a href="http://www.csdn.net/tag/%e7%bb%a7%e6%89%bf" target="_blank" style="color:#ff9900;text-decoration:none;display:inline-block;margin-right:10px;">继承</a><a href="http://www.csdn.net/tag/allKeys" target="_blank" style="color:#ff9900;text-decoration:none;display:inline-block;margin-right:10px;">allKeys</a></span></div>
<div class="article_r"><span class="link_postdate" style="margin:0px 5px 0px 0px;">2014-10-14 11:23</span>&nbsp;<span class="link_view" title="阅读次数" style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(http://static.blog.csdn.net/images/ico_view.png) 0% 50% no-repeat;">961人阅读</span>&nbsp;<span class="link_comments" title="评论次数" style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(http://static.blog.csdn.net/images/ico_comm.png) 0% 50% no-repeat;"><a href="http://blog.csdn.net/zyq527758142/article/details/40073829#comments" style="color:#ff9900;text-decoration:none;">评论</a>(0)</span>&nbsp;<span class="link_collect tracking-ad" data-mod="popu_171" style="margin:0px 5px;"><a title="收藏" target="_blank" style="color:#ff9900;">收藏</a></span>&nbsp;<span class="link_report" style="margin:0px 5px;"><a href="http://blog.csdn.net/zyq527758142/article/details/40073829#report" title="举报" style="color:#ff9900;text-decoration:none;">举报</a></span></div>
</div>
<div class="category clearfix" style="margin:0px -20px;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:#ededed;padding:5px 20px;font-family:Arial, Console, Verdana, 'Courier New';font-size:12px;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:normal;widows:1;"><div class="category_l" style="display:inline-block;font-size:14px;color:#333333;width:70px;float:left;line-height:28px;"><img src="http://static.blog.csdn.net/images/category_icon.jpg" style="border:none;vertical-align:middle;" />&nbsp;<span style="display:inline-block;vertical-align:middle;">分类：</span></div>
<div class="category_r" style="display:inline-block;font-size:14px;color:#df3434;float:left;width:726.109px;"><label style="display:inline-block;margin-left:15px;cursor:pointer;line-height:28px;position:relative;">iOS开发（50）&nbsp;<img class="arrow-down" src="http://static.blog.csdn.net/images/arrow_triangle%20_down.jpg" style="border:none;display:inline;" /></label></div>
</div>
<div class="bog_copyright" style="padding:20px 0px;font-family:Arial, Console, Verdana, 'Courier New';font-size:12px;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:normal;widows:1;"><p class="copyright_p" style="margin-top:0px;margin-bottom:0px;padding:0px 0px 0px 10px;height:14px;line-height:14px;border-left-style:solid;border-left-width:3px;border-left-color:#e41c1e;color:#666666;font-size:14px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<div id="article_content" class="article_content" style="margin:20px 0px 0px;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;font-family:Arial;widows:1;"><p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;background-color:#ff6600;">1.问题描述</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">这次在建数据模型Model时，选择了继承NSDictionary而不是NSObject，于是问题就来了。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">在从服务器对返回的数据进行解析后赋值时，就出现了&nbsp;[NSArray count]: method only defined for abstract class的问题。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">然后问题定位是在model.allKeys这行。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;background-color:#ff6600;">2.问题阐述</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-family:Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif;line-height:18px;">谷歌了下有个回答</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-family:Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif;line-height:18px;background-color:#cccccc;">NSDictionary is a class cluster. This means that the value returned from its init methods is not strictly an NSDictionary, but a subclass that implements the actual functionality. In almost every case, it is better to give your class an NSDictionary as an instance variable or to simply define a category on NSDictionary.</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-family:Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif;"><span style="line-height:18px;">意思就是Model在初始化时严格来说并不是一个NSDictionary。所以需要在子类中实现</span></span></p>
<pre style="white-space:pre-wrap;word-wrap:break-word;">1. count
2. objectForKey:
3. keyEnumerator</pre><p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-family:Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif;line-height:18px;">等方法。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;"><span style="font-family:Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif;line-height:18px;background-color:#999900;">3.问题解决</span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">NSArray 和 NSDictionary 都是簇类，一般不建议写一个类去继承他们。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">解决方案一：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">若工程已无法回退，必须要准确的重写这些基本的方法：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<pre class="lang-c prettyprint prettyprinted" name="code" style="white-space:pre-wrap;word-wrap:normal;position:relative;overflow:auto;word-break:break-all;margin-top:0px;margin-bottom:10px;padding:5px;border:0px;vertical-align:baseline;font-family:Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;width:auto;max-height:600px;line-height:17.8048px;background-color:#eeeeee;"><code style="margin:0px;padding:0px;border:0px;vertical-align:baseline;font-family:Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;white-space:inherit;">insertObject:atIndex:
removeObjectAtIndex:
addObject:
removeLastObject
count
replaceObjectAtIndex:withObject:</code></pre><p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">解决方案二：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">见另一篇文章：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><a target="_blank" href="http://blog.csdn.net/zyq527758142/article/details/40072673" style="color:#ff9900;text-decoration:none;">http://blog.csdn.net/zyq527758142/article/details/40072673</a></p>
</div></body></html>