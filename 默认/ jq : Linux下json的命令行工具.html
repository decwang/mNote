<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2017-07-31T08:49:29Z"/><meta name="updated" content="2017-07-31T08:49:36Z"/><title> jq : Linux下json的命令行工具</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="Blog_tit4 Blog_tit5" style="word-wrap:break-word;border-bottom-width:0px;padding:0px 0px 11px;color:#565656;font-family:宋体, Arial;font-size:12px;">&nbsp;<a href="http://blog.chinaunix.net/uid-24774106-id-3830242.html" style="word-wrap:break-word;text-decoration:none;color:#19599b;font-family:微软雅黑, 黑体, Verdana;font-size:20px;">jq : Linux下json的命令行工具</a>&nbsp;<span style="word-wrap:break-word;margin-left:22px;color:#bbbaba;font-family:Arial;">2013-08-01 20:54:25</span></div>
<div class="Blog_con2" style="word-wrap:break-word;color:#666666;line-height:26px;font-family:宋体, Arial;font-size:12px;"><div class="Blog_con3" style="word-wrap:break-word;margin-top:10px;line-height:22px;"><p style="word-wrap:break-word;margin-top:0px;margin-bottom:0px;padding:0px;color:#19599b;">分类：&nbsp;<span style="word-wrap:break-word;color:#bbbaba;margin-right:25px;">LINUX</span></p>
<p style="word-wrap:break-word;margin-top:0px;margin-bottom:0px;padding:0px;color:#19599b;"></p>
</div>
<div class="Blog_wz1" style="word-wrap:break-word;font-size:16px;"><span style="word-wrap:break-word;font-size:14px;"><span style="word-wrap:break-word;font-family:'Courier New';"><span style="word-wrap:break-word;line-height:2;">&nbsp; &nbsp;JSON是前端编程经常用到的格式，对于PHP或者Python，解析JSON都不是什么大事，尤其是PHP的json_encode和json_decode,干的相当的漂亮。Linux下也有处理处理JSON的神器：jq。<br style="word-wrap:break-word;" />
&nbsp; &nbsp;对于JSON格式而言，jq就像sed/awk/grep这些神器一样的方便，而也，jq没有乱七八糟的依赖，只需要一个binary文件jq，就足矣。下面我们看下jq的使用。<br style="word-wrap:break-word;" />
<strong style="word-wrap:break-word;">&nbsp; &nbsp;1 格式化JSON&nbsp;</strong><br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;">manu@manu<span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#0000cc;">~</span><span style="word-wrap:break-word;color:#0000cc;">/</span><span style="word-wrap:break-word;color:#ff0000;">code</span><span style="word-wrap:break-word;color:#ff0000;">/</span>php/json$ cat json_raw<span style="word-wrap:break-word;color:#0000cc;">.</span>txt&nbsp;</span></li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">{</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"name"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"Google"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">,</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"location"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">{</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"street"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"1600 Amphitheatre Parkway"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">,</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"city"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"Mountain View"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">,</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"state"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"California"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">,</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"country"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"US"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">}</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">,</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"employees"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">[</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">{</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"name"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"Michael"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">,</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"division"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"Engineering"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">}</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">,</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">{</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"name"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"Laura"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">,</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"division"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"HR"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">}</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">,</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">{</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"name"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"Elise"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">,</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"division"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">:</span><span style="word-wrap:break-word;color:#ff00ff;line-height:1.3;letter-spacing:0.1px;">"Marketing"</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">}</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">]</span><span style="word-wrap:break-word;color:#0000cc;line-height:1.3;letter-spacing:0.1px;">}</span></li>
</ol>
</div>
&nbsp; &nbsp;上面的JSON是PHP json_encode之后，echo出来的字符串，很明显，可读性太差。前一阵子写文档，需要将前后段JSON写入文档，我当时是用是网上的JSON格式化工具做的。事实上，jq就可以检查JSON的合法性，并把JSON格式化成更友好更可读的格式：<br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;cat json_raw<span style="word-wrap:break-word;color:#0000cc;">.</span>txt&nbsp;<span style="word-wrap:break-word;color:#0000cc;">|</span>&nbsp;jq&nbsp;<span style="word-wrap:break-word;color:#0000cc;">.</span></span></li>
</ol>
</div>
&nbsp; &nbsp;&nbsp;<img src="http://blog.chinaunix.net/attachment/201308/1/24774106_1375357640PQ0C.png" width="700" height="400.684931507" alt="" style="word-wrap:break-word;border:0px;" /><br style="word-wrap:break-word;" />
<br style="word-wrap:break-word;" />
&nbsp; &nbsp;看到上图，将一团乱麻的JSON格式化成个更可读的形式。其实背后另外检查了JSON的合法性。如果JSON不合法，jq .会报错。我故意写个错误的JSON：&nbsp;&nbsp;<br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;">manu@manu<span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#0000cc;">~</span><span style="word-wrap:break-word;color:#0000cc;">/</span>code/php/json$ cat json_err<span style="word-wrap:break-word;color:#0000cc;">.</span>txt&nbsp;<br style="word-wrap:break-word;" />
</span></li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">{<span style="word-wrap:break-word;color:#ff00ff;">"name"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"Google"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><span style="word-wrap:break-word;color:#ff00ff;">"location"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#0000cc;">{</span><span style="word-wrap:break-word;color:#ff00ff;">"street"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"1600 Amphitheatre Parkway"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><span style="word-wrap:break-word;color:#ff00ff;">"city"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"Mountain View"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><span style="word-wrap:break-word;color:#ff00ff;">"state"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"California"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><span style="word-wrap:break-word;color:#ff00ff;">"country"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"US"</span><span style="word-wrap:break-word;color:#ff00ff;">}</span><span style="word-wrap:break-word;color:#0000cc;">,</span><span style="word-wrap:break-word;color:#ff00ff;">"employees"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#0000cc;">[</span><span style="word-wrap:break-word;color:#0000cc;">{</span><span style="word-wrap:break-word;color:#ff00ff;">"name"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"Michael"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><span style="word-wrap:break-word;color:#ff00ff;">"division"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;"><strong style="word-wrap:break-word;"><u style="word-wrap:break-word;">"Engineering"</u></strong></span><span style="word-wrap:break-word;color:#ff00ff;"><strong style="word-wrap:break-word;"><u style="word-wrap:break-word;">}</u></strong></span><span style="word-wrap:break-word;color:#ff00ff;"><strong style="word-wrap:break-word;"><u style="word-wrap:break-word;">{</u></strong></span><span style="word-wrap:break-word;color:#ff00ff;"><strong style="word-wrap:break-word;"><u style="word-wrap:break-word;">"name"</u></strong></span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"Laura"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><span style="word-wrap:break-word;color:#ff00ff;">"division"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"HR"</span><span style="word-wrap:break-word;color:#ff00ff;">}</span><span style="word-wrap:break-word;color:#0000cc;">,</span><span style="word-wrap:break-word;color:#0000cc;">{</span><span style="word-wrap:break-word;color:#ff00ff;">"name"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"Elise"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><span style="word-wrap:break-word;color:#ff00ff;">"division"</span><span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"Marketing"</span><span style="word-wrap:break-word;color:#ff00ff;">}</span><span style="word-wrap:break-word;color:#0000cc;">]</span><span style="word-wrap:break-word;color:#0000cc;">}</span></li>
</ol>
</div>
&nbsp; &nbsp;上面JSON中加粗和斜体部分，遗漏了一个逗号，所以这个JSON是错误的，jq轻松的可以轻松的检查出来：<br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;manu@manu<span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#0000cc;">~</span><span style="word-wrap:break-word;color:#0000cc;">/</span>code/php/json$ cat json_err<span style="word-wrap:break-word;color:#0000cc;">.</span>txt&nbsp;<span style="word-wrap:break-word;color:#0000cc;">|</span>jq&nbsp;<span style="word-wrap:break-word;color:#0000cc;">.</span><br style="word-wrap:break-word;" />
</span></li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">&nbsp;&nbsp;&nbsp;&nbsp;parse error<span style="word-wrap:break-word;color:#0000cc;">:</span>&nbsp;Expected separator between values at line 1<span style="word-wrap:break-word;color:#0000cc;">,</span>&nbsp;column 183</li>
</ol>
</div>
<strong style="word-wrap:break-word;">&nbsp; &nbsp; 2 JSON parse</strong><br style="word-wrap:break-word;" />
&nbsp; &nbsp;如上图json，jq如何解析JSON，根据key获取value？&nbsp; &nbsp;<br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;{<br style="word-wrap:break-word;" />
</span></li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;“key_1”<span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"value_1"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><br style="word-wrap:break-word;" />
</li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;“key_2”<span style="word-wrap:break-word;color:#0000cc;">:</span><span style="word-wrap:break-word;color:#ff00ff;">"value_2"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><br style="word-wrap:break-word;" />
</li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
</ol>
</div>
&nbsp; &nbsp; 如何根据key获取value？&nbsp;<br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;jq&nbsp;<span style="word-wrap:break-word;color:#ff00ff;">'.key'</span></span></li>
</ol>
</div>
&nbsp; &nbsp;&nbsp;<img src="http://blog.chinaunix.net/attachment/201308/1/24774106_13753588214y7s.png" width="700" height="160.801564027" alt="" style="word-wrap:break-word;border:0px;" /><br style="word-wrap:break-word;" />
&nbsp; &nbsp;解析不存在的元素，会返回null<br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;"><span style="word-wrap:break-word;color:#0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;echo</span>&nbsp;<span style="word-wrap:break-word;color:#ff00ff;">'{"foo": 42, "bar": "less interesting data"}'</span>&nbsp;<span style="word-wrap:break-word;color:#0000cc;">|</span>&nbsp;jq&nbsp;<span style="word-wrap:break-word;color:#0000cc;">.</span>nofoo<br style="word-wrap:break-word;" />
</span></li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">&nbsp;&nbsp;&nbsp;&nbsp;null</li>
</ol>
</div>
&nbsp; &nbsp;<strong style="word-wrap:break-word;font-size:14.399999618530273px;line-height:22.399999618530273px;">3 JSON nested&nbsp;parse（嵌套解析）&nbsp;&nbsp;<br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-weight:normal;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;cat json_raw<span style="word-wrap:break-word;color:#0000cc;">.</span>txt&nbsp;<span style="word-wrap:break-word;color:#0000cc;">|</span>&nbsp;jq&nbsp;<span style="word-wrap:break-word;color:#ff00ff;">'.location.state'</span><br style="word-wrap:break-word;" />
</span></li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#ff00ff;">&nbsp;&nbsp;&nbsp;&nbsp;"California"</span></li>
</ol>
</div>
&nbsp; &nbsp;4 JSON parse array&nbsp; &nbsp;<br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-weight:normal;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;cat json_raw<span style="word-wrap:break-word;color:#0000cc;">.</span>txt&nbsp;<span style="word-wrap:break-word;color:#0000cc;">|</span>&nbsp;jq&nbsp;<span style="word-wrap:break-word;color:#ff00ff;">'.employees[1].name'</span><br style="word-wrap:break-word;" />
</span></li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#ff00ff;">&nbsp;&nbsp;&nbsp;&nbsp;"Laura"</span></li>
</ol>
</div>
&nbsp; &nbsp;5 内建函数<br style="word-wrap:break-word;" />
&nbsp;&nbsp;</strong></span></span></span><span style="word-wrap:break-word;font-family:'Courier New';font-size:14px;letter-spacing:0.1px;line-height:2;">jq还有一些内建函数如 key，has<br style="word-wrap:break-word;" />
&nbsp; key是用来获取JSON中的key元素的：&nbsp;<br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;">cat json_raw<span style="word-wrap:break-word;color:#0000cc;">.</span>txt&nbsp;<span style="word-wrap:break-word;color:#0000cc;">|</span>&nbsp;jq&nbsp;<span style="word-wrap:break-word;color:#ff00ff;">'keys'</span><br style="word-wrap:break-word;" />
</span></li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#0000cc;">[</span><br style="word-wrap:break-word;" />
</li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">&nbsp;&nbsp;<span style="word-wrap:break-word;color:#ff00ff;">"employees"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><br style="word-wrap:break-word;" />
</li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">&nbsp;&nbsp;<span style="word-wrap:break-word;color:#ff00ff;">"location"</span><span style="word-wrap:break-word;color:#0000cc;">,</span><br style="word-wrap:break-word;" />
</li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">&nbsp;&nbsp;<span style="word-wrap:break-word;color:#ff00ff;">"name"</span><br style="word-wrap:break-word;" />
</li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#0000cc;">]</span></li>
</ol>
</div>
&nbsp; &nbsp;has是用来是判断是否存在某个key：&nbsp;<br style="word-wrap:break-word;" />
<div id="codeText" class="codeText" style="word-wrap:break-word;border:1px solid #dddddd;width:1521.265625px;overflow:auto;margin:0px 0px 1.1em;padding:0px;word-break:break-all;letter-spacing:0.1px;font-size:12px;line-height:normal;font-family:Consolas, monospace;"><ol start="1" class="dp-css none_number" style="word-wrap:break-word;margin:0px 1px 0px 0px;padding:5px 0pt;list-style:none outside none;color:#5c5c5c;line-height:1.3;"><li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><span style="word-wrap:break-word;color:#000000;">cat json_raw<span style="word-wrap:break-word;color:#0000cc;">.</span>txt&nbsp;<span style="word-wrap:break-word;color:#0000cc;">|</span>&nbsp;jq&nbsp;<span style="word-wrap:break-word;color:#ff00ff;">'has("name")'</span><br style="word-wrap:break-word;" />
</span></li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">true<br style="word-wrap:break-word;" />
</li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;"><br style="word-wrap:break-word;" />
</li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">cat json_raw<span style="word-wrap:break-word;color:#0000cc;">.</span>txt&nbsp;<span style="word-wrap:break-word;color:#0000cc;">|</span>&nbsp;jq&nbsp;<span style="word-wrap:break-word;color:#ff00ff;">'has("noexisted")'</span><br style="word-wrap:break-word;" />
</li>
<li style="word-wrap:break-word;margin:0px;padding:0px 0px 0px 10px;list-style:none outside none;">false</li>
</ol>
</div>
&nbsp; &nbsp;与JSON相关的我就暂时介绍到这里，希望进一步了解jq并使用的可以去<a href="http://stedolan.github.io/jq/manual/" style="word-wrap:break-word;text-decoration:none;color:#565656;">http://stedolan.github.io/jq/manual/</a>，希望了解源码实现的，可以去<a href="https://github.com/stedolan/jq" style="word-wrap:break-word;text-decoration:none;color:#565656;">https://github.com/stedolan/jq</a>，意料之中的事情是&nbsp;作者用来flex和bison来parse json。我们的示例JSON来自参考文献第一篇。用google搜索，kernalpanic中有篇文章介绍了jshon和json.sh提供了另外的思路。不过我挺喜欢及<br style="word-wrap:break-word;" />
<br style="word-wrap:break-word;" />
参考文献：<br style="word-wrap:break-word;" />
1&nbsp;</span><span style="word-wrap:break-word;color:#333333;font-family:'Archivo Narrow', arial, serif;font-size:12px;line-height:1.25;letter-spacing:0.1px;"><a href="http://xmodulo.com/2013/05/how-to-parse-json-string-via-command-line-on-linux.html" target="_blank" style="word-wrap:break-word;color:#565656;"><strong style="word-wrap:break-word;"><span style="word-wrap:break-word;font-size:14px;color:#000000;">How to parse JSON string via command line on Linux</span></strong><br style="word-wrap:break-word;" />
</a>2&nbsp;<span style="word-wrap:break-word;font-size:14px;color:#000000;"><strong style="word-wrap:break-word;"><a href="http://iamsk.info/2013/06/03/jq/" target="_blank" style="word-wrap:break-word;text-decoration:none;color:#565656;"><span style="word-wrap:break-word;color:#000000;">&nbsp;j</span></a></strong></span></span><a href="http://iamsk.info/2013/06/03/jq/" target="_blank" style="word-wrap:break-word;text-decoration:none;color:#565656;"><span style="word-wrap:break-word;color:#000000;font-family:'Advent Pro', sans-serif;font-size:14px;line-height:1;letter-spacing:0.1px;"><strong style="word-wrap:break-word;">q - command-line JSON processor</strong></span></a></div>
</div></body></html>