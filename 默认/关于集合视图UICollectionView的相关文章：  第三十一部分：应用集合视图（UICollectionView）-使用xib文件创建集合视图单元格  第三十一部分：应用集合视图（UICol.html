<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2016-11-17T10:38:08Z"/><meta name="updated" content="2016-11-17T10:38:10Z"/><title>关于集合视图UICollectionView的相关文章：  第三十一部分：应用集合视图（UICollectionView）-使用xib文件创建集合视图单元格  第三十一部分：应用集合视图（UICol</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">关于集合视图UICollectionView的相关文章：</p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;"><a title="链向 第三十一部分：应用集合视图（UICollectionView）-使用xib文件创建集合视图单元格 的固定链接" rel="bookmark" href="http://www.entlib.net/?p=2701" target="_blank" style="color:#949494;text-decoration:none;transition:0.25s;outline:none 0px;border-bottom-width:1px;border-bottom-style:dashed;border-bottom-color:#949494;font-style:italic;font-weight:bold;">第三十一部分：应用集合视图（UICollectionView）-使用xib文件创建集合视图单元格</a>&nbsp;<br />
<a title="链向 第三十一部分：应用集合视图（UICollectionView）-创建UICollectionViewCell子类单元格 的固定链接" rel="bookmark" href="http://www.entlib.net/?p=2709" target="_blank" style="color:#949494;text-decoration:none;transition:0.25s;outline:none 0px;border-bottom-width:1px;border-bottom-style:dashed;border-bottom-color:#949494;font-style:italic;font-weight:bold;">第三十一部分：应用集合视图（UICollectionView）-创建UICollectionViewCell子类单元格</a>&nbsp;<br />
<a title="链向 第三十一部分：应用集合视图（UICollectionView）-创建基于Storyboard的集合视图应用程序 的固定链接" rel="bookmark" href="http://www.entlib.net/?p=2740" target="_blank" style="color:#949494;text-decoration:none;transition:0.25s;outline:none 0px;border-bottom-width:1px;border-bottom-style:dashed;border-bottom-color:#949494;font-style:italic;font-weight:bold;">第三十一部分：应用集合视图（UICollectionView）-创建基于Storyboard的集合视图应用程序</a></p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">本文摘录自《&nbsp;<a href="http://www.entlib.net/?page_id=2091" target="_blank" style="color:#949494;text-decoration:none;transition:0.25s;outline:none 0px;border-bottom-width:1px;border-bottom-style:dashed;border-bottom-color:#949494;font-style:italic;font-weight:bold;">一步一步学习 iOS 6 编程（第四版）</a>&nbsp;》电子书，部分截图省略。</p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;"><strong style="text-indent:0px;">改变滚动方向</strong></p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">默认情况下，集合视图配置的流布局（flow layout）是垂直滚动模式，我们可以通过Attriubtes inspector面板窗口进行调整。&nbsp;<br />
<img title="iOS6-UICollectionView-ScrollDirection" src="http://img1.tuicool.com/yimqy2.png!web" alt="" class="alignCenter" style="max-width:96%;height:auto;vertical-align:middle;border:0px none;margin:0px auto 10px;text-align:center;display:block;" /></p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">将集合视图的Scroll Direction属性从默认的Vertical 更改为Horizontal，然后再次运行应用程序。现在是水平横向滚动集合视图中的图像。</p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;"><img title="iOS6-UICollectionView-ScrollDirection-App" src="http://img2.tuicool.com/JNRJRr.jpg!web" alt="" class="alignCenter" style="max-width:96%;height:auto;vertical-align:middle;border:0px none;margin:0px auto 10px;text-align:center;display:block;" /></p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;"><strong style="text-indent:0px;">实现补充视图（Supplementary View）</strong></p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">接下来我们演示实现补充视图，在图像列表上添加一个头部标题。首先，在interface builder，为集合视图添加一个原型头部（prototype header）补充视图。在MainStoryboard.storyboard文件中，选择黑色背景的集合视图控制器场景，这个表示UICollectionView对象。在Attributes inspector面板窗口，Collection View节点下，选择Section Header 复选框。</p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;"><img title="iOS6-UICollectionView-SectionHeader" src="http://img0.tuicool.com/jyieQb.png!web" alt="" class="alignCenter" style="max-width:96%;height:auto;vertical-align:middle;border:0px none;margin:0px auto 10px;text-align:center;display:block;" /></p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">在Section Header启用之后，一个header prototype对象添加到Storyboard画布中。和原型单元格一样，头部也可以使用对象库中的其他视图对象。例如，我们在原型头部中添加一个Label标签对象，随便调整一下Label标签的宽度，以便容纳更多的文本信息。同时，利用自动布局（Auto Layout）设置Label标签为水平和垂直居中。默认情况下，标签对象为黑色字体，因此标签文本看不到。这里，我们选择label标签，在Attributes inspector面板窗口，设置Color属性为白色，设置完成之后，场景如下图所示。</p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;"><img title="iOS6-UICollectionView-SectionHeader2" src="http://img2.tuicool.com/QjM3ii.png!web" alt="" class="alignCenter" style="max-width:96%;height:auto;vertical-align:middle;border:0px none;margin:0px auto 10px;text-align:center;display:block;" /></p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">然后，我们在项目中添加一个新类，作为header视图指定类。选择File &gt; New &gt; File…菜单项，添加一个新的Objective-C 类，命名为PhotoSupplementaryView，作为UICollectionReusableView的子类。</p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">在Storyboard中选择header，然后在Identity inspector 面板窗口，设置Class属性为前面添加的PhotoSupplementaryView类。和单元格一样，补充视图（Supplementary View）也是可重用的。因此选择Attributes inspector面板窗口，设置Identifier属性为PhotoHeader。</p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">在header区域显示的文本将在视图控制器的数据源方法中设置。我们需要建立Label标签的输出口，显示Assistant Editor窗口，同时还需要打开PhotoSupplementaryView.h头文件。可以通过编辑器上部的文件导航栏选择打开这个文件。</p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">然后建立header中label标签到MySupplementView类的输出口连接，命名为headerLabel。&nbsp;<br />
<code class="prettyprint" style="padding:2px 4px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;border:none;font-weight:600;font-size:14px;background-color:#f7f7f9;">#import &lt;UIKit/UIKit.h&gt;<br />
@interface PhotoSupplementaryView : UICollectionReusableView<br />
@property (strong, nonatomic) IBOutlet UILabel *headerLabel;<br />
@end</code></p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;"><strong style="text-indent:0px;">实现补充视图协议方法</strong></p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">接下来还需要实现补充视图的数据源方法，当集合视图显示补充视图（supplementary view）时，它会调用数据源的viewForSupplementaryElementOfKind：方法，并期望返回一个用于显示的对象。这个方法的一个传入参数，可标示这是一个header或者footer。另外，补充视图也使用了类似于单元格的出列机制（dequeue mechanism）。<br />
先打开PhotoCollectionViewController.h文件，引入补充视图的头文件：&nbsp;<br />
#import “PhotoSupplementaryView.h”</p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">然后打开PhotoCollectionViewController.m文件，添加viewForSupplementaryElementOfKind：方法的实现代码：&nbsp;<br />
<code class="prettyprint" style="padding:2px 4px;font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;border:none;font-weight:600;font-size:14px;background-color:#f7f7f9;">- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath{<br />
PhotoSupplementaryView *header = nil;<br />
if([kind isEqual:UICollectionElementKindSectionHeader]){<br />
header = [collectionView dequeueReusableSupplementaryViewOfKind:kind withReuseIdentifier:@"PhotoHeader" forIndexPath:indexPath];<br />
header.headerLabel.text = @"爱车和美女";<br />
}<br />
return header;<br />
}</code></p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;">再次编译运行应用程序，这次发现header补充视图显示在集合视图中了。</p>
<p style="margin-top:0px;margin-bottom:0.75em;font-size:16px;line-height:27.2px;text-indent:1em;color:#333333;font-family:'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;background-color:#fefefe;"><img title="iOS6-UICollectionView-SectionHeader-App" src="http://img2.tuicool.com/uquYRv.jpg!web" alt="" class="alignCenter" style="max-width:96%;height:auto;vertical-align:middle;border:0px none;margin:0px auto 10px;text-align:center;display:block;" /></p></body></html>