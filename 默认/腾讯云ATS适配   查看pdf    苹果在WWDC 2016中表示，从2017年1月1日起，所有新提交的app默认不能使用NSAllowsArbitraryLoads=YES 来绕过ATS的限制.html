<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2016-12-09T02:31:28Z"/><meta name="updated" content="2016-12-09T02:31:36Z"/><title>腾讯云ATS适配   查看pdf    苹果在WWDC 2016中表示，从2017年1月1日起，所有新提交的app默认不能使用NSAllowsArbitraryLoads=YES 来绕过ATS的限制</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="box-title" style="margin:1px 0px 0px;padding:0px;box-sizing:border-box;line-height:26px;list-style:inherit;position:relative;color:#666666;font-family:PingFangSC-Light, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-variant-ligatures:normal;orphans:2;widows:2;"><h1 style="margin:1em 120px 16px 0px;padding:0px;font-size:20px;box-sizing:border-box;line-height:1.4;list-style:inherit;color:#000000;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">腾讯云ATS适配</h1>
<a class="pdf-download-btn" href="https://mc.qcloudimg.com/static/qc_doc/39338e95c9be911f2828f9c7817ef294/6956.v20161111215321.pdf" target="_blank" style="text-decoration:none;box-sizing:border-box;line-height:30px;list-style:inherit;color:#2177d9;height:30px;padding-left:15px;padding-right:15px;border:1px solid #2177d9;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-right-radius:2px;border-bottom-left-radius:2px;position:absolute;right:0px;top:-1px;cursor:pointer;">&nbsp;<span class="text" style="box-sizing:border-box;line-height:26px;list-style:inherit;">查看pdf</span></a></div>
<div class="tags-box" style="margin:0px 0px 30px;padding:0px;box-sizing:border-box;line-height:26px;list-style:inherit;color:#666666;font-family:PingFangSC-Light, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-variant-ligatures:normal;orphans:2;widows:2;"></div>
<div id="docArticleContent" style="margin:0px;padding:0px;box-sizing:border-box;line-height:26px;list-style:inherit;color:#666666;font-family:PingFangSC-Light, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-variant-ligatures:normal;orphans:2;widows:2;"><p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;line-height:26px;list-style:inherit;">苹果在WWDC 2016中表示，从2017年1月1日起，所有新提交的app默认不能使用<code style="box-sizing:border-box;line-height:26px;list-style:inherit;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace;font-size:1em;padding:0.2em 0px;margin-left:3px;margin-right:3px;background-color:rgba(0, 0, 0, 0.0392157);border-radius:3px;">NSAllowsArbitraryLoads=YES</code>来绕过ATS的限制。腾讯云将于12月12日正式支持HTTPS，届时您只需要使用新版SDK（接口无变化），并且将原来的视频地址的前缀从<a href="http://xn--https-vl6jj0f//" target="_blank" style="text-decoration:none;box-sizing:border-box;line-height:26px;list-style:inherit;color:#4078c0;background-color:transparent;">http://换成https://</a>&nbsp;即可，SDK内部会自动适配。</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;line-height:26px;list-style:inherit;">但需要提醒的是，https相比于http，在引入更多安全性（视频方面并不是特别需要）的同时也牺牲了连接速度和CPU使用率。所以如果您APP在新的上架政策下，还要需要继续使用HTTP，方法修改Info.plist，将<code style="box-sizing:border-box;line-height:26px;list-style:inherit;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace;font-size:1em;padding:0.2em 0px;margin-left:3px;margin-right:3px;background-color:rgba(0, 0, 0, 0.0392157);border-radius:3px;">myqcloud.com</code>加入到<code style="box-sizing:border-box;line-height:26px;list-style:inherit;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace;font-size:1em;padding:0.2em 0px;margin-left:3px;margin-right:3px;background-color:rgba(0, 0, 0, 0.0392157);border-radius:3px;">NSExceptionDomains</code>中。具体的修改如图所示:</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;line-height:26px;list-style:inherit;"><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/myqcloud.png" alt="myqcloud" style="border:0px;box-sizing:content-box;line-height:26px;list-style:inherit;height:auto;" /></p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;line-height:26px;list-style:inherit;">针对特定域名禁用ATS是可以被苹果审核所接受的，您可能需要在审核时进行说明，<code style="box-sizing:border-box;line-height:26px;list-style:inherit;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace;font-size:1em;padding:0.2em 0px;margin-left:3px;margin-right:3px;background-color:rgba(0, 0, 0, 0.0392157);border-radius:3px;">myqcloud.com</code>是用于视频播放的域名。</p>
</div></body></html>