<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2016-11-17T10:17:32Z"/><meta name="updated" content="2016-11-17T10:17:34Z"/><title>1:什么是block？ block其实就是一个代码块，把你想要执行的代码封装在这个代码块里，等到需要的时候再去调用。那block是OC对象吗？答案是肯定的 官方文档如下     2:block要用c</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;line-height:1.8;"><span style="font-family:'Microsoft YaHei';"><span style="color:#ff0000;">1:什么是block？</span><br />
<span style="line-height:24px;">block其实就是一个代码块，把你想要执行的代码封装在这个代码块里，等到需要的时候再去调用。那block是OC对象吗？答案是肯定的<br />
</span><span style="line-height:24px;"><span style="color:#2e2e2e;font-size:15px;line-height:24px;">官方文档如下</span></span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"><span style="color:#5e5e5e;font-size:15px;line-height:24px;"><span style="font-family:'Microsoft YaHei';"><img src="http://img.blog.csdn.net/20160901114048824?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" style="border:none;" /><br />
</span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"><span style="line-height:24px;"><span style="color:#ff0000;"><span style="font-family:'Microsoft YaHei';">2:block要用copy修饰,还是用strong</span></span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"><span style="line-height:24px;"><span style="font-family:'Microsoft YaHei';">block本身是像对象一样可以retain，和release。但是，block在创建的时候，它的内存是分配在栈(stack)上，而不是在堆(heap)上。他本身的作于域是属于创建时候的作用域，一旦在创建时候的作用域外面调用block将导致程序崩溃。<br />
使用retain也可以，但是block的retain行为默认是用copy的行为实现的，</span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"><span style="line-height:24px;"><span style="font-family:'Microsoft YaHei';">因为block变量默认是声明为栈变量的，为了能够在block的声明域外使用，所以要把block拷贝（copy）到堆，所以说为了block属性声明和实际的操作一致，最好声明为copy。<br />
<br />
<span style="color:#ff0000;">3:<span style="line-height:30px;">__block关键字的使用</span></span></span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"><span style="line-height:24px;"><span style="color:#3d464d;font-size:16px;line-height:30px;"><span style="font-family:'Microsoft YaHei';"><span style="line-height:30px;">在Block的{}体内，是不可以对外面的变量进行更改的,使用__<span style="line-height:30px;">block就能改变block块中变量的值</span></span><br />
</span></span></span></p>
<h2 style="margin:0px;padding:0px;font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"><span style="line-height:24px;"><span style="font-size:16px;line-height:30px;"><span style="line-height:30px;"><span style="font-family:'Microsoft YaHei';"><span style="line-height:30px;"><span style="color:#ff0000;">4:__block和__weak</span></span><span style="line-height:30px;"><span style="line-height:28.8px;"><strong><span style="color:#ff0000;">有什么区别？</span></strong></span></span></span></span></span></span></h2>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"></p>
<li style="font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"><span style="font-family:'Microsoft YaHei';"><code>__block</code>不管是ARC还是MRC模式下都可以使用，可以修饰对象，还可以修饰基本数据类型。</span></li>
<li style="font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"><span style="font-family:'Microsoft YaHei';"><code>__weak</code>只能在ARC模式下使用，也只能修饰对象（NSString），不能修饰基本数据类型（int）。</span></li>
<li style="font-family:Arial;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;widows:1;"><span style="font-family:'Microsoft YaHei';"><code>__block</code>对象可以在block中被重新赋值，<code>__weak</code>不可以。</span></li></body></html>