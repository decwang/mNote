<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2016-11-01T06:58:03Z"/><meta name="updated" content="2016-11-01T06:58:06Z"/><title>iOS7 UITabBar自定义选中图片显示为默认蓝色的Bug  博客分类： iOS         今天在UITabBarController使用自定义图片设置UITabItem时，发现一个问题：</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="blog_title" style="margin-bottom:15px;font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:12px;"><h3 style="font-size:16px;line-height:1.5em;margin:0px 0px 0.5em;padding:10px 0px 0px;"><a href="http://thierry-xing.iteye.com/blog/2171602" style="color:#108ac6;">iOS7 UITabBar自定义选中图片显示为默认蓝色的Bug</a></h3>
<ul class="blog_categories" style="margin:0px;padding:0px;list-style-type:none;"><strong>博客分类：</strong>&nbsp;<li style="margin:0px 5px 0px 0px;padding:0px;list-style-type:none;display:inline;"><a href="http://thierry-xing.iteye.com/category/258812" style="color:#108ac6;">iOS</a></li>
</ul>
<div class="news_tag" style="clear:both;margin:10px 0px 5px;line-height:20px;">&nbsp;</div>
</div>
<div id="blog_content" class="blog_content" style="line-height:1.8em;font-family:Helvetica, Tahoma, Arial, sans-serif;"><div class="iteye-blog-content-contain"><p style="margin-top:0px;margin-bottom:0px;padding:0px;">今天在UITabBarController使用自定义图片设置UITabItem时，发现一个问题：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">在iOS7以上的手机中，第一个Tab的选中图一直显示的是系统默认的蓝色图，查看了一下UITabItem的头文件，发现下面的内容：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">&nbsp;</p>
<div class="dp-highlighter" id="" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:12px;background-color:transparent;width:679px;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div class="bar"><div class="tools" style="padding:3px;margin:0px;font-weight:bold;">C代码&nbsp;<embed wmode="transparent" src="http://thierry-xing.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%2F*%20The%20unselected%20image%20is%20autogenerated%20from%20the%20image%20argument.%20The%20selected%20image%0A%20is%20autogenerated%20from%20the%20selectedImage%20if%20provided%20and%20the%20image%20argument%20otherwise.%0A%20To%20prevent%20system%20coloring%2C%20provide%20images%20with%20UIImageRenderingModeAlwaysOriginal%20(see%20UIImage.h)%0A%20*%2F%0A-%20(instancetype)initWithTitle%3A(NSString%20*)title%20image%3A(UIImage%20*)image%20tag%3A(NSInteger)tag%3B%0A-%20(instancetype)initWithTitle%3A(NSString%20*)title%20image%3A(UIImage%20*)image%20selectedImage%3A(UIImage%20*)selectedImage%20NS_AVAILABLE_IOS(7_0)%3B%0A-%20(instancetype)initWithTabBarSystemItem%3A(UITabBarSystemItem)systemItem%20tag%3A(NSInteger)tag%3B" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />&nbsp;<a title="收藏这段代码" style="color:#108ac6;text-decoration:underline;"><img class="star" src="http://thierry-xing.iteye.com/images/icon_star.png" alt="收藏代码" style="border:0px;" /></a></div>
</div>
<ol start="1" class="dp-cpp" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid #d1d7dc;list-style-position:initial;list-style-image:initial;color:#2b91af;"><li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;"><span class="comment" style="color:#008200;padding:0px;margin:0px;width:auto;border:0px;">/*&nbsp;The&nbsp;unselected&nbsp;image&nbsp;is&nbsp;autogenerated&nbsp;from&nbsp;the&nbsp;image&nbsp;argument.&nbsp;The&nbsp;selected&nbsp;image</span>&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;"><span class="comment" style="color:#008200;padding:0px;margin:0px;width:auto;border:0px;">&nbsp;is&nbsp;autogenerated&nbsp;from&nbsp;the&nbsp;selectedImage&nbsp;if&nbsp;provided&nbsp;and&nbsp;the&nbsp;image&nbsp;argument&nbsp;otherwise.</span>&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;"><span class="comment" style="color:#008200;padding:0px;margin:0px;width:auto;border:0px;">&nbsp;To&nbsp;prevent&nbsp;system&nbsp;coloring,&nbsp;provide&nbsp;images&nbsp;with&nbsp;UIImageRenderingModeAlwaysOriginal&nbsp;(see&nbsp;UIImage.h)</span>&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;"><span class="comment" style="color:#008200;padding:0px;margin:0px;width:auto;border:0px;">&nbsp;*/</span>&nbsp;&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;">-&nbsp;(instancetype)initWithTitle:(NSString&nbsp;*)title&nbsp;image:(UIImage&nbsp;*)image&nbsp;tag:(NSInteger)tag;&nbsp;&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;">-&nbsp;(instancetype)initWithTitle:(NSString&nbsp;*)title&nbsp;image:(UIImage&nbsp;*)image&nbsp;selectedImage:(UIImage&nbsp;*)selectedImage&nbsp;NS_AVAILABLE_IOS(7_0);&nbsp;&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;">-&nbsp;(instancetype)initWithTabBarSystemItem:(UITabBarSystemItem)systemItem&nbsp;tag:(NSInteger)tag;&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">意思是，如果不希望使用系统颜色，需要对图片加上属性UIImageRenderingModeAlwaysOriginal</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">所以按此方式实验，代码如下：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">&nbsp;</p>
<div class="dp-highlighter" id="" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:12px;background-color:transparent;width:679px;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div class="bar"><div class="tools" style="padding:3px;margin:0px;font-weight:bold;">C代码&nbsp;<embed wmode="transparent" src="http://thierry-xing.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=UIImage%20*musicImage%20%3D%20%5BUIImage%20imageNamed%3A%40%22music.png%22%5D%3B%0AUIImage%20*musicImageSel%20%3D%20%5BUIImage%20imageNamed%3A%40%22musicSel.png%22%5D%3B%0A%0AmusicImage%20%3D%20%5BmusicImage%20imageWithRenderingMode%3AUIImageRenderingModeAlwaysOriginal%5D%3B%0AmusicImageSel%20%3D%20%5BmusicImageSel%20imageWithRenderingMode%3AUIImageRenderingModeAlwaysOriginal%5D%3B%0A%0Aself.musicViewController.tabBarItem%20%3D%20%5B%5BUITabBarItem%20alloc%5D%20initWithTitle%3A%40%22Music%22%20image%3AmusicImage%20selectedImage%3AmusicImageSel%5D%3B" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />&nbsp;<a title="收藏这段代码" style="color:#108ac6;text-decoration:underline;"><img class="star" src="http://thierry-xing.iteye.com/images/icon_star.png" alt="收藏代码" style="border:0px;" /></a></div>
</div>
<ol start="1" class="dp-cpp" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid #d1d7dc;list-style-position:initial;list-style-image:initial;color:#2b91af;"><li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;">UIImage&nbsp;*musicImage&nbsp;=&nbsp;[UIImage&nbsp;imageNamed:@<span class="string" style="color:blue;">"music.png"</span>];&nbsp;&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;">UIImage&nbsp;*musicImageSel&nbsp;=&nbsp;[UIImage&nbsp;imageNamed:@<span class="string" style="color:blue;">"musicSel.png"</span>];&nbsp;&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;">&nbsp;&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;">musicImage&nbsp;=&nbsp;[musicImage&nbsp;imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];&nbsp;&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;">musicImageSel&nbsp;=&nbsp;[musicImageSel&nbsp;imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];&nbsp;&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;">&nbsp;&nbsp;</span></li>
<li style="font-size:1em;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;"><span style="color:black;">self.musicViewController.tabBarItem&nbsp;=&nbsp;[[UITabBarItem&nbsp;alloc]&nbsp;initWithTitle:@<span class="string" style="color:blue;">"Music"</span>&nbsp;image:musicImage&nbsp;selectedImage:musicImageSel];&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">&nbsp;</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">问题解决</p>
</div>
</div></body></html>