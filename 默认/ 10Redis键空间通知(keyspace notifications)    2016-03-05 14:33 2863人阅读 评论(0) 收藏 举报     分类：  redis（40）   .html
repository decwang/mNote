<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2017-07-20T02:04:00Z"/><meta name="updated" content="2017-07-20T02:04:03Z"/><title> 10Redis键空间通知(keyspace notifications)    2016-03-05 14:33 2863人阅读 评论(0) 收藏 举报     分类：  redis（40）   </title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="article_title" style="margin:5px 0px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:20px;line-height:30px;font-family:'Microsoft YaHei';orphans:2;widows:2;">&nbsp;<h1 style="margin:0px;padding:0px;display:inline;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-weight:normal;font-stretch:normal;font-size:20px;line-height:30px;vertical-align:middle;"><span class="link_title"><a href="http://blog.csdn.net/gqtcgq/article/details/50808729" style="color:#333333;text-decoration:none;">10Redis键空间通知(keyspace notifications)</a></span></h1>
</div>
<div class="article_manage clearfix" style="padding:0px 20px 5px;color:#999999;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:12px;line-height:22px;font-family:Arial;text-align:right;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#ededed;margin:0px -20px;overflow:hidden;orphans:2;widows:2;"><div class="article_r"><span class="link_postdate" style="margin:0px 5px 0px 0px;">2016-03-05 14:33</span>&nbsp;<span class="link_view" title="阅读次数" style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(&quot;../../../images/ico_view.png&quot;) left center no-repeat;">2863人阅读</span>&nbsp;<span class="link_comments" title="评论次数" style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(&quot;../../../images/ico_comm.png&quot;) left center no-repeat;"><a href="http://blog.csdn.net/gqtcgq/article/details/50808729#comments" style="color:#ff9900;text-decoration:none;">评论</a>(0)</span>&nbsp;<span class="link_collect tracking-ad" data-mod="popu_171" style="margin:0px 5px;"><a title="收藏" target="_blank" style="color:#ff9900;">收藏</a></span>&nbsp;<span class="link_report" style="margin:0px 5px;"><a href="http://blog.csdn.net/gqtcgq/article/details/50808729#report" title="举报" style="color:#ff9900;text-decoration:none;">举报</a></span></div>
</div>
<div class="category clearfix" style="border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#ededed;margin:0px -20px;padding:5px 20px;font-family:Arial, Console, Verdana, 'Courier New';font-size:12px;font-variant-ligatures:normal;orphans:2;widows:2;"><div class="category_l" style="font-size:14px;float:left;display:inline-block;color:#333333;width:70px;line-height:28px;"><img src="http://static.blog.csdn.net/images/category_icon.jpg" style="border:none;vertical-align:middle;" />&nbsp;<span style="vertical-align:middle;display:inline-block;">分类：</span></div>
<div class="category_r" style="font-size:14px;float:left;display:inline-block;color:#df3434;width:851.391px;"><label style="display:inline-block;margin-left:15px;cursor:pointer;line-height:28px;position:relative;">redis（40）&nbsp;<img class="arrow-down" src="http://static.blog.csdn.net/images/arrow_triangle%20_down.jpg" style="border:none;display:inline;" /></label></div>
</div>
<div class="bog_copyright" style="padding:20px 0px;font-family:Arial, Console, Verdana, 'Courier New';font-size:12px;font-variant-ligatures:normal;orphans:2;widows:2;"><p class="copyright_p" style="margin-top:0px;margin-bottom:0px;padding:0px 0px 0px 10px;height:14px;line-height:14px;border-left-width:3px;border-left-style:solid;border-left-color:#e41c1e;color:#666666;font-size:14px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
</div>
<div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post" style="margin:20px 0px 0px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;line-height:26px;font-family:Arial;orphans:2;widows:2;"><p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Redis的键空间通知(keyspace notifications)功能是自2.8.0版本开始加入的，<span style="color:#333333;">客户端可以通过订阅</span><span style="color:#333333;">/</span><span style="color:#333333;">发布</span>(Pub/Sub)<span style="color:#333333;">机制，接收那些以某种方式改变了</span><span style="color:#333333;">Redis</span><span style="color:#333333;">数据空间的事件通知</span>。比如：所有改变给定key的命令；所有经过lpush操作的key；所有在0号数据库中过期的key等等。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 通知是通过Redis的订阅/发布机制发送的，因此，所有支持订阅/发布功能的客户端都可在无需调整的情况下，使用键空间通知功能。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Redis的发布/订阅目前是即发即弃(fire and forget)模式的，因此无法实现事件的可靠通知。也就是说，如果发布/订阅的客户端断链之后又重连，则在客户端断链期间的所有事件都丢失了。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;未来计划支持事件的可靠通知，但是<span style="color:#333333;">这可能会通过让订阅与发布功能本身变得更可靠来实现，也可能会在</span><span style="color:#333333;">Lua</span><span style="color:#333333;">脚本中对消息的订阅与发布进行监听，从而实现类似将事件推入到列表这样的操作。</span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="color:#333333;"><span style="font-size:18px;">&nbsp;</span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong><span style="color:#333333;"><span style="font-size:18px;">一：事件的类型</span></span></strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#333333;">针对改变</span><span style="color:#333333;">Redis</span><span style="color:#333333;">数据空间的每个操作，键空间通知都会发送两类不同的事件。</span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#333333;">比如在</span><span style="color:#333333;">0</span><span style="color:#333333;">号数库中，执行</span><span style="color:#333333;">del mykey</span><span style="color:#333333;">操作，将会触发两个消息，等价于执行下面两个</span><span style="color:#333333;">publish</span><span style="color:#333333;">命令：</span></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:750px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_1" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_1" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=1&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">PUBLISH&nbsp;__keyspace@0__:mykey&nbsp;del&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">PUBLISH&nbsp;__keyevent@0__:del&nbsp;mykey&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一个频道发布0号数据库中，所有针对mykey键执行的操作，这类事件，以keyspace为前缀，称为keyspace通知；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;另一个频道发布0号数据库中，所有成功执行del操作的键，这类事件，以keyevent为前缀，称为keyevent通知；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;在上面的例子中，当执行del &nbsp;mykey时，会发生：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;a：keyspace频道的订阅者会收到消息，消息中包含键执行的操作的名字；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;b：keyevent频道的订阅者会收到消息，消息中包含执行某种操作的键的名字；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以通过配置，使Redis仅发送某一类我们感兴趣的通知。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong><span style="font-size:18px;">二：配置</span></strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;因键空间通知功能需要耗费一定的CPU时间，因此默认情况下，该功能是关闭的。可以通过修改配置文件redis.conf，或者通过CONFIG SET命令，设置notify-keyspace-events选项，来启用或关闭该功能。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 该选项的值为空字符串时，该功能禁用，选项值为非空字符串时，启用该功能，非空字符串由特定的多个字符组成，每个字符表示不同的意义：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;K：keyspace事件，事件以__keyspace@&lt;db&gt;__为前缀进行发布；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;E：keyevent事件，事件以__keyevent@&lt;db&gt;__为前缀进行发布；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g：一般性的，非特定类型的命令，比如del，expire，rename等；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$：字符串特定命令；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;l：列表特定命令；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;s：集合特定命令；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;h：哈希特定命令；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;z：有序集合特定命令；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;x：过期事件，当某个键过期并删除时会产生该事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e：驱逐事件，当某个键因maxmemore策略而被删除时，产生该事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A：g$lshzxe的别名，因此”AKE”意味着所有事件。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 注意，该选项的值中至少需要包含K或者E，否则不会发布任何事件。比如，如果需要开启针对列表的keyspace事件通知，则该选项需要配置为“Kl”；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong><span style="font-size:18px;">三：不同命令产生的事件通知</span></strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DEL&nbsp;命令为每个被删除的键产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RENAME&nbsp;产生两个事件：为源键产生一个&nbsp;rename_from&nbsp;事件，并为目标键产生一个&nbsp;rename_to&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;EXPIRE命令，在设置键的过期时间时产生一个&nbsp;expire事件；当键因过期而被删除时，产生一个&nbsp;expired事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SORT命令，在带有&nbsp;STORE&nbsp;参数时产生一个&nbsp;sortstore事件。如果&nbsp;STORE&nbsp;指示的用于保存排序结果的键已经存在，则原键会被删除，因此还会产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SET&nbsp;以及它的所有变种(SETEX、SETNX和GETSET)都产生set事件。另外，SETEX命令还会产生expire&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MSET&nbsp;命令，为每个键产生一个&nbsp;set&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SETRANGE&nbsp;产生一个&nbsp;setrange&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INCR&nbsp;、DECR、INCRBY和DECRBY都产生&nbsp;incrby&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INCRBYFLOAT产生incrbyfloat事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;APPEND产生append事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LPUSH和LPUSHX都产生单个&nbsp;lpush&nbsp;事件，即使有多个输入元素时，也是如此；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RPUSH&nbsp;和&nbsp;RPUSHX&nbsp;都产生单个rpush事件，即使有多个输入元素时，也是如此；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RPOP&nbsp;产生&nbsp;rpop&nbsp;事件，如果被弹出的元素是列表的最后一个元素，那么还会产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LPOP&nbsp;产生&nbsp;lpop&nbsp;事件，如果被弹出的元素是列表的最后一个元素，那么还会产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LINSERT&nbsp;产生一个&nbsp;linsert&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LSET&nbsp;产生一个&nbsp;lset&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LREM产生一个lrem事件，如果该命令执行之后，列表键被清空，则还会产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LTRIM&nbsp;产生一个ltrim事件，如果该命令执行之后，列表键被清空，则还会产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RPOPLPUSH&nbsp;和&nbsp;BRPOPLPUSH&nbsp;产生一个&nbsp;rpop&nbsp;事件，以及一个&nbsp;lpush&nbsp;事件。两个命令都保证rpop事件在&nbsp;lpush&nbsp;事件之前发出。如果弹出元素之后，列表键被清空，则还会产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HSET&nbsp;、&nbsp;HSETNX&nbsp;和&nbsp;HMSET&nbsp;都只产生一个&nbsp;hset&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HINCRBY&nbsp;产生一个&nbsp;hincrby&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HINCRBYFLOAT&nbsp;产生一个&nbsp;hincrbyfloat&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HDEL&nbsp;产生一个&nbsp;hdel&nbsp;通知。如果执行该命令之后，哈希键被清空，则还会产生一个del事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SADD&nbsp;产生一个&nbsp;sadd&nbsp;事件，即使有多个输入元素时，也是如此；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SREM&nbsp;产生一个&nbsp;srem&nbsp;事件，如果执行该命令之后，集合键被清空，则还会产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SMOVE&nbsp;为源键产生一个&nbsp;srem&nbsp;事件，并为目标键产生一个sadd&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SPOP&nbsp;产生一个&nbsp;spop&nbsp;事件。如果执行该命令之后，集合键被清空，则还会产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SINTERSTORE、SUNIONSTORE和SDIFFSTORE分别产生&nbsp;sinterstore、sunionostore和sdiffstore&nbsp;三种事件。如果用于保存结果的键已经存在，则还会产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ZINCR产生一个&nbsp;zincr&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ZADD&nbsp;产生一个&nbsp;zadd事件，即使有多个输入元素时，也是如此；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ZREM&nbsp;产生一个&nbsp;zrem&nbsp;通知，即使有多个输入元素时，也是如此。如果执行&nbsp;ZREM&nbsp;之后，有序集合键被清空，则还会产生一个&nbsp;del&nbsp;事件；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ZREMEBYSCORE&nbsp;产生一个&nbsp;zrembyscore事件，如果用于保存结果的键已经存在，则还会产生一个&nbsp;del&nbsp;事件。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ZREMBYRANK&nbsp;产生一个&nbsp;zrembyrank事件，如果用于保存结果的键已经存在，则还会产生一个&nbsp;del&nbsp;事件。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ZINTERSTORE&nbsp;和&nbsp;ZUNIONSTORE&nbsp;分别产生&nbsp;zinterstore&nbsp;和&nbsp;zunionstore&nbsp;两种事件。如果用于保存结果的键已经存在，那么还会产生一个&nbsp;del&nbsp;事件。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;每当一个键因为过期而被删除时，产生一个&nbsp;expired&nbsp;事件。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;每当一个键因为&nbsp;maxmemory策略而被删除并回收内存时，产生一个&nbsp;evicted&nbsp;事件。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;注意：所有命令都只在键真的被改动了之后，才会产生事件通知。比如，当srem命令试图删除不存在于集合的元素时，删除操作执行失败，因为没有真正的改动键，所以这一操作不会发送通知。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong><span style="font-size:18px;">四：expired事件通知的发送时间</span></strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Redis 使用以下两种方式删除过期的键：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;a：当一个键被访问时，程序会对这个键进行检查，如果键已过期，则删除该键；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;b：系统会在后台定期扫描并删除那些过期的键；</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;当过期键被以上两种方式中的任意一种发现并且删除时，才会产生expired事件通知。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Redis不保证生存时间（TTL）变为&nbsp;0&nbsp;的键会立即被删除：如果没有命令访问这个键，或者设置生存时间的键非常多的话，那么在键的生存时间变为0，到该键真正被删除，这中间可能会有一段比较显著的时间间隔。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;因此，Redis产生expired事件通知的时间，是过期键被删除的时候，而不是键的生存时间变为&nbsp;0&nbsp;的时候。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong><span style="font-size:18px;">五：实践</span></strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1：Redis发布所有通知，客户端A订阅所有消息：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:3065px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_2" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_2" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=2&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;config&nbsp;set&nbsp;notify-keyspace-events&nbsp;KEA&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">OK&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;psubscribe&nbsp;__key*@0__:*&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Reading&nbsp;messages...&nbsp;(press&nbsp;Ctrl-C&nbsp;to&nbsp;quit)&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1)&nbsp;"psubscribe"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;(integer)&nbsp;1&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 然后，在客户端B上执行set和del命令：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:3286px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_3" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_3" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=3&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;set&nbsp;msg&nbsp;"hello"&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">OK&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;del&nbsp;msg&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">(integer)&nbsp;1&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;del&nbsp;msg&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">(integer)&nbsp;0&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 然后客户端A的打印如下：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:3489px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_4" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_4" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=4&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">1)&nbsp;"pmessage"&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;"__keyspace@0__:msg"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">4)&nbsp;"set"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1)&nbsp;"pmessage"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;"__keyevent@0__:set"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">4)&nbsp;"msg"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1)&nbsp;"pmessage"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;"__keyspace@0__:msg"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">4)&nbsp;"del"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1)&nbsp;"pmessage"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;"__keyevent@0__:del"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">4)&nbsp;"msg"&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可见，针对每一个操作，客户端A都收到了两种消息，分别是keyspace和keyevent消息。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong><span style="font-size:18px;">&nbsp;</span></strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2：使Redis仅发布keyspace通知，而客户端A订阅所有消息类型：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:3942px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_5" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_5" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=5&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;config&nbsp;set&nbsp;notify-keyspace-events&nbsp;KA&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">OK&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;psubscribe&nbsp;__key*@0__:*&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Reading&nbsp;messages...&nbsp;(press&nbsp;Ctrl-C&nbsp;to&nbsp;quit)&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1)&nbsp;"psubscribe"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;(integer)&nbsp;1&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在客户端B上执行，与上面同样的步骤。此时，客户端A上的打印：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:4163px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_6" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_6" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=6&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">1)&nbsp;"pmessage"&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;"__keyspace@0__:msg"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">4)&nbsp;"set"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1)&nbsp;"pmessage"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;"__keyspace@0__:msg"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">4)&nbsp;"del"&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可见，尽管客户端A订阅了所有消息，但是Redis仅发布了keyspace事件。而且，在客户端B上执行了两次del操作，而只有第一个del成功执行了，从而产生了一个事件。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3：Redis发布所有通知，客户端A仅订阅keyspace消息：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:4498px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_7" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_7" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=7&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;config&nbsp;set&nbsp;notify-keyspace-events&nbsp;KEA&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">OK&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;psubscribe&nbsp;__keyspace@0__:*&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Reading&nbsp;messages...&nbsp;(press&nbsp;Ctrl-C&nbsp;to&nbsp;quit)&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1)&nbsp;"psubscribe"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__keyspace@0__:*"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;(integer)&nbsp;1&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;在客户端B上，执行与上面同样的步骤。然后客户端A的打印如下：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:4719px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_8" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_8" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=8&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">1)&nbsp;"pmessage"&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__keyspace@0__:*"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;"__keyspace@0__:msg"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">4)&nbsp;"set"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1)&nbsp;"pmessage"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__keyspace@0__:*"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;"__keyspace@0__:msg"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">4)&nbsp;"del"&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可见，针对每一个操作，客户端A只收到了keyspace消息。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4：Redis仅发布字符串特定类型的通知，客户端A订阅所有类型的消息：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:5028px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_9" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_9" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=9&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;config&nbsp;set&nbsp;notify-keyspace-events&nbsp;KE$&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">OK&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;&nbsp;psubscribe&nbsp;__key*@0__:*&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">Reading&nbsp;messages...&nbsp;(press&nbsp;Ctrl-C&nbsp;to&nbsp;quit)&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1)&nbsp;"psubscribe"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;(integer)&nbsp;1&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;在客户端B上，分别执行lpush，set和del命令：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:5249px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_10" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_10" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=10&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;lpush&nbsp;alist&nbsp;1&nbsp;2&nbsp;3&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">(integer)&nbsp;3&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;set&nbsp;msg&nbsp;"hello"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">OK&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">127.0.0.1:6379&gt;&nbsp;del&nbsp;msg&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">(integer)&nbsp;1&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;此时，客户端A上的打印：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_plain" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:936.531px;overflow-x:auto;overflow-y:hidden;padding-top:1px;position:relative;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[plain]</b>&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="ViewSource" title="view plain" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="CopyToClipboard" title="copy" target="_blank" style="color:#a0a0a0;text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:701px;top:5452px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_11" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_11" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=11&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">1)&nbsp;"pmessage"&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;"__keyspace@0__:msg"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">4)&nbsp;"set"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">1)&nbsp;"pmessage"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">2)&nbsp;"__key*@0__:*"&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">3)&nbsp;"__keyevent@0__:set"&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">4)&nbsp;"msg"&nbsp;&nbsp;</span></li>
</ol>
</div>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;可见，针对字符串，产生了keyspace和keyevent类型的消息，而针对列表的lpush命令并没有产生消息，而且，del命令是非特定类型的命令，也没有产生消息。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">参考：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;http://www.phperz.com/article/15/0904/153987.html</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;http://redis.io/topics/notifications</span></p>
</div>
<div class="bdsharebuttonbox tracking-ad bdshare-button-style0-16" data-mod="popu_172" data-bd-bind="1500515949799" style="zoom:1;font-family:Arial, Console, Verdana, 'Courier New';font-size:12px;font-variant-ligatures:normal;orphans:2;widows:2;float:right;"><a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="bds_more" data-cmd="more" target="_blank" style="color:#333333;text-decoration:none;float:left;padding-left:17px;line-height:16px;height:16px;cursor:pointer;margin:6px 6px 6px 0px;background-image:url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png) !important;background-position:0px 0px !important;background-repeat:no-repeat no-repeat;"></a><a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间" target="_blank" style="color:#ff9900;text-decoration:none;float:left;padding-left:17px;line-height:16px;height:16px;background-image:url(file:///Applications/mNote.app/Contents/img/share/icons_0_16.png?v=91362611.png);cursor:pointer;margin:6px 6px 6px 0px;background-position:0px -52px !important;background-repeat:no-repeat no-repeat;"></a><a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博" target="_blank" style="color:#ff9900;text-decoration:none;float:left;padding-left:17px;line-height:16px;height:16px;background-image:url(file:///Applications/mNote.app/Contents/img/share/icons_0_16.png?v=91362611.png);cursor:pointer;margin:6px 6px 6px 0px;background-position:0px -104px !important;background-repeat:no-repeat no-repeat;"></a><a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博" target="_blank" style="color:#ff9900;text-decoration:none;float:left;padding-left:17px;line-height:16px;height:16px;background-image:url(file:///Applications/mNote.app/Contents/img/share/icons_0_16.png?v=91362611.png);cursor:pointer;margin:6px 6px 6px 0px;background-position:0px -260px !important;background-repeat:no-repeat no-repeat;"></a><a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="bds_renren" data-cmd="renren" title="分享到人人网" target="_blank" style="color:#ff9900;text-decoration:none;float:left;padding-left:17px;line-height:16px;height:16px;background-image:url(file:///Applications/mNote.app/Contents/img/share/icons_0_16.png?v=91362611.png);cursor:pointer;margin:6px 6px 6px 0px;background-position:0px -208px !important;background-repeat:no-repeat no-repeat;"></a><a href="http://blog.csdn.net/gqtcgq/article/details/50808729#" class="bds_weixin" data-cmd="weixin" title="分享到微信" target="_blank" style="color:#ff9900;text-decoration:none;float:left;padding-left:17px;line-height:16px;height:16px;background-image:url(file:///Applications/mNote.app/Contents/img/share/icons_0_16.png?v=91362611.png);cursor:pointer;margin:6px 6px 6px 0px;background-position:0px -1612px !important;background-repeat:no-repeat no-repeat;"></a></div>
<div id="digg" articleid="50808729" style="clear:both;width:182px;margin:0px auto;padding:30px 0px 15px;text-align:center;font-family:Arial, Console, Verdana, 'Courier New';font-size:12px;font-variant-ligatures:normal;orphans:2;widows:2;"><dl id="btnDigg" class="digg digg_disable" style="display:inline-block;float:left;width:72px;height:72px;overflow:hidden;margin:0px 2px;background-color:#ff7900;color:#ffffff;cursor:pointer;background-position:initial initial;background-repeat:initial initial;"></dl></div></body></html>