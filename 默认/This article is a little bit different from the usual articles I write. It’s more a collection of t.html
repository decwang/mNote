<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2016-10-11T04:09:02Z"/><meta name="updated" content="2016-10-11T04:09:04Z"/><title>This article is a little bit different from the usual articles I write. It’s more a collection of t</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><p style="box-sizing:border-box;margin-top:0px;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">This article is a little bit different from the usual articles I write. It’s more a collection of thoughts and patterns than a guide. Almost all the patterns I will describe are found out the hard way: by making mistakes. By no means do I consider myself an authority on subclassing, but I did want to share a few things I’ve learned. Don’t read this as a definitive guide, but rather as a collection of examples.</p>
<p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">When asked about OOP (object-oriented programming), Alan Kay (the inventor) wrote that it’s not about classes, but rather about messaging.<sup id="fnref1" style="box-sizing:border-box;margin:0px;padding:0px 0px 0px 0.2em;border:0px;font-family:inherit;font-size:0.69444em;font-style:inherit;font-variant-caps:inherit;line-height:inherit;"><a href="https://www.objc.io/issues/13-architecture/subclassing/#fn1" rel="footnote" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;color:#0088cc;text-decoration:none;">1</a></sup>&nbsp;Still, a lot of people focus on creating class hierarchies. In this article, we’ll look at some cases where it’s useful, but we’ll mostly pay attention to alternatives to creating complicated class hierarchies. In our experience, this leads to code that’s simpler and easier to maintain. A lot of things have been written on this topic, which you can find in books like&nbsp;<a href="http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;color:#8647b3;text-decoration:none;">Clean Code</a>&nbsp;and&nbsp;<a href="http://www.amazon.com/Code-Complete-Practical-Handbook-Construction/dp/0735619670" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;color:#8647b3;text-decoration:none;">Code Complete</a>, both of which are recommended reading.</p>
<h2 id="when-to-subclass" style="box-sizing:border-box;margin:0px;padding:2.0736em 0px 0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:1.728em;line-height:1.2;vertical-align:baseline;max-width:21.99074em;color:#262626;">When to Subclass</h2>
<p style="box-sizing:border-box;margin-top:1em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">First, let’s talk about some cases where it makes sense to create subclasses. If you’re building a&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">UITableViewCell</code>&nbsp;with custom layout, create a subclass. The same holds for almost every view; once you start doing layout, it makes sense to move this into a subclass, so that you not only have your code nicely bundled up, but also have a reusable object that you can share across projects.</p>
<p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">Suppose you’re targeting multiple platforms and versions from your code, and you need to somehow write custom bits for every platform and version. It might then make sense to create an&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">OBJDevice</code>&nbsp;class, which has subclasses like&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">OBJIPhoneDevice</code>&nbsp;and&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">OBJIPadDevice</code>, and maybe even deeper subclasses like&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">OBJIPhone5Device</code>, which override specific methods. For example, your&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">OBJDevice</code>&nbsp;could contain a method&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">applyRoundedCornersToView:withRadius:</code>. It has a default implementation, but can be overridden by specific subclasses.</p>
<p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">Another case where subclassing might be very helpful is in model objects. Most of the time, my model objects inherit from a class that implements&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">isEqual:</code>,&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">hash</code>,&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">copyWithZone:</code>, and&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">description</code>. These methods are implemented once by iterating over the properties, making it a lot harder to make mistakes. (If you’re looking for a base class like this, you can consider using&nbsp;<a href="https://github.com/mantle/mantle" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;color:#8647b3;text-decoration:none;">Mantle</a>, which does exactly this, and more.)</p>
<h2 id="when-not-to-subclass" style="box-sizing:border-box;margin:0px;padding:2.0736em 0px 0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:1.728em;line-height:1.2;vertical-align:baseline;max-width:21.99074em;color:#262626;">When Not to Subclass</h2>
<p style="box-sizing:border-box;margin-top:1em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">In a lot of projects that I’ve worked on, I’ve seen deep hierarchies of subclasses. I am guilty of doing this as well. Unless the hierarchies are very shallow, you very quickly tend to hit limits.<sup id="fnref2" style="box-sizing:border-box;margin:0px;padding:0px 0px 0px 0.2em;border:0px;font-family:inherit;font-size:0.69444em;font-style:inherit;font-variant-caps:inherit;line-height:inherit;"><a href="https://www.objc.io/issues/13-architecture/subclassing/#fn2" rel="footnote" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;color:#0088cc;text-decoration:none;">2</a></sup></p>
<p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">Luckily, if you find yourself in a deep hierarchy like that, there are lot of alternatives. In the sections below, we’ll go into each in more detail. If your subclasses merely share the same interface, protocols can be a very good alternative. If you know an object needs to be modified a lot, you might want to use delegates to dynamically change and configure it. When you want to extend an existing object with some simple functionality, categories might be an option. When you have a set of subclasses that each override the same methods, you might instead use configuration objects. And finally, when you want to reuse some functionality, it might be better to compose multiple objects instead of extending them.</p>
<h2 id="alternatives" style="box-sizing:border-box;margin:0px;padding:2.0736em 0px 0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:1.728em;line-height:1.2;vertical-align:baseline;max-width:21.99074em;color:#262626;">Alternatives</h2>
<h3 id="alternative-protocols" style="box-sizing:border-box;margin:0px;padding:2.0736em 0px 0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:1.44em;line-height:1.2;vertical-align:baseline;max-width:26.38889em;color:#262626;">Alternative: Protocols</h3>
<p style="box-sizing:border-box;margin-top:1em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">Often, a reason to use subclassing is when you want to make sure that an object responds to certain messages. Consider an app where you have a player object, that can play videos. Now, if you want to add YouTube support, you want the same interface, but a different implementation. One way you can achieve this with subclassing is like this:</p>
<pre style="box-sizing:border-box;margin:1.17647em -1.17647em;padding:1.17647em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.85em;line-height:1.25;vertical-align:baseline;max-width:100%;position:relative;display:inline-block;color:#1a1a1a;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;background-color:#f7f7f7;min-width:47.05882em;"><button class="js-select-code" style="-webkit-font-smoothing:antialiased;font-family:AkkuratTT, sans-serif;font-size:0.7em;text-transform:uppercase;font-weight:bold;letter-spacing:0.1em;line-height:1;-webkit-appearance:none;background-image:none;padding:0px;margin:0px;border:none;color:#0092db;position:absolute;top:1.68067em;right:1.68067em;cursor:pointer;">SELECT ALL</button><code class="objc" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;display:block;overflow-x:auto;overflow-y:hidden;">@interface Player : NSObject

- (void)play;
- (void)pause;

@end


@interface YouTubePlayer : Player

@end</code></pre><p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">Most likely, the two classes don’t share a lot of code, just the same interface. When that’s the case, it might be a good solution to use protocols instead. Using protocols, you would write the code like this:</p>
<pre style="box-sizing:border-box;margin:1.17647em -1.17647em;padding:1.17647em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.85em;line-height:1.25;vertical-align:baseline;max-width:100%;position:relative;display:inline-block;color:#1a1a1a;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;background-color:#f7f7f7;min-width:47.05882em;"><button class="js-select-code" style="-webkit-font-smoothing:antialiased;font-family:AkkuratTT, sans-serif;font-size:0.7em;text-transform:uppercase;font-weight:bold;letter-spacing:0.1em;line-height:1;-webkit-appearance:none;background-image:none;padding:0px;margin:0px;border:none;color:#0092db;position:absolute;top:1.68067em;right:1.68067em;cursor:pointer;">SELECT ALL</button><code class="objc" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;display:block;overflow-x:auto;overflow-y:hidden;">@protocol VideoPlayer &lt;NSObject&gt;

- (void)play;
- (void)pause;

@end


@interface Player : NSObject &lt;VideoPlayer&gt;

@end


@interface YouTubePlayer : NSObject &lt;VideoPlayer&gt;

@end</code></pre><p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">This way, the&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">YouTubePlayer</code>&nbsp;doesn’t need to know about the&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">Player</code>&nbsp;internals.</p>
<h3 id="alternative-delegation" style="box-sizing:border-box;margin:0px;padding:2.0736em 0px 0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:1.44em;line-height:1.2;vertical-align:baseline;max-width:26.38889em;color:#262626;">Alternative: Delegation</h3>
<p style="box-sizing:border-box;margin-top:1em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">Again, suppose you have a&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">Player</code>&nbsp;class like in the example above. Now, at one place, you might want to perform a custom action on play. Doing this is relatively easy: you can create a custom subclass, override the&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">play</code>&nbsp;method, call&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">[super play]</code>, and then do your custom work. This is one way to deal with it. Another way is to change your&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">Player</code>&nbsp;object and give it a delegate. For example:</p>
<pre style="box-sizing:border-box;margin:1.17647em -1.17647em;padding:1.17647em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.85em;line-height:1.25;vertical-align:baseline;max-width:100%;position:relative;display:inline-block;color:#1a1a1a;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;background-color:#f7f7f7;min-width:47.05882em;"><button class="js-select-code" style="-webkit-font-smoothing:antialiased;font-family:AkkuratTT, sans-serif;font-size:0.7em;text-transform:uppercase;font-weight:bold;letter-spacing:0.1em;line-height:1;-webkit-appearance:none;background-image:none;padding:0px;margin:0px;border:none;color:#0092db;position:absolute;top:1.68067em;right:1.68067em;cursor:pointer;">SELECT ALL</button><code class="objc" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;display:block;overflow-x:auto;overflow-y:hidden;">@class Player;

@protocol PlayerDelegate

- (void)playerDidStartPlaying:(Player *)player;

@end


@interface Player : NSObject

@property (nonatomic,weak) id&lt;PlayerDelegate&gt; delegate;

- (void)play;
- (void)pause;

@end</code></pre><p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">Now, in the player’s&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">play</code>&nbsp;method, the delegate gets sent the&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">playerDidStartPlaying:</code>&nbsp;message. Any consumers of this class can now just implement the delegate protocol instead of having to subclass, and the&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">Player</code>object can stay very generic. This is a very powerful technique, which Apple uses abundantly in its own frameworks. Think of classes like&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">UITextField</code>, but also&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">NSLayoutManager</code>. Sometimes you want to group different methods together in separate protocols, such as&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">UITableView</code>&nbsp;– which has not only a delegate but also a data source – does.</p>
<h3 id="alternative-categories" style="box-sizing:border-box;margin:0px;padding:2.0736em 0px 0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:1.44em;line-height:1.2;vertical-align:baseline;max-width:26.38889em;color:#262626;">Alternative: Categories</h3>
<p style="box-sizing:border-box;margin-top:1em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">Sometimes, you might want to extend an object with a little bit of extra functionality. Suppose you want to extend&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">NSArray</code>&nbsp;by adding a method&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">arrayByRemovingFirstObject</code>. Instead of subclassing, you can put this into a category. It works like this:</p>
<pre style="box-sizing:border-box;margin:1.17647em -1.17647em;padding:1.17647em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.85em;line-height:1.25;vertical-align:baseline;max-width:100%;position:relative;display:inline-block;color:#1a1a1a;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;background-color:#f7f7f7;min-width:47.05882em;"><button class="js-select-code" style="-webkit-font-smoothing:antialiased;font-family:AkkuratTT, sans-serif;font-size:0.7em;text-transform:uppercase;font-weight:bold;letter-spacing:0.1em;line-height:1;-webkit-appearance:none;background-image:none;padding:0px;margin:0px;border:none;color:#0092db;position:absolute;top:1.68067em;right:1.68067em;cursor:pointer;">SELECT ALL</button><code class="objc" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;display:block;overflow-x:auto;overflow-y:hidden;">@interface NSArray (OBJExtras)

- (void)obj_arrayByRemovingFirstObject;

@end</code></pre><p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">When using categories and extending a class that’s not your own, it’s good practice to prefix your methods. If you don’t, there is a chance that somebody else might implement the same method using the same technique. Then, if the behavior doesn’t match, unexpected things could happen.</p>
<p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">One of the dangers of using categories is that you might end up with a large amount of categories, and you can lose your overview. In that case, it’s probably easier to create custom classes.</p>
<h3 id="alternative-configuration-objects" style="box-sizing:border-box;margin:0px;padding:2.0736em 0px 0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:1.44em;line-height:1.2;vertical-align:baseline;max-width:26.38889em;color:#262626;">Alternative: Configuration Objects</h3>
<p style="box-sizing:border-box;margin-top:1em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">One of the mistakes I keep on making (but can now recognize fairly quickly), is having a class with some abstract functionality, and then a lot of subclasses that override one specific method. For example, in a presentation app, you might have a class&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">Theme</code>, which has a couple of properties, such as&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">backgroundColor</code>&nbsp;and&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">font</code>, and some logic for laying things out on a slide.</p>
<p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">Then, for each theme, you create a subclass of&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">Theme</code>, override a method (e.g.&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">setup</code>), and configure the properties. Using the superclass directly wouldn’t make sense. In this case, you can make your code a bit simpler by using configuration objects. You can keep the shared logic in the&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">Theme</code>&nbsp;class (e.g. slide layout), but move the configuration into simpler objects that only have properties.</p>
<p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">For example, a&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">ThemeConfiguration</code>&nbsp;class would have the&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">backgroundColor</code>and&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">font</code>&nbsp;properties, and the&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">Theme</code>&nbsp;class gets a value of this class in the initializer.</p>
<h3 id="alternative-composition" style="box-sizing:border-box;margin:0px;padding:2.0736em 0px 0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:1.44em;line-height:1.2;vertical-align:baseline;max-width:26.38889em;color:#262626;">Alternative: Composition</h3>
<p style="box-sizing:border-box;margin-top:1em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">The most powerful alternative to subclassing is composition. If you want to reuse existing code but you’re not sharing the same interface, composition can be your weapon of choice. For example, suppose you are designing a caching class:</p>
<pre style="box-sizing:border-box;margin:1.17647em -1.17647em;padding:1.17647em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.85em;line-height:1.25;vertical-align:baseline;max-width:100%;position:relative;display:inline-block;color:#1a1a1a;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;background-color:#f7f7f7;min-width:47.05882em;"><button class="js-select-code" style="-webkit-font-smoothing:antialiased;font-family:AkkuratTT, sans-serif;font-size:0.7em;text-transform:uppercase;font-weight:bold;letter-spacing:0.1em;line-height:1;-webkit-appearance:none;background-image:none;padding:0px;margin:0px;border:none;color:#0092db;position:absolute;top:1.68067em;right:1.68067em;cursor:pointer;">SELECT ALL</button><code class="objc" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;display:block;overflow-x:auto;overflow-y:hidden;">@interface OBJCache : NSObject

- (void)cacheValue:(id)value forKey:(NSString *)key;
- (void)removeCachedValueForKey:(NSString *)key;

@end</code></pre><p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">One easy way to do this is by subclassing&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">NSDictionary</code>&nbsp;and implementing the two methods by calling to dictionary methods:&nbsp;</p>
<pre style="box-sizing:border-box;margin:1.17647em -1.17647em;padding:1.17647em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.85em;line-height:1.25;vertical-align:baseline;max-width:100%;position:relative;display:inline-block;color:#1a1a1a;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;background-color:#f7f7f7;min-width:47.05882em;"><button class="js-select-code" style="-webkit-font-smoothing:antialiased;font-family:AkkuratTT, sans-serif;font-size:0.7em;text-transform:uppercase;font-weight:bold;letter-spacing:0.1em;line-height:1;-webkit-appearance:none;background-image:none;padding:0px;margin:0px;border:none;color:#0092db;position:absolute;top:1.68067em;right:1.68067em;cursor:pointer;">SELECT ALL</button><code class="objc" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;display:block;overflow-x:auto;overflow-y:hidden;">@interface OBJCache : NSDictionary</code></pre><p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">However, there are a couple of drawbacks. The fact that it is implemented with a dictionary should be an implementation detail. Now, everywhere where you expect an&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">NSDictionary</code>&nbsp;parameter, you could provide an&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">OBJCache</code>&nbsp;value. If you would ever want to switch to something completely different (e.g. your own library), you might need to refactor a lot of code.</p>
<p style="box-sizing:border-box;margin-top:1.25em;margin-bottom:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:1.5;vertical-align:baseline;max-width:38em;color:#262626;">A better approach is to store this dictionary in a private property (or instance variable), and only expose the two&nbsp;<code style="box-sizing:border-box;margin:0px;padding:0.1em 0.25em;border:0px;font-family:AkkuratMono, Consolas, Monaco, monospace;font-size:0.9em;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;max-width:100%;background-color:#f2f2f2;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:#222222;word-wrap:break-word;">cache</code>&nbsp;methods. Now, you maintain the flexibility to change the implementation as you gain more insight, and consumers of your class don’t need to be refactored.</p>
<div class="footnotes" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:AkkuratTT, sans-serif;font-size:20px;line-height:inherit;vertical-align:baseline;max-width:38em;color:#262626;"><hr style="box-sizing:border-box;border-style:solid none none;border-top-color:#e6e6e6;margin:2em 0px 0px;" />
<ol style="box-sizing:border-box;margin:1.45em 0px;padding:0px 0px 0px 1.4em;border:0px;font-family:inherit;font-size:0.83333em;font-style:inherit;font-variant-caps:inherit;line-height:1.45;vertical-align:baseline;list-style:none;max-width:none;color:#4d4d4d;"><li id="fn1" style="box-sizing:border-box;margin:0px;padding:1em 0px 0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;list-style:decimal;"><p style="box-sizing:border-box;margin-top:0px;margin-bottom:0px;padding:0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:1.4;vertical-align:baseline;max-width:none;color:#666666;">http://c2.com/cgi/wiki?AlanKayOnMessaging&nbsp;<a href="https://www.objc.io/issues/13-architecture/subclassing/#fnref1" rev="footnote" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;color:#0088cc;text-decoration:none;">↩</a></p>
</li>
<li id="fn2" style="box-sizing:border-box;margin:0px;padding:1em 0px 0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;list-style:decimal;"><p style="box-sizing:border-box;margin-top:0px;margin-bottom:0px;padding:0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:1.4;vertical-align:baseline;max-width:none;color:#666666;">http://c2.com/cgi/wiki?LimitsOfHierarchies&nbsp;<a href="https://www.objc.io/issues/13-architecture/subclassing/#fnref2" rev="footnote" style="box-sizing:border-box;margin:0px;padding:0px;border:0px;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-caps:inherit;line-height:inherit;vertical-align:baseline;color:#0088cc;text-decoration:none;">↩</a></p>
</li>
</ol>
</div></body></html>