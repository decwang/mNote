<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2017-03-15T12:35:49Z"/><meta name="updated" content="2017-03-15T12:35:54Z"/><title>全部直播王佳乐@Joy的直播                 从 iOS 角度出发，剖析移动端性能监控的技术原理  王佳乐@Joy    报名中    直播时间  2017年3月26日周日晚上8点0</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="list-nav" style="margin:0px;padding:0px;height:55px;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;position:relative;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;"><div class="intro-title" style="margin:0px;padding:0px;"><a href="http://m.quzhiboapp.com/?liveId=406&amp;t=1489541326755&amp;fromUserId=94#" class="all-btn" style="margin:0px;padding:0px;text-decoration:none;color:#828282;cursor:pointer;position:absolute;left:10px;font-size:14px;top:50%;transform:translateY(-50%);">全部直播</a><span href="#" class="title" style="margin:0px;padding:0px;color:#828282;font-size:18px;font-weight:700;">王佳乐@Joy的直播</span></div>
<div class="right-drop" style="margin:0px;padding:0px;width:100px;height:55px;position:absolute;right:0px;"><div class="dropdown" style="margin:0px;padding:0px;position:relative;width:100px;height:55px;"><div class="dropdown-mask" style="margin:0px;padding:0px;width:100px;height:55px;background-color:transparent;background-position:initial initial;background-repeat:initial initial;"><div class="dropdown-anchor" slot="showText" style="margin:0px;padding:0px;"><img class="default-avatar" src="http://mres.quzhiboapp.com/b899861dadfb4e166e761e2fd7f5d97d.png" style="margin:0px;padding:0px;position:absolute;width:35px;height:35px;right:15px;top:50%;transform:translateY(-50%);" /></div>
</div>
</div>
</div>
</div>
<div class="cover-section" style="margin:10px 0px 0px;padding:0px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;"><img class="cover-img" alt="cover" src="http://i.quzhiboapp.com/ry9RHY" style="margin:0px;padding:0px;width:700px;" /></div>
<div class="header-section card-group" style="margin:10px 0px 0px;padding:10px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:80px;height:80px;"><img src="http://i.quzhiboapp.com/dSUiKU" alt="王佳乐@Joy" title="王佳乐@Joy" style="margin:0px;padding:0px;position:relative;display:inline-block;width:80px;height:80px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
&nbsp;<div class="header-right" style="margin:0px 0px 0px 5px;padding:0px;width:476px;vertical-align:top;display:inline-block;"><div class="subject" style="margin:5px 0px 0px;padding:0px;font-size:18px;font-weight:700;overflow:hidden;line-height:30px;max-height:60px;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;">从 iOS 角度出发，剖析移动端性能监控的技术原理</div>
<div class="ownername" style="margin:5px 0px 0px;padding:0px;display:inline-block;">王佳乐@Joy</div>
</div>
<div class="time-section" style="margin:0px;padding:0px;border-top-width:1px;border-top-style:dashed;border-top-color:#e7e7e7;"><div class="right-corner" style="margin:10px 0px 0px;padding:0px;float:right;color:#828282;"><div class="status" style="margin:0px;padding:0px 3px;border:1px solid #828282;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;font-size:14px;">报名中</div>
</div>
<div class="time-label" style="margin:10px 0px 0px;padding:0px;color:#828282;">直播时间</div>
<div class="plan-time" style="margin:5px 0px 0px;padding:0px;">2017年3月26日周日晚上8点00分&nbsp;(11天后)</div>
</div>
</div>
<div class="attend-summary-section card-group" style="margin:10px 0px 0px;padding:10px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;"><div class="attend-info" style="margin:5px 0px;padding:0px;"><ul class="attended-users" style="margin:0px;padding:0px;list-style-type:none;display:inline-block;"><li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/CGtYEW" alt="李雀雀" title="李雀雀" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/oM1edB" alt="风TZw" title="风TZw" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/8n6k1w" alt="琛" title="琛" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/7zk9Ek" alt="侧帽饮水" title="侧帽饮水" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/zDKhof" alt="Calvixっ . 坚 ۶" title="Calvixっ . 坚 ۶" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/ce0u6v" alt="徐嘉轶" title="徐嘉轶" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/itSYtd" alt="谭真" title="谭真" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
</ul>
<div class="attend-summary" style="margin:0px;padding:0px;float:right;color:#828282;line-height:32px;font-size:14px;">162人已参与 &gt;&nbsp;</div>
</div>
</div>
<div class="invite-summary-section card-group" style="margin:10px 0px 0px;padding:10px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;"><div class="attend-info" style="margin:5px 0px;padding:0px;"><ul class="attended-users" style="margin:0px;padding:0px;list-style-type:none;display:inline-block;"><li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/M0k2mH" alt="李智维" title="李智维" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/cdXrdm" alt="丽丽" title="丽丽" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/hPxzD5" alt="Fred" title="Fred" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/OMGwBw" alt="五子棋" title="五子棋" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/KQ2Ezj" alt="梁杰" title="梁杰" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
<li class="avatar-cell" style="margin:0px 2px;padding:0px;display:inline-block;"><div class="avatar" style="margin:0px;padding:0px;display:inline-block;width:25px;height:25px;"><img src="http://i.quzhiboapp.com/y3Fg1B" alt="一缕殇流化隐半边冰霜" title="一缕殇流化隐半边冰霜" style="margin:0px;padding:0px;position:relative;display:inline-block;width:25px;height:25px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
</li>
</ul>
<div class="attend-summary invite" style="margin:0px;padding:0px;float:right;color:#00bdef;line-height:32px;font-size:14px;">邀请榜&gt;&nbsp;</div>
</div>
</div>
<div class="speaker-section card-group" style="margin:10px 0px 0px;padding:10px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;"><div class="title-label" style="margin:10px 0px;padding:0px;color:#828282;">主播简介&nbsp;</div>
<div class="markdown-comp" style="margin:0px;padding:0px;"><div class="markdown-body" style="margin:0px;padding:10px 20px;color:#707070;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;word-wrap:break-word;line-height:28px !important;"><p style="margin-bottom:16px;padding:0px;box-sizing:border-box;margin-top:0px !important;">Hi，我是Joy，两年 iOS 开发经验，SwiftGG 翻译组成员，伯乐在线和公众号 iOS 大全运营者，曾实习于爱奇艺移动架构组，目前就职于网易北京，负责无埋点数据收集、性能监控、数据分析等工作，对 iOS 逆向、性能优化有较高兴趣。</p>
<p style="margin-top:0px;padding:0px;box-sizing:border-box;margin-bottom:0px !important;">博客：<a href="http://www.jianshu.com/u/9c51a213b02e" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">http://www.jianshu.com/u/9c51a213b02e</a>&nbsp;微博：<a href="http://weibo.com/5419850564/profile?topnav=1&amp;wvr=6" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">http://weibo.com/5419850564/profile?topnav=1&amp;wvr=6</a></p>
</div>
</div>
</div>
<div class="detail-section card-group" style="margin:10px 0px 0px;padding:10px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;"><div class="title-label" style="margin:10px 0px;padding:0px;color:#828282;">直播详情&nbsp;</div>
<div class="markdown-comp" style="margin:0px;padding:0px;"><div class="markdown-body" style="margin:0px;padding:10px 20px;color:#707070;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;word-wrap:break-word;line-height:28px !important;"><p style="margin-bottom:16px;padding:0px;box-sizing:border-box;margin-top:0px !important;">以前就经常看趣直播的分享质量很高，这次呢，主要是自己的一个尝试，希望可以多走出去和大家分享讨论，第一次在大众平台分享，希望大家多多包涵</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">由于我司的 APM 也处于起步阶段，这里主要对技术原理进行分享讨论，对于很多后期数据方面的问题、技术上细节问题可能暂时缺少相关实践。此次分享主要面对中初级开发者，对 Runtime 有一定了解，有 iOS 开发实践即可。</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">您目前可以参考的资料有：</p>
<ol style="margin:0px 0px 16px;padding:0px 0px 0px 2em;box-sizing:border-box;"><li style="margin:0px;padding:0px;box-sizing:border-box;"><a href="http://www.jianshu.com/p/8123fc17fe0e" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">http://www.jianshu.com/p/8123fc17fe0e</a></li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;"><a href="http://www.jianshu.com/p/69ce01e15042" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">http://www.jianshu.com/p/69ce01e15042</a></li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;"><a href="https://github.com/joy0304/Joy-Blog/blob/master/iOSCollection.md" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">https://github.com/joy0304/Joy-Blog/blob/master/iOSCollection.md</a></li>
</ol>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">讨论内容如下：</p>
<ol style="margin:0px 0px 16px;padding:0px 0px 0px 2em;box-sizing:border-box;"><li style="margin:0px;padding:0px;box-sizing:border-box;">移动端 APM 概况</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">App 稳定性监控如何来做：崩溃、卡顿、Abort（低内存崩溃、watchdog）</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">网络监控（响应时间、TCP握手、SSL握手、DNS解析时间、流量、成功率）的技术实现原理：NSURLProtocol、Runtime、Fishhook等</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">交互监控（页面加载时间、页面交互痕迹）的实现原理</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">iOS 操作系统内存分配问题，以及那些指标是我们关注的</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">想到了再来补充</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">Q &amp; A</li>
</ol>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">附录之前写的一篇文章：</p>
<h1 id="-" style="margin:24px 0px 16px;padding:0px 0px 0.3em;box-sizing:border-box;line-height:1.25;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#eeeeee;">移动端监控体系之技术原理剖析</h1>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">在这样一个注重用户体验的时代，<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">APM</code>&nbsp;技术快速发展，国内更是百花齐放，最近对各个公司的&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">APM</code>&nbsp;产品有一个调研，并在此基础上进行了自己的实践。这里就从 iOS 的角度出发，谈谈自己对移动端 APM 的技术上的理解，并提供相对应的实例。</p>
<h2 id="-apm" style="margin:24px 0px 16px;padding:0px 0px 0.3em;box-sizing:border-box;line-height:1.25;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#eeeeee;">何为 APM</h2>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;"><code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">APM</code>&nbsp;的全称是<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Application performance management</code>，即应用性能管理，通过对应用的可靠性、稳定性等方面的监控，进而达到可以快速修复问题、提高用户体验的目的。</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">国内各大公司都有自己的一套监控体系，这个系统可能是自己研发，也可能是第三方提供，当然对于这个数据为王的时代，很多有实力的公司倾向于自主研发，掌握核心数据。比较有代表性的 APM 产品有：听云、阿里百川、腾讯 bugly、NewRelic、OneAPM、网易云捕等</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">说到监控，那么指标是我们所关注的呢？如下所示</p>
<ul style="margin:0px 0px 16px;padding:0px 0px 0px 2em;list-style-type:none;box-sizing:border-box;"><li style="margin:0px;padding:0px;box-sizing:border-box;">网络请求：成功率、状态码、流量、网络响应时间、HTTP与HTTPS的 DNS 解析、TCP握手、SSL握手（HTTP除外）、首包时间等时间</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">界面卡顿、卡顿堆栈</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">崩溃率、崩溃堆栈</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">Abort 率：也就是由于内存过高的等原因，被系统杀死的情况</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">交互监控：页面加载时间、页面的交互痕迹</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">维度信息：地域、运营商、网络接入方式、操作系统、应用版本等</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">其他：内存、帧率、CPU使用率、启动时间、电量等</li>
</ul>
<h2 id="-" style="margin:24px 0px 16px;padding:0px 0px 0.3em;box-sizing:border-box;line-height:1.25;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#eeeeee;">聊聊原理</h2>
<h3 id="-" style="margin:24px 0px 16px;padding:0px;box-sizing:border-box;font-size:1.25em;line-height:1.25;">卡顿检测</h3>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">当应用发生卡顿的时候，一般会伴随着掉帧，所以帧率是最容易想到的指标来判断卡顿。对于线下的测试环境，我们可以使用帧率来对开发做一些提示，告诉他们可能发生了卡顿。但是帧率不稳定性较高，所以一般会采取另一种方式来做卡顿检测。那就是Runloop，对于细节可以查看&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Runloop</code>&nbsp;源码，会发现对于事件的处理主要就是在<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">kCFRunLoopBeforeSources</code>和<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">kCFRunLoopBeforeWaiting</code>状态之间,还有<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">kCFRunLoopAfterWaiting</code>之后。那我们就可以对两个状态进行监控，如果消耗时间太久，就代表着卡顿的发生。</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;"><img src="http://i.quzhiboapp.com/rtWkKb" alt="joy1.jpg" style="margin:0px;padding:0px;box-sizing:content-box;border-style:none;" /></p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">上图摘自阿里百川，如图所示，我们会对卡顿次数做一个判断，如果次数为1，但时间超时，则为单次耗时较长的卡顿，如果次数到达阀值，则证明是连续短时间卡顿。</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">当卡顿发生之后，我们为了定位，会收集当时的一个堆栈情况，在此你可以使用&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">PLCrashReporter</code>&nbsp;来做，也可以自己研发一个堆栈收集库（可<a href="http://www.jianshu.com/p/7e4c7b94ca36" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">参考这里来做</a>）</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">对于实例，网上已经有很多开源的项目，你可以<a href="https://github.com/suifengqjn/PerformanceMonitor" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">参考这个</a></p>
<h3 id="-" style="margin:24px 0px 16px;padding:0px;box-sizing:border-box;font-size:1.25em;line-height:1.25;">崩溃检测</h3>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">对于崩溃的情况，一般是由&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Mach</code>异常或&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Objective-C</code>&nbsp;异常（NSException）引起的。我们可以针对这两种情况抓取对应的&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Crash</code>&nbsp;事件。</p>
<h4 id="mach-" style="margin:24px 0px 16px;padding:0px;box-sizing:border-box;font-size:1em;line-height:1.25;">Mach 异常捕获</h4>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">如果想要做<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">mach</code>&nbsp;异常捕获，需要注册一个异常端口，这个异常端口会对当前任务的所有线程有效，如果想要针对单个线程，可以通过&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">thread_set_exception_ports</code>注册自己的异常端口，发生异常时，首先会将异常抛给线程的异常端口，然后尝试抛给任务的异常端口，当我们捕获异常时，就可以做一些自己的工作，比如，当前堆栈收集等。</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">对于如何注册一个异常端口，这里有示意图和&nbsp;<a href="https://github.com/plausiblelabs/plcrashreporter" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">PLCrashReporter</a>&nbsp;可以参考</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;"><img src="http://i.quzhiboapp.com/AeLZEa" alt="joy2.jpg" style="margin:0px;padding:0px;box-sizing:content-box;border-style:none;" /></p>
<h3 id="unix-" style="margin:24px 0px 16px;padding:0px;box-sizing:border-box;font-size:1.25em;line-height:1.25;">Unix 信号捕获</h3>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">对于Mach 异常，操作系统会将其转换为对应的 Unix信号，所以如果你对<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Mach</code>不熟悉的话，也可以通过注册<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">signalHandler</code>的方式来做信号异常。对于实例，你可以<a href="https://github.com/xcysuccess/iOSCrashUncaught" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">参考这里</a></p>
<pre style="margin-top:0px;margin-bottom:16px;padding:16px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;line-height:1.45;word-wrap:normal;overflow:auto;background-color:#f7f7f7;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;"><code style="margin:0px;padding:0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;background-color:transparent;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;border:0px;display:inline;overflow:visible;line-height:inherit;word-wrap:normal;">signal(<span class="hljs-name" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">SIGHUP</span>, signalHandler)<span class="hljs-comment" style="margin:0px;padding:0px;box-sizing:border-box;color:#93a1a1;">;</span> signal(<span class="hljs-name" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">SIGINT</span>, signalHandler)<span class="hljs-comment" style="margin:0px;padding:0px;box-sizing:border-box;color:#93a1a1;">;</span> signal(<span class="hljs-name" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">SIGQUIT</span>, signalHandler)<span class="hljs-comment" style="margin:0px;padding:0px;box-sizing:border-box;color:#93a1a1;">;</span> signal(<span class="hljs-name" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">SIGABRT</span>, signalHandler)<span class="hljs-comment" style="margin:0px;padding:0px;box-sizing:border-box;color:#93a1a1;">;</span> signal(<span class="hljs-name" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">SIGILL</span>, signalHandler)<span class="hljs-comment" style="margin:0px;padding:0px;box-sizing:border-box;color:#93a1a1;">;</span> signal(<span class="hljs-name" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">SIGSEGV</span>, signalHandler)<span class="hljs-comment" style="margin:0px;padding:0px;box-sizing:border-box;color:#93a1a1;">;</span> signal(<span class="hljs-name" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">SIGFPE</span>, signalHandler)<span class="hljs-comment" style="margin:0px;padding:0px;box-sizing:border-box;color:#93a1a1;">;</span> signal(<span class="hljs-name" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">SIGBUS</span>, signalHandler)<span class="hljs-comment" style="margin:0px;padding:0px;box-sizing:border-box;color:#93a1a1;">;</span> signal(<span class="hljs-name" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">SIGPIPE</span>, signalHandler)<span class="hljs-comment" style="margin:0px;padding:0px;box-sizing:border-box;color:#93a1a1;">;</span> </code></pre><h3 id="nsexception-" style="margin:24px 0px 16px;padding:0px;box-sizing:border-box;font-size:1.25em;line-height:1.25;">NSException 捕获</h3>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">对于<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">NSException</code>异常，也比较容易处理，通过注册<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">NSUncaughtExceptionHandler</code>捕获异常信息即可，将拿到的<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">NSException</code>细节写入<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Crash</code>日志，上传到后台做数据分析</p>
<pre style="margin-top:0px;margin-bottom:16px;padding:16px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;line-height:1.45;word-wrap:normal;overflow:auto;background-color:#f7f7f7;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;"><code style="margin:0px;padding:0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;background-color:transparent;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;border:0px;display:inline;overflow:visible;line-height:inherit;word-wrap:normal;">    <span class="hljs-comment" style="margin:0px;padding:0px;box-sizing:border-box;color:#93a1a1;">// register the uncaught exception handler</span>   NSSetUncaughtExceptionHandler(&amp;<span class="hljs-keyword" style="margin:0px;padding:0px;box-sizing:border-box;color:#859900;">handler</span>);</code></pre><h3 id="abort-" style="margin:24px 0px 16px;padding:0px;box-sizing:border-box;font-size:1.25em;line-height:1.25;">Abort 率检测</h3>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">目前对于内存过高被杀死的情况是没有办法直接统计的，一般通过排除法来做百分比的统计，原理如下</p>
<ul style="margin:0px 0px 16px;padding:0px 0px 0px 2em;list-style-type:none;box-sizing:border-box;"><li style="margin:0px;padding:0px;box-sizing:border-box;">程序启动，设置标志位</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">程序正常退出，清楚标志</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">程序<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Crash</code>，清楚标志</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">程序电量过低导致关机，这个也没办法直接监控，可以加入电量检测来辅助判断</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">第二次启动，标志位如果存在，则代表<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Abort</code>一次，上传后台做统计</li>
</ul>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;"><img src="http://i.quzhiboapp.com/dgFmeH" alt="second.jpg" style="margin:0px;padding:0px;box-sizing:content-box;border-style:none;" /></p>
<h3 id="-" style="margin:24px 0px 16px;padding:0px;box-sizing:border-box;font-size:1.25em;line-height:1.25;">交互监控</h3>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">对于页面的加载时间，这个比较容易实现，直接通过<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Runtime hook</code>对应的生命周期方法即可，比如&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">viewDidLoad</code>、<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">viewWillAppear</code>等</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">对于用户的交互痕迹，比如点击了那个按钮、跳转到了那个页面，这些信息偏于用户行为的收集，我们也独立研发了一个无埋点的SDK，专门来做用户行为数据的收集与分析，核心也是基于&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">hook AOP</code>的思想。细节可以<a href="http://www.jianshu.com/p/69ce01e15042" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">参考我同事的作品</a></p>
<h3 id="-" style="margin:24px 0px 16px;padding:0px;box-sizing:border-box;font-size:1.25em;line-height:1.25;">网络监控</h3>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">对于成功率、状态码、流量，以及网络的响应时间之类的，我们可以主要可以通过两种方式来做</p>
<ul style="margin:0px 0px 16px;padding:0px 0px 0px 2em;list-style-type:none;box-sizing:border-box;"><li style="margin:0px;padding:0px;box-sizing:border-box;">针对<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">URLConnection</code>、<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">CFNetwork</code>、<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">NSURLSession</code>三种网络做<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Hook</code>，<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">hook</code>的具体技术可以是<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">method swizzle</code>&nbsp;也可以是<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Proxy</code>、<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Fishhook</code>之类的</li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;">也可以使用&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">NSURLProtocol</code>&nbsp;对网络请求的拦截，进而得到流量、响应时间等信息，但是<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">NSURLProtocol</code>有自己的局限，比如<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">NSURLProtocol</code>只能拦截<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">NSURLSession</code>，<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">NSURLConnection</code>以及<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">UIWebView</code>，但是对于<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">CFNetwork</code>则无能为力</li>
</ul>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">对于第一种方式可以<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Hook</code>哪些方法的，可以参考这个图</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;"><img src="http://i.quzhiboapp.com/9Mf4iw" alt="hook.jpg" style="margin:0px;padding:0px;box-sizing:content-box;border-style:none;" /></p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">对于 HTTP与HTTPS 的 DNS 解析、TCP握手、SSL握手(HTTP除外)、首包时间等时间的统计，稍有难度</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;"><img src="http://i.quzhiboapp.com/4DPbLB" alt="852671-91939d53b0f3957b.jpg" style="margin:0px;padding:0px;box-sizing:content-box;border-style:none;" /></p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">但是，因为我们所使用的<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">URLConnection</code>、<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">CFNetwork</code>、<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">NSURLSession</code>底层都是&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">BSDSocket</code>，所以可以尝试在<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">socket</code>上动手脚来实现效果，类似于通过<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">ViewController</code>的生命周期方法来统计页面加载时间的做法，我们<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Hook socket</code>相关的方法来做，比如通过<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">hook</code>&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">socket</code>连接时的&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">connect</code>方法，拿到<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">tcp</code>握手的起始时间，通过<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">hook</code>&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">SSLHandshake</code>方法，在<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">SSLHandshake</code>执行的时候拿到&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">SSL</code>握手的起始时间等。目前听云已经提供了&nbsp;<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">HTTP</code>&nbsp;的分段时间查询功能，大家去体验下</p>
<pre style="margin-top:0px;margin-bottom:16px;padding:16px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;line-height:1.45;word-wrap:normal;overflow:auto;background-color:#f7f7f7;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;"><code style="margin:0px;padding:0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;background-color:transparent;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;border:0px;display:inline;overflow:visible;line-height:inherit;word-wrap:normal;"><span class="hljs-function" style="margin:0px;padding:0px;box-sizing:border-box;"><span class="hljs-keyword" style="margin:0px;padding:0px;box-sizing:border-box;color:#859900;">int</span>    <span class="hljs-title" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">connect</span><span class="hljs-params" style="margin:0px;padding:0px;box-sizing:border-box;">(<span class="hljs-keyword" style="margin:0px;padding:0px;box-sizing:border-box;color:#859900;">int</span>, <span class="hljs-keyword" style="margin:0px;padding:0px;box-sizing:border-box;color:#859900;">const</span> <span class="hljs-keyword" style="margin:0px;padding:0px;box-sizing:border-box;color:#859900;">struct</span> sockaddr *, <span class="hljs-keyword" style="margin:0px;padding:0px;box-sizing:border-box;color:#859900;">socklen_t</span>)</span> __<span class="hljs-title" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">DARWIN_ALIAS_C</span><span class="hljs-params" style="margin:0px;padding:0px;box-sizing:border-box;">(connect)</span></span>;<span class="hljs-function" style="margin:0px;padding:0px;box-sizing:border-box;">OSStatus <span class="hljs-title" style="margin:0px;padding:0px;box-sizing:border-box;color:#268bd2;">SSLHandshake</span><span class="hljs-params" style="margin:0px;padding:0px;box-sizing:border-box;">(SSLContextRef ctx)</span> </span> </code></pre><p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">但是对于 iOS 9 Apple 加入 ATS 新特性，并要求开发者使用 HTTPS，我在 iOS9、10上对 HTTPS 网络请求<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">Hook socket</code>方法时候，有一些方法<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">hook</code>&nbsp;失效，猜想应该是Apple 进行了加固、加密，导致一些系统方法没办法<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">hook</code>，所以在 iOS9、10 上无法通过<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">socket</code>来取得<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">HTTPS</code>网络的分段时间</p>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">不过<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">apple</code>在 iOS 10 推出一个<code style="margin:0px;padding:0.2em 0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;background-color:rgba(0, 0, 0, 0.0392157);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;">API</code>，可以在 iOS10 版本以上进行网络信息的收集</p>
<pre style="margin-top:0px;margin-bottom:16px;padding:16px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;line-height:1.45;word-wrap:normal;overflow:auto;background-color:#f7f7f7;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;"><code style="margin:0px;padding:0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;background-color:transparent;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;border:0px;display:inline;overflow:visible;line-height:inherit;word-wrap:normal;">- <span class="hljs-params" style="margin:0px;padding:0px;box-sizing:border-box;">(void)</span>URLSession:<span class="hljs-params" style="margin:0px;padding:0px;box-sizing:border-box;">(NSURLSession *)</span>session task:<span class="hljs-params" style="margin:0px;padding:0px;box-sizing:border-box;">(NSURLSessionTask *)</span>task didFinishCollectingMetrics:<span class="hljs-params" style="margin:0px;padding:0px;box-sizing:border-box;">(NSURLSessionTaskMetrics *)</span>metrics </code></pre><p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">打印结果如下</p>
<pre style="margin-top:0px;margin-bottom:16px;padding:16px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.600000381469727px;line-height:1.45;word-wrap:normal;overflow:auto;background-color:#f7f7f7;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;"><code style="margin:0px;padding:0px;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;background-color:transparent;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;border:0px;display:inline;overflow:visible;line-height:inherit;word-wrap:normal;">(Fetch Start) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:06 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> (Domain Lookup Start) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:06 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> (Domain Lookup End) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:06 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> (Connect Start) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:14 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> (Secure Connection Start) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:14 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> (Secure Connection End) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:16 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> (Connect End) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:16 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> (Request Start) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:16 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> (Request End) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:16 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> (Response Start) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:16 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> (Response End) 2017<span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-02</span><span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">-24</span> 09:03:16 <span class="hljs-string" style="margin:0px;padding:0px;box-sizing:border-box;color:#2aa198;">+0000</span> </code></pre><p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">当然，对于网络各层次的时间获取，如果你有好的方案，希望您可以留言告知。同时对于一些维度信息和内存等基础指标，很容易获取，这里就不细谈了</p>
<h2 id="-" style="margin:24px 0px 16px;padding:0px 0px 0.3em;box-sizing:border-box;line-height:1.25;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#eeeeee;">大礼包</h2>
<p style="margin-top:0px;margin-bottom:16px;padding:0px;box-sizing:border-box;">在调研和学习APM技术的过程中，发现了很多优秀的博客，所以在此推荐给大家，有需要的可以自取</p>
<ul style="margin-top:0px;margin-right:0px;margin-bottom:0px !important;margin-left:0px;padding:0px 0px 0px 2em;list-style-type:none;box-sizing:border-box;"><li style="margin:0px;padding:0px;box-sizing:border-box;"><a href="http://www.infoq.com/cn/presentations/mobile-terminal-full-link-tracking-and-security-system" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">蘑菇街移动端全链路跟踪保障体系</a></li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;"><a href="http://mp.weixin.qq.com/s/MwgjpHj_5RaG74Z0JjNv5g" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">美团外卖移动端性能监测体系实现</a></li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;"><a href="https://wereadteam.github.io/2016/12/12/Monitor/" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">微信读书 iOS 质量保证及性能监控</a></li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;"><a href="http://www.infoq.com/cn/articles/netease-ios-sdk-neteaseapm-technology-share" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">网易NeteaseAPM iOS SDK技术实现分享</a></li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;"><a href="http://www.imooc.com/article/14205?block_id=tuijian_wz" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">阿里百川码力APP监控来了 重量级选手进入APM市场</a></li>
<li style="margin:0.25em 0px 0px;padding:0px;box-sizing:border-box;"><a href="https://github.com/joy0304/Joy-Blog/blob/master/iOS%20Collection.md" style="margin:0px;padding:0px;text-decoration:none;color:#4078c0;cursor:pointer;box-sizing:border-box;background-color:transparent;-webkit-text-decoration-skip:objects;">APM最佳实践系列文章专题合辑</a></li>
</ul>
</div>
</div>
</div>
<div class="copyright-section card-group" style="margin:10px 0px 0px;padding:10px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;"><div class="title-label" style="margin:10px 0px;padding:0px;color:#828282;">观众须知&nbsp;</div>
<div class="markdown-comp" style="margin:0px;padding:0px;"><div class="markdown-body" style="margin:0px;padding:10px 20px;color:#707070;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;word-wrap:break-word;line-height:28px !important;"><p style="padding:0px;box-sizing:border-box;margin-top:0px !important;margin-bottom:0px !important;">直播中产生的视频内容版权归主播所有，未经主播许可，任何人不得以任何形式复制、转载和使用主播视频内容。</p>
</div>
</div>
</div>
<div class="lives-section card-group" style="margin:10px 0px 50px;padding:10px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;"><div class="title-label" style="margin:10px 0px;padding:0px;color:#828282;">更多直播&nbsp;</div>
<div class="live-list" style="margin:0px;padding:0px;"><ul class="live-list-ul" style="margin:0px;padding:0px;list-style-type:none;border-top-width:1px;border-top-style:solid;border-top-color:#eeeeee;"><li class="live-item-li" style="margin:0px;padding:0px;"><div class="live-item" style="margin:0px;padding:10px;height:80px;position:relative;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#eeeeee;"><div class="avatar" style="margin:15px 0px 0px;padding:0px;display:inline-block;width:50px;height:50px;"><img src="http://i.quzhiboapp.com/dSUiKU" alt="王佳乐@Joy" title="王佳乐@Joy" style="margin:0px;padding:0px;position:relative;display:inline-block;width:50px;height:50px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
<div class="live-info" style="margin:0px;padding:0px;display:inline-block;position:absolute;top:10px;bottom:10px;left:70px;right:24px;height:80px;"><p class="subject" style="margin-top:0px;margin-bottom:0px;padding:0px;height:30px;overflow:hidden;text-overflow:ellipsis;word-wrap:break-word;font-weight:700;">从 iOS 角度出发，剖析移动端性能监控的技术原理</p>
<p class="owner-name" style="margin-top:0px;margin-bottom:0px;padding:0px;color:#6e6e6e;">王佳乐@Joy</p>
<div class="live-item-tag" style="margin:0px;padding:0px;"><span class="time-label" style="margin:0px;padding:2px 3px;color:#00bdef;border:1px solid #00bdef;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;font-size:14px;">11天后开始&nbsp;</span><span class="amount-label" style="margin:0px 30px 0px 10px;padding:0px;font-size:14px;color:#828282;float:right;">¥5</span></div>
</div>
<svg fill="currentColor" class="arrow" width="48" height="48" viewbox="0 0 48 48"><path d="M19.608308 11.291022c-.39064-.387697-1.037868-.388717-1.42788-.019096l-1.879672 1.7814c-.397956.37715-.40446 1.001224-.020242 1.388148l9.488537 9.55542-9.488535 9.55542c-.386777.389504-.36977 1.01853.020242 1.38815l1.879672 1.7814c.397955.37715 1.041186.364683 1.42788-.019096l12.09502-12.003886c.39064-.387697.386693-1.020195 0-1.403974L19.60831 11.291022z" fill-rule="evenodd"></path></svg></div>
</li>
<li class="live-item-li" style="margin:0px;padding:0px;"><div class="live-item" style="margin:0px;padding:10px;height:80px;position:relative;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#eeeeee;"><div class="avatar" style="margin:15px 0px 0px;padding:0px;display:inline-block;width:50px;height:50px;"><img src="http://i.quzhiboapp.com/q4BD0J" alt="onevcat" title="onevcat" style="margin:0px;padding:0px;position:relative;display:inline-block;width:50px;height:50px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
<div class="live-info" style="margin:0px;padding:0px;display:inline-block;position:absolute;top:10px;bottom:10px;left:70px;right:24px;height:80px;"><p class="subject" style="margin-top:0px;margin-bottom:0px;padding:0px;height:30px;overflow:hidden;text-overflow:ellipsis;word-wrap:break-word;font-weight:700;">现场编程 - 用 Swift 创建命令行工具 fengniao-cli Part 2</p>
<p class="owner-name" style="margin-top:0px;margin-bottom:0px;padding:0px;color:#6e6e6e;">onevcat</p>
<div class="live-item-tag" style="margin:0px;padding:0px;"><span class="time-label" style="margin:0px;padding:2px 3px;color:#00bdef;border:1px solid #00bdef;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;font-size:14px;">1天后开始&nbsp;</span><span class="amount-label" style="margin:0px 30px 0px 10px;padding:0px;font-size:14px;color:#828282;float:right;">¥10</span></div>
</div>
<svg fill="currentColor" class="arrow" width="48" height="48" viewbox="0 0 48 48"><path d="M19.608308 11.291022c-.39064-.387697-1.037868-.388717-1.42788-.019096l-1.879672 1.7814c-.397956.37715-.40446 1.001224-.020242 1.388148l9.488537 9.55542-9.488535 9.55542c-.386777.389504-.36977 1.01853.020242 1.38815l1.879672 1.7814c.397955.37715 1.041186.364683 1.42788-.019096l12.09502-12.003886c.39064-.387697.386693-1.020195 0-1.403974L19.60831 11.291022z" fill-rule="evenodd"></path></svg></div>
</li>
<li class="live-item-li" style="margin:0px;padding:0px;"><div class="live-item" style="margin:0px;padding:10px;height:80px;position:relative;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#eeeeee;"><div class="avatar" style="margin:15px 0px 0px;padding:0px;display:inline-block;width:50px;height:50px;"><img src="http://i.quzhiboapp.com/zhiku.jpeg" alt="智库灯塔" title="智库灯塔" style="margin:0px;padding:0px;position:relative;display:inline-block;width:50px;height:50px;color:#ffffff;text-align:center;font-size:24px;border-top-left-radius:50%;border-top-right-radius:50%;border-bottom-right-radius:50%;border-bottom-left-radius:50%;" /></div>
<div class="live-info" style="margin:0px;padding:0px;display:inline-block;position:absolute;top:10px;bottom:10px;left:70px;right:24px;height:80px;"><p class="subject" style="margin-top:0px;margin-bottom:0px;padding:0px;height:30px;overflow:hidden;text-overflow:ellipsis;word-wrap:break-word;font-weight:700;">浅谈互联网金融支付</p>
<p class="owner-name" style="margin-top:0px;margin-bottom:0px;padding:0px;color:#6e6e6e;">智库灯塔</p>
<div class="live-item-tag" style="margin:0px;padding:0px;"><span class="time-label" style="margin:0px;padding:2px 3px;color:#00bdef;border:1px solid #00bdef;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;font-size:14px;">10小时后开始&nbsp;</span><span class="amount-label free" style="margin:0px 30px 0px 10px;padding:0px;font-size:14px;color:#828282;float:right;text-decoration:line-through;">¥0</span></div>
</div>
<svg fill="currentColor" class="arrow" width="48" height="48" viewbox="0 0 48 48"><path d="M19.608308 11.291022c-.39064-.387697-1.037868-.388717-1.42788-.019096l-1.879672 1.7814c-.397956.37715-.40446 1.001224-.020242 1.388148l9.488537 9.55542-9.488535 9.55542c-.386777.389504-.36977 1.01853.020242 1.38815l1.879672 1.7814c.397955.37715 1.041186.364683 1.42788-.019096l12.09502-12.003886c.39064-.387697.386693-1.020195 0-1.403974L19.60831 11.291022z" fill-rule="evenodd"></path></svg></div>
</li>
<div class="load-more-bar" style="margin:0px;padding:0px;height:40px;text-align:center;color:#999999;"><div class="load-inner" style="margin:0px;padding:0px;line-height:40px;">点击加载更多&nbsp;</div>
</div>
</ul>
</div>
</div>
<div class="attend-section" style="margin:0px auto;padding:0px;position:fixed;bottom:0px;width:700px;height:55px;display:flex;max-width:700px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;"><div class="create-btn" style="margin:0px;padding:0px;-webkit-box-flex:1;flex:1 1 0px;background-color:rgba(112, 112, 112, 0.901961);text-align:center;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAAB+dJREFUaAXdW3uIVUUY/+bsrvvS0OhdIEFiqblrmSRUYmBRQlthlJllJWFBf2QPIQqNCLKioCgxKZYeVPRSQaP8QyzIEG3vTV0zo1gie7ippfexrd7p95tz5px713Pvnnvuvd7YD347c86Z8833uzNn5pv5ZpXUUnr12TKQnSiOjBetx4hSY0x1Wh9B/ojkpE+aW/bKJPVbrcxQVVXcm50gA7m50DlblL5KtIyNpF/JYdHqS5TdLM3OBpnUsi/SexEKVU5wn26WVHqRiFqEVro8Qp3DF1HqGxHdLe1t3TJBDQz/QvES8Qlq7UgyuwCknoYx40OrUHIIxPfi2Y8AWgldk+J2VbbuBXh3Ilp6nLl/wh/Vh7JPSkfLu0hzJzyOcCMewUT2WtHHV0J/R0EdSmkYuwMM1orjrJOO5l0Fz4tdJAemSC7XBbI3ipJL8UMMtSspqmGZdLZ8XkxFsftDFRUr597frUfLYOYtGHBTQUElv+MbWgnjPpTOtl8LnpV7kUifix/pFnzDy5CeVfC6Up9KU+udMlkdLbhf4iI6wWTmfNG59ah0iq+PI6Go50W1vCgdKuXfr0YmqdtFZ5eiVR/FD+qOvtSrZJco5wbpaP05SjXRCH6XmSXHcx9B4WmBUmeVjG5ZjkHgQHCvBrmkPkNy2RUiufvztPdLgzNPprZuybsXmh2eYCJzB37BN/FLNrkaVAbz2r3S0fZeqMZa3Uym52PefAN2tHp2DGLguUc6W98pVWVpgqbl9KY8cvulUXfJxe3bSymt2bOdqelyTK2DPef4JBvUnFItWZwgv7lcbhsUud1SSY+MaptbS68j0g9D7+jf9AaMBdO88v0YsWcU+ybDCZrRMr01GFDUfmlunV53cvYXMC5gBr3Ia0kOPE1tM8NGV8e+U5CaqcCOlvjm2C1r6C8W1B3lgrbQJoFtFI7stDlETiRoJvG8eY4DShnfnNZ6OTAqpK7q3qJNtM0K52baXlLofvWkEoB2kXmtZPmQhyBH6QWuDHlc/Vs9sNG3F7aTQ54UXBjf0rpfnMQ5z8WTi/DaFpBcDURbUcSrR4yNxuEwCjo8Dr62gCBXBcZxts/goVQ2iQ9C033AHpC81WqtempshK1WyIFcPAkIptJ342t1VwX0Lel+VSZ0xL8C6E++D5IbgPBVR2X1YKyBrbTZCOowyzf3KiAo6i6/HjrOFfqWSqnvoW8WwFY8BFwP7AbJh4AG5KsntJU2+6IW2axLkCtxu1jlkoergioISGpgDVTxm/wAaAfYM7aB5CVIqye0mbZTyIWcIC5Bd5uB15xTtle85HE1+X9B8g/gNtxgK/YBJEeSLwAkXblwmWbWop4qj5PtorODGujr1UZA8jNongzY7/th5Nltr6tOjVhoB2I4uQS5QWSFK/EaCkimABKbAXwLcODZCJIciM5EPr7k2+5zol9nJ8pE6mB87e6bMNJIFD0o2AAsBY6al7Q+iHQxoKK8H1qGHCwfcHPMvqVf0mwQ+Ve1zqAljwPsruy2G4FxAAclOgkXIo0heRywJ+tgmGEXscLdr5MuINkHzEXFHIg4n9HNS4LkcqBcvzbgAG4OhtRgv4Nbe3UUkORUwimFrcgdhBUAiZbj1wYcwM3B3BEQtPuW0FovAcnDAJ0DOgl7AHZVdtk1ALtwacnnAG52mij9Uh2egiTdvE7gFYCDzmKAfm05rYkvcAhjKPk/yXwYc7tnUAbpS8BW7zo8GdIjG9FFj4CkLTzWZuqZopWwpS+rgas9OzYhXYJW/cm7LpUEHMDNMSGsoDgV101ArAl4HAbsBEjuALAQxK6JSA7FGe/wBOG5RhOfG0h7dxAIqZOA2ExU/Tpgd867kX8ExP5CWobkcWDs0Ugidcif/RkIqUBgqJGoKlD4FOBVIGde1PoHpHm+cVRNKEfbrRdDThB3FHWDj64mE+Vxs7X+CyI3ow5OBQ8Ax4BngKlotc1Iy5d82z1OdprIU4gQVo0FxM4D1qKajwHuUn8NTAOxJ4As8jGlwHbDySXIsLEVxucYwqqBgJQDPAjVvUAX8DfA1rsCxHYjjS+0mbZb8Ti5BBkTN2FjPKUnz/hclQXEpkIl57CXAXpPbL1JILYK8Ocp3IsntNmuQsjFi/PbLgqlutvXzOAj43NVEBBrBZ6Fqh0A14C/AF0gNQ/Yj3zlQltpsy8Bl4AgA/6CmDiFkVUTfDRXsf+A2By8zDA2K2ddbD222nqk1RPa6keDwcFwCVOfyCwMhtn0P9hfPD2sWKl7IGXlbZtBmgAuK/Ve7Ge0MQFb/ekBHIpK9bbuLbc0Mo8BjUXrrPRBIrPKJ8ewQ8mtex7V4GkGXxA2ZmQ1nnyB16agOz4HcI6rvtA2nVviK6btkY6bJNKfBL9KOi2MrEYUtNafwIKIxeMXo009sM3vmrA5RMI3dyoIgILcqWixijevQmwNblUcAOU5FB7VEOl3tSKSyrAxFQ8jJ4UcbbHRXdpIW4ucnQmmiaGG8xwKj2qIGjSPGBMfQNi4jO46VGXF16ybNvjxedhGG0ucmSlOkNbwHAqPaliS/NWO4VRg/IEnPkfWybr9lgM52jbMWZnwb3CoGfU8CMR57mj2qdodBLJkR/RRLktyRB/GsySZlj5OifMriFDFO07ZhSXPdH9VENR5ko5TBhXiWx/JB2LziY7YI835JG1+RB5Kt+TCUuNS1fffCv4DOkAMzMI6lsIAAAAASUVORK5CYII=" alt="" style="margin:0px;padding:0px;vertical-align:middle;width:25px;" /><p style="margin-top:0px;margin-bottom:0px;padding:0px;font-size:12px;color:#ffffff;">发起直播</p>
</div>
<div class="attend-btn" style="margin:0px;padding:0px;font-size:14px;width:525px;-webkit-box-flex:3;flex:3 1 0px;background-color:#00bdef;color:#ffffff;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;text-align:center;border-top-left-radius:0px !important;border-top-right-radius:0px !important;border-bottom-right-radius:0px !important;border-bottom-left-radius:0px !important;background-position:initial initial;background-repeat:initial initial;">请登录后参与直播</div>
</div></body></html>