<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2017-07-14T10:11:38Z"/><meta name="updated" content="2017-07-14T10:11:42Z"/><title> iOS后向兼容：如何发现过期接口    2013-08-02 11:51 2100人阅读 评论(0) 收藏 举报     分类：  iPhone（132）     以4.3以下兼容性为例，在项目预</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="article_title" style="margin-bottom:21px;font-family:'microsoft yahei';font-size:12px;font-variant-ligatures:normal;orphans:2;widows:2;">&nbsp;<h1 style="margin:0px;padding:0px;display:inline-block;vertical-align:middle;font-size:18px;"><span class="link_title"><a href="http://blog.csdn.net/wave_1102/article/details/9714869" style="text-decoration:none;color:#000000;">iOS后向兼容：如何发现过期接口</a></span></h1>
</div>
<div class="article_manage clearfix" style="border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#ededed;color:#999999;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:12px;line-height:22px;font-family:Arial;text-align:right;margin:0px -20px 10px;padding:0px 20px 5px;overflow:hidden;orphans:2;widows:2;"><div class="article_r"><span class="link_postdate" style="margin:0px 16px 0px 0px;">2013-08-02 11:51</span>&nbsp;<span class="link_view" title="阅读次数" style="margin:0px 16px 0px 5px;padding:0px 0px 0px 24px;background:url(&quot;../images/skin-type-icon.png&quot;) 0px -25px no-repeat;display:inline-block;">2100人阅读</span>&nbsp;<span class="link_comments" title="评论次数" style="margin:0px 16px 0px 5px;padding:0px 0px 0px 17px;background-image:url(&quot;../images/skin-type-icon-yellow.png&quot;) !important;background-position:0px -43px;background-size:initial;background-repeat:no-repeat;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:initial;display:inline-block;"><a href="http://blog.csdn.net/wave_1102/article/details/9714869#comments" style="text-decoration:none;color:#c88326;">评论</a>(0)</span>&nbsp;<span class="link_collect tracking-ad" data-mod="popu_171" style="margin:0px 16px 0px 5px;display:inline-block;background-image:url(&quot;../images/skin-type-icon-yellow.png&quot;) !important;background-repeat:no-repeat;background-position:0px -62px;padding-left:17px;"><a title="收藏" target="_blank" style="color:#c88326;">收藏</a></span>&nbsp;<span class="link_report" style="margin:0px 16px 0px 5px;display:inline-block;background-image:url(&quot;../images/skin-type-icon-yellow.png&quot;) !important;background-repeat:no-repeat;background-position:0px -81px;padding-left:17px;"><a href="http://blog.csdn.net/wave_1102/article/details/9714869#report" title="举报" style="text-decoration:none;color:#c88326;">举报</a></span></div>
</div>
<div class="category clearfix" style="border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#ededed;margin:0px -20px;padding:5px 20px;font-family:'microsoft yahei';font-size:12px;font-variant-ligatures:normal;orphans:2;widows:2;"><div class="category_l" style="font-size:14px;float:left;display:inline-block;color:#333333;width:70px;line-height:28px;"><img src="http://static.blog.csdn.net/images/category_icon.jpg" style="border:none;vertical-align:middle;" />&nbsp;<span style="vertical-align:middle;display:inline-block;">分类：</span></div>
<div class="category_r" style="font-size:14px;float:left;display:inline-block;color:#df3434;width:840.594px;"><label style="display:inline-block;margin-left:15px;cursor:pointer;line-height:28px;position:relative;">iPhone（132）&nbsp;<img class="arrow-down" src="http://static.blog.csdn.net/images/arrow_triangle%20_down.jpg" style="border:none;display:inline;" /></label></div>
</div>
<div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post" style="margin:35px 0px;font-size:15px;color:#555555;line-height:35px;font-family:'microsoft yahei';font-variant-ligatures:normal;orphans:2;widows:2;"><p style="margin-top:0px;margin-bottom:0px;padding:0px;">以4.3以下兼容性为例，在项目预编译头文件（xx.pch）中加入如下代码：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_java" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:924.656px;overflow:hidden;padding-top:1px;position:relative;border-color:#cccccc;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[java]</b>&nbsp;<a href="http://blog.csdn.net/wave_1102/article/details/9714869#" class="ViewSource" title="view plain" target="_blank" style="text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;color:#0c89cf;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/wave_1102/article/details/9714869#" class="CopyToClipboard" title="copy" target="_blank" style="text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;color:#0c89cf;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:736px;top:472px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_1" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_1" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=1&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" class="dp-j" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">#</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&lt;Availability.h&gt;&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#define&nbsp;__AVAILABILITY_INTERNAL__IPHONE_3_2&nbsp;__AVAILABILITY_INTERNAL_DEPRECATED&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#define&nbsp;__AVAILABILITY_INTERNAL__IPHONE_4_0&nbsp;__AVAILABILITY_INTERNAL_DEPRECATED&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#define&nbsp;__AVAILABILITY_INTERNAL__IPHONE_4_1&nbsp;__AVAILABILITY_INTERNAL_DEPRECATED&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#define&nbsp;__AVAILABILITY_INTERNAL__IPHONE_4_2&nbsp;__AVAILABILITY_INTERNAL_DEPRECATED&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#define&nbsp;__AVAILABILITY_INTERNAL__IPHONE_4_3&nbsp;__AVAILABILITY_INTERNAL_DEPRECATED&nbsp;&nbsp;</span></li>
</ol>
</div>
<br />
然后，编译程序，在warning中会列出不再支持的方法，逐个检查，在可能引起程序crash的地方，加入 if ( [xx respondToSelector:(deprecatedMethod)] ) { ... } 判断。<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">也可以加入如下代码将warning变成error：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<div class="dp-highlighter bg_java" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:#e7e5dc;width:924.656px;overflow:hidden;padding-top:1px;position:relative;border-color:#cccccc;margin:18px 0px !important;"><div class="bar" style="padding-left:45px;"><div class="tools" style="padding:3px 8px 10px 10px;font-variant-ligatures:normal;font-variant-east-asian:normal;font-variant-position:normal;font-stretch:normal;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;background-color:#f8f8f8;border-left-width:3px;border-left-style:solid;border-left-color:#6ce26c;"><b>[java]</b>&nbsp;<a href="http://blog.csdn.net/wave_1102/article/details/9714869#" class="ViewSource" title="view plain" target="_blank" style="text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_plain.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;color:#0c89cf;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">view plain</a><span data-mod="popu_168">&nbsp;<a href="http://blog.csdn.net/wave_1102/article/details/9714869#" class="CopyToClipboard" title="copy" target="_blank" style="text-decoration:none;background-image:url(file:///Applications/mNote.app/Contents/Resources/images/default/ico_copy.gif);background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;color:#0c89cf;display:inline-block;width:16px;height:16px;text-indent:-2000px;background-position:left top;background-repeat:no-repeat no-repeat;">copy</a><div style="position:absolute;left:736px;top:789px;width:18px;height:18px;z-index:99;"><embed id="ZeroClipboardMovie_2" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="18" height="18" name="ZeroClipboardMovie_2" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=2&amp;width=18&amp;height=18" wmode="transparent" /></div>
</span></div>
</div>
<ol start="1" class="dp-j" style="padding:0px;border:none;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#5c5c5c;margin:0px 0px 1px 45px !important;"><li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">#</span><span class="keyword" style="margin:0px;padding:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">&nbsp;&lt;Availability.h&gt;&nbsp;&nbsp;</span></span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#define&nbsp;__AVAILABILITY_INTERNAL__IPHONE_3_2&nbsp;__AVAILABILITY_INTERNAL_UNAVAILABLE&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#define&nbsp;__AVAILABILITY_INTERNAL__IPHONE_4_0&nbsp;__AVAILABILITY_INTERNAL_UNAVAILABLE&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#define&nbsp;__AVAILABILITY_INTERNAL__IPHONE_4_1&nbsp;__AVAILABILITY_INTERNAL_UNAVAILABLE&nbsp;&nbsp;</span></li>
<li class="alt" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;color:inherit;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#define&nbsp;__AVAILABILITY_INTERNAL__IPHONE_4_2&nbsp;__AVAILABILITY_INTERNAL_UNAVAILABLE&nbsp;&nbsp;</span></li>
<li class="" style="border-style:none none none solid;border-left-width:3px;border-left-color:#6ce26c;list-style:decimal-leading-zero outside;background-color:#f8f8f8;line-height:18px;margin:0px !important;padding:0px 3px 0px 10px !important;"><span style="margin:0px;padding:0px;border:none;color:black;background-color:inherit;">#define&nbsp;__AVAILABILITY_INTERNAL__IPHONE_4_3&nbsp;__AVAILABILITY_INTERNAL_UNAVAILABLE&nbsp;&nbsp;</span></li>
</ol>
</div>
<br />
不兼容的方法会以编译错误列出。<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">参考：http://stackoverflow.com/questions/7790497/iphone-app-developed-with-sdk-4-2-requires-backward-compatibility-with-ios-3-1</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">另外这个不错：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">iOS Support Matrix</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">http://iossupportmatrix.com/versions/summer-2013-version-2-4-1</p>
</div></body></html>