<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2017-04-10T04:36:09Z"/><meta name="updated" content="2017-04-10T04:36:11Z"/><title>iOS原生应用中集成RN记录-个人笔记   作者 hophia 关注2016.06.21 18:19* 字数 760 阅读 262评论 2喜欢 2      1.新建iOS应用, 并创建一个UIVi</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><h1 class="title" style="box-sizing:border-box;font-size:34px;margin:20px 0px 0px;font-family:-apple-system, 'SF UI Display', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.3;color:#333333;word-break:break-word;font-variant-ligatures:normal;orphans:2;widows:2;">iOS原生应用中集成RN记录-个人笔记</h1>
<div class="author" style="box-sizing:border-box;margin:30px 0px 40px;color:#333333;font-family:-apple-system, 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-size:17px;font-variant-ligatures:normal;orphans:2;widows:2;"><a class="avatar" href="http://www.jianshu.com/u/5ce736eceedf" style="box-sizing:border-box;background-color:transparent;color:#333333;text-decoration:none;cursor:pointer;width:48px;height:48px;display:inline-block;vertical-align:middle;"><img src="http://upload.jianshu.io/users/upload_avatars/1195688/d8e4f505a20a.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/144/h/144" alt="144" style="box-sizing:border-box;border:1px solid #dddddd;vertical-align:middle;width:48px;height:48px;border-radius:50%;" /></a>&nbsp;<div class="info" style="box-sizing:border-box;vertical-align:middle;display:inline-block;margin-left:8px;"><span class="tag" style="box-sizing:border-box;padding:1px 2px;font-size:12px;color:#ea6f5a;border:1px solid #ea6f5a;border-radius:3px;">作者</span>&nbsp;<span class="name" style="box-sizing:border-box;margin-left:3px;margin-right:3px;font-size:16px;vertical-align:middle;"><a href="http://www.jianshu.com/u/5ce736eceedf" style="box-sizing:border-box;background-color:transparent;color:#333333;text-decoration:none;cursor:pointer;">hophia</a></span>&nbsp;<a class="btn btn-success follow" style="box-sizing:border-box;background-color:#42c02e;color:#ffffff;cursor:pointer;display:inline-block;margin-bottom:0px;text-align:center;vertical-align:middle;background-image:none;border:1px solid #42c02e;white-space:nowrap;padding:0px 7px 0px 5px;font-size:12px;line-height:normal;border-top-left-radius:40px;border-top-right-radius:40px;border-bottom-right-radius:40px;border-bottom-left-radius:40px;"><span style="box-sizing:border-box;margin-left:2px;">关注</span></a><div class="meta" style="box-sizing:border-box;margin-top:5px;font-size:12px;color:#969696;"><span class="publish-time" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="最后编辑于 2016.08.05 16:35" style="box-sizing:border-box;padding-right:5px;">2016.06.21 18:19*</span>&nbsp;<span class="wordage" style="box-sizing:border-box;padding-right:5px;">字数 760</span>&nbsp;<span class="views-count" style="box-sizing:border-box;padding-right:5px;">阅读 262</span><span class="comments-count" style="box-sizing:border-box;padding-right:5px;">评论 2</span><span class="likes-count" style="box-sizing:border-box;padding-right:5px;">喜欢 2</span></div>
</div>
</div>
<div class="show-content" style="box-sizing:border-box;color:#2f2f2f;word-break:break-word;font-size:16px;line-height:1.7;font-family:-apple-system, 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-variant-ligatures:normal;orphans:2;widows:2;"><h1 style="box-sizing:border-box;font-size:26px;margin:0px 0px 15px;font-family:inherit;line-height:1.7;text-rendering:optimizelegibility;">1.新建iOS应用, 并创建一个UIViewController, 指定为window的跟视图控制器</h1>
<h1 style="box-sizing:border-box;font-size:26px;margin:0px 0px 15px;font-family:inherit;line-height:1.7;text-rendering:optimizelegibility;">2.使用cocoapods</h1>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">vim Podfile<br style="box-sizing:border-box;" />
platform :ios, '7.0'<br style="box-sizing:border-box;" />
pod 'AFNetworking'<br style="box-sizing:border-box;" />
然后pod install<br style="box-sizing:border-box;" />
完成之后的工程目录和文件目录如下:</p>
<div class="image-package" style="box-sizing:border-box;padding-bottom:25px;width:700px;margin-left:-40px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/1195688-1398f2704f8fd70b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/1195688-1398f2704f8fd70b.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="box-sizing:border-box;border:0px;vertical-align:middle;height:auto;cursor:zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br style="box-sizing:border-box;" />
<div class="image-caption" style="box-sizing:border-box;min-width:20%;max-width:80%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom:1px solid #d9d9d9;font-size:14px;color:#969696;line-height:1.7;">屏幕快照 2016-06-11 下午9.05.22.png</div>
</div>
<div class="image-package" style="box-sizing:border-box;padding-bottom:25px;width:700px;margin-left:-40px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/1195688-2b06991d193ca154.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/1195688-2b06991d193ca154.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="box-sizing:border-box;border:0px;vertical-align:middle;height:auto;cursor:zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br style="box-sizing:border-box;" />
<div class="image-caption" style="box-sizing:border-box;min-width:20%;max-width:80%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom:1px solid #d9d9d9;font-size:14px;color:#969696;line-height:1.7;">屏幕快照 2016-06-11 下午9.06.44.png</div>
</div>
<h1 style="box-sizing:border-box;font-size:26px;margin:0px 0px 15px;font-family:inherit;line-height:1.7;text-rendering:optimizelegibility;">3.安装react-native</h1>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">我们在项目中建一个名为reactnative的文件夹, 用于存放我们react-native的相关文件, 再创建一个.packagejson文件, 用于初始化react-native.<br style="box-sizing:border-box;" />
</p>
<div class="image-package" style="box-sizing:border-box;padding-bottom:25px;width:700px;margin-left:-40px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/1195688-89719cbf5f5fd873.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/1195688-89719cbf5f5fd873.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="box-sizing:border-box;border:0px;vertical-align:middle;height:auto;cursor:zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br style="box-sizing:border-box;" />
<div class="image-caption" style="box-sizing:border-box;min-width:20%;max-width:80%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom:1px solid #d9d9d9;font-size:14px;color:#969696;line-height:1.7;">屏幕快照 2016-06-11 下午9.28.11.png</div>
</div>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;"><br style="box-sizing:border-box;" />
在终端执行安装, $cd reactnative $npm install<br style="box-sizing:border-box;" />
安装成功后，reactnative目录会产生一个node_modules，里面就是react-native依赖的所有项目包。</p>
<h1 style="box-sizing:border-box;font-size:26px;margin:0px 0px 15px;font-family:inherit;line-height:1.7;text-rendering:optimizelegibility;">4.在reactnative目录下创建 index.ios.js</h1>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">文件：</p>
<div class="image-package" style="box-sizing:border-box;padding-bottom:25px;width:700px;margin-left:-40px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/1195688-592ff88c376e28f0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/1195688-592ff88c376e28f0.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="box-sizing:border-box;border:0px;vertical-align:middle;height:auto;cursor:zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br style="box-sizing:border-box;" />
<div class="image-caption" style="box-sizing:border-box;min-width:20%;max-width:80%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom:1px solid #d9d9d9;font-size:14px;color:#969696;line-height:1.7;">屏幕快照 2016-06-11 下午10.00.37.png</div>
</div>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;"><br style="box-sizing:border-box;" />
这就是我们js程序的入口文件, ok，以上我们已经完成react-native的准备工作，接下来要开始集成啦～</p>
<h1 style="box-sizing:border-box;font-size:26px;margin:0px 0px 15px;font-family:inherit;line-height:1.7;text-rendering:optimizelegibility;">5.Cocoapods集成react-native</h1>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">在Podfile文件中加上</p>
<h2 style="box-sizing:border-box;font-family:inherit;line-height:1.7;margin:0px 0px 15px;font-size:24px;text-rendering:optimizelegibility;">取决于你的工程如何组织，你的node_modules文件夹可能会在别的地方。</h2>
<h2 style="box-sizing:border-box;font-family:inherit;line-height:1.7;margin:0px 0px 15px;font-size:24px;text-rendering:optimizelegibility;">请将:path后面的内容修改为正确的路径。</h2>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">pod 'React', :path =&gt; './reactnative/node_modules/react-native', :subspecs =&gt; [<br style="box-sizing:border-box;" />
'Core',<br style="box-sizing:border-box;" />
'RCTNetwork',<br style="box-sizing:border-box;" />
'RCTText',<br style="box-sizing:border-box;" />
'RCTWebSocket',</p>
<h2 style="box-sizing:border-box;font-family:inherit;line-height:1.7;margin:0px 0px 15px;font-size:24px;text-rendering:optimizelegibility;">添加其他你想在工程中使用的依赖。</h2>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">]</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">记得要添加所有你需要的依赖。举例来说，&lt;Text&gt;元素如果不添加RCTText依赖就不能运行<br style="box-sizing:border-box;" />
依赖文件安装进入工程目录，执行 $ pod install ，就完成了react－native工程包的集成。<br style="box-sizing:border-box;" />
此时目录结构是:<br style="box-sizing:border-box;" />
</p>
<div class="image-package" style="box-sizing:border-box;padding-bottom:25px;width:700px;margin-left:-40px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/1195688-0b9d2f73b65e4035.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/1195688-0b9d2f73b65e4035.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="box-sizing:border-box;border:0px;vertical-align:middle;height:auto;cursor:zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br style="box-sizing:border-box;" />
<div class="image-caption" style="box-sizing:border-box;min-width:20%;max-width:80%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom:1px solid #d9d9d9;font-size:14px;color:#969696;line-height:1.7;">屏幕快照 2016-06-19 下午10.34.35.png</div>
</div>
<h1 style="box-sizing:border-box;font-size:26px;margin:0px 0px 15px;font-family:inherit;line-height:1.7;text-rendering:optimizelegibility;">6.在ViewController.m文件夹中:</h1>
<div class="image-package" style="box-sizing:border-box;padding-bottom:25px;width:700px;margin-left:-40px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/1195688-5af0aab341b9e447.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/1195688-5af0aab341b9e447.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="box-sizing:border-box;border:0px;vertical-align:middle;height:auto;cursor:zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br style="box-sizing:border-box;" />
<div class="image-caption" style="box-sizing:border-box;min-width:20%;max-width:80%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom:1px solid #d9d9d9;font-size:14px;color:#969696;line-height:1.7;">屏幕快照 2016-06-21 下午6.22.37.png</div>
</div>
<h1 style="box-sizing:border-box;font-size:26px;margin:0px 0px 15px;font-family:inherit;line-height:1.7;text-rendering:optimizelegibility;">7.启动开发服务器</h1>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">在运行我们的项目之前，我们需要先启动我们的开发服务器。进入 reactnative目录 ,然后启动。 $ cd reactnative $ react-native start</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">运行项目界面如下:</p>
<div class="image-package" style="box-sizing:border-box;padding-bottom:25px;width:700px;margin-left:-40px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/1195688-8b8d9d4c43e4c2fb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/1195688-8b8d9d4c43e4c2fb.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="box-sizing:border-box;border:0px;vertical-align:middle;height:auto;cursor:zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br style="box-sizing:border-box;" />
<div class="image-caption" style="box-sizing:border-box;min-width:20%;max-width:80%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom:1px solid #d9d9d9;font-size:14px;color:#969696;line-height:1.7;">Simulator Screen Shot 2016年6月11日 下午9.55.55.png</div>
</div>
<h1 style="box-sizing:border-box;font-size:26px;margin:0px 0px 15px;font-family:inherit;line-height:1.7;text-rendering:optimizelegibility;">8、更新App Transport Security</h1>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">直接运行项目会报 Could not connect to development server 错误，官网中有这段话：</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">在iOS 9以上的系统中，除非明确指明，否则应用无法通过http协议连接到localhost主机。 我们建议你在Info.plist文件中将localhost列为App Transport Security的例外。 如果不这样做，在尝试通过http连接到服务器时，会遭遇这个错误 - Could not connect to development server.</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">打开工程中的 Info.list 文件，添加下面配置即可：</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;</p>
<p style="box-sizing:border-box;margin-top:0px;margin-bottom:25px;word-break:break-word;">&lt;dict&gt;<br style="box-sizing:border-box;" />
&lt;key&gt;NSExceptionDomains&lt;/key&gt;<br style="box-sizing:border-box;" />
&lt;dict&gt;<br style="box-sizing:border-box;" />
&lt;key&gt;localhost&lt;/key&gt;<br style="box-sizing:border-box;" />
&lt;dict&gt;<br style="box-sizing:border-box;" />
&lt;key&gt;NSTemporaryExceptionAllowsInsecureHTTPLoads&lt;/key&gt;<br style="box-sizing:border-box;" />
&lt;true/&gt;<br style="box-sizing:border-box;" />
&lt;/dict&gt;<br style="box-sizing:border-box;" />
&lt;/dict&gt;<br style="box-sizing:border-box;" />
&lt;/dict&gt;</p>
<div class="image-package" style="box-sizing:border-box;padding-bottom:25px;width:700px;margin-left:-40px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/1195688-b7d2a41603e72d16.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/1195688-b7d2a41603e72d16.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="box-sizing:border-box;border:0px;vertical-align:middle;height:auto;cursor:zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br style="box-sizing:border-box;" />
<div class="image-caption" style="box-sizing:border-box;min-width:20%;max-width:80%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom:1px solid #d9d9d9;font-size:14px;color:#969696;line-height:1.7;">屏幕快照 2016-06-11 下午9.58.06.png</div>
</div>
<h1 style="box-sizing:border-box;font-size:26px;margin:0px 0px 15px;font-family:inherit;line-height:1.7;text-rendering:optimizelegibility;">9、运行iOS项目</h1>
<div class="image-package" style="box-sizing:border-box;padding-bottom:25px;width:700px;margin-left:-40px;text-align:center;"><img src="http://upload-images.jianshu.io/upload_images/1195688-44ea1e18a1f2f60c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-original-src="http://upload-images.jianshu.io/upload_images/1195688-44ea1e18a1f2f60c.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="box-sizing:border-box;border:0px;vertical-align:middle;height:auto;cursor:zoom-in;transition:all 0.25s ease-in-out;-webkit-transition:all 0.25s ease-in-out;" /><br style="box-sizing:border-box;" />
<div class="image-caption" style="box-sizing:border-box;min-width:20%;max-width:80%;min-height:22px;display:inline-block;padding:10px;margin:0px auto;border-bottom:1px solid #d9d9d9;font-size:14px;color:#969696;line-height:1.7;">Simulator Screen Shot 2016年8月5日 下午4.32.08.png</div>
</div>
</div></body></html>