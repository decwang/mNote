<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2014-12-01T03:45:33Z"/><meta name="updated" content="2016-10-08T09:09:11Z"/><title>[转载]IOS Framework制作全攻略    (2012-11-06 11:16:45)转载▼    标签： 转载    分类： ios开发          原文地址：IOS Framewo</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="articalTitle" style="clear:both;line-height:20px;padding-bottom:10px;color:#494949;font-family:Verdana, 宋体, sans-serif;font-size:12px;"><h2 id="t_43a2eee70101affo" class="titName SG_txta" style="margin:0px;padding:0px;border:0px;list-style:none;color:#526673;font-size:18px;font-family:微软雅黑, 黑体;font-weight:300;display:inline;">[转载]IOS&nbsp;Framework制作全攻略</h2>
&nbsp;<span class="img2" style="white-space:nowrap;padding-top:4px;"><img width="15" height="15" align="absmiddle" title="此博文包含图片" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" class="SG_icon SG_icon18" style="margin:0px 0px 0px 5px;padding:0px;border:0px;list-style:none;background-image:url(http://simg.sinajs.cn/blog7style/images/common/sg_icon.png?20131218);vertical-align:text-bottom;background-position:255px 0%;" />	</span><span class="time SG_txtc" style="color:#878787;white-space:nowrap;font-family:Arial;font-size:10px;margin-left:5px;margin-right:13px;">(2012-11-06 11:16:45)</span><div class="turnBoxzz" style="float:right;"><a class="SG_aBtn SG_aBtn_ico SG_turn" action-type="reblog" action-data="{srcBlog:0, blogId:'407fb5bc01013v6s'}" style="cursor:pointer;padding:0px 0px 0px 3px;overflow:hidden;white-space:nowrap;display:inline-block;margin-right:6px;background-image:url(http://simg.sinajs.cn/blog7newtpl/image/33/33_13/images/sg_newsp.png);position:relative;letter-spacing:5px;width:86px;zoom:1;background-position:0px 0px;background-repeat:no-repeat no-repeat;"><cite style="font-style:normal;line-height:23px;padding:0px 20px 0px 32px;height:23px;min-width:1px;overflow-x:visible;background-image:url(http://simg.sinajs.cn/blog7newtpl/image/33/33_13/images/sg_newsp.png);width:34px;display:inline-block !important;background-position:100% -28px;background-repeat:no-repeat no-repeat;"><img class="SG_icon SG_icon111" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="15" height="15" align="absmiddle" style="margin:0px;padding:0px;border:0px;list-style:none;background-image:url(http://simg.sinajs.cn/blog7style/images/common/sg_icon.png?20131218);position:absolute;left:11px;top:4px;background-position:495px -60px;" />转载<span class="arrow" style="font-size:7px;position:absolute;right:5px;top:2px;">▼</span></cite></a></div>
</div>
<div class="articalTag" id="sina_keyword_ad_area" style="width:690px;clear:both;word-break:break-all;line-height:20px;color:#494949;font-family:Verdana, 宋体, sans-serif;font-size:12px;"><table style="margin:0px;padding:0px;"><tbody><tr><td class="blog_tag" style="margin:0px;padding:0px 10px 0px 0px;font-family:宋体;vertical-align:top;"><span class="SG_txtb" style="color:#878787;">标签：</span>&nbsp;<h3 style="margin:0px 5px 0px 0px;padding:0px;border:0px;list-style:none;display:inline;font-size:12px;font-weight:normal;"><a href="http://search.sina.com.cn/?c=blog&amp;q=%D7%AA%D4%D8&amp;by=tag" target="_blank" style="text-decoration:none;color:#526673;white-space:nowrap;">转载</a></h3>
</td>
<td class="blog_class" style="margin:0px;padding:0px;font-family:宋体;vertical-align:top;width:220px;white-space:nowrap;"><span class="SG_txtb" style="color:#878787;">分类：</span>&nbsp;<a target="_blank" href="http://blog.sina.com.cn/s/articlelist_1134751463_2_1.html" style="text-decoration:none;color:#526673;">ios开发</a></td>
</tr>
</tbody>
</table>
</div>
<div id="sina_keyword_ad_area2" class="articalContent " style="width:690px;clear:both;padding-top:18px;line-height:21px;padding-bottom:30px;word-wrap:normal;word-break:normal;overflow:hidden;font-family:simsun;color:#494949;"><div class="blogzz_abstract borderc" style="border-top-width:1px;border-style:dotted none none;border-top-color:#cccccc;padding-top:15px;margin:20px 0px;"><div class="blogzz_ainfo" style="margin-bottom:12px;"><span style="word-wrap:normal;word-break:normal;margin-right:25px;"><strong>原文地址：</strong><a target="_blank" href="http://blog.sina.com.cn/s/blog_407fb5bc01013v6s.html" title="IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" style="text-decoration:none;color:#526673;">IOS&nbsp;<wbr>Framework制作全攻略</a></span><span style="word-wrap:normal;word-break:normal;"><strong>作者：</strong><a href="http://blog.sina.com.cn/u/1082111420" title="Alsace" target="_blank" style="text-decoration:none;color:#526673;">Alsace</a></span></div>
<div class="blogzz_acon"><div style="text-align:center;"><span style="word-wrap:normal;word-break:normal;line-height:36px;font-size:large;"><span style="word-wrap:normal;word-break:normal;"><b><br />
</b></span></span></div>
创建一个Framework 项目<div><span style="word-wrap:normal;word-break:normal;line-height:24px;font-size:small;"><span style="word-wrap:normal;word-break:normal;"><b><br />
</b></span></span><div>1.创建项目</div>
<div>让我们一步步的来完成整个制作过程。在XCode重创建按一个IOS项目，选择任意一个应用程序模版，这不是最主要的，当这个模版在Framework导出前可以测试你的框架代码。</div>
<div style="text-align:center;"><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=43a2eee70101affo&amp;url=http://s11.sinaimg.cn/orignal/407fb5bcgbe130812578a" target="_blank" style="text-decoration:none;color:#526673;"><img src="http://s11.sinaimg.cn/bmiddle/407fb5bcgbe130812578a&amp;690" real_src="http://s11.sinaimg.cn/bmiddle/407fb5bcgbe130812578a&amp;690" name="image_operate_41361334897371658" alt="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" title="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" action-data="http%3A%2F%2Fs11.sinaimg.cn%2Fbmiddle%2F407fb5bcgbe130812578a%26690" action-type="show-slide" style="margin:0px;padding:0px;border:0px;list-style:none;" /></a></div>
<div style="text-align:center;"><br />
</div>
<div>2.添加框架类</div>
<div>记住要创建一个“import header”，在使用框架时通过头文件引用可以快速找到所有框架类。在之后还可以通过设置公共和私有头文件，来保护核心文件不被查看。记住这样的结构能完成一个很好的框架的90%，所以你必须尽量遵循objctive-c的类名、方法、属性、功能等。</div>
<div><div style="text-align:center;"><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=43a2eee70101affo&amp;url=http://s16.sinaimg.cn/orignal/407fb5bcgbe13577bad8f" target="_blank" style="text-decoration:none;color:#526673;"><img src="http://s16.sinaimg.cn/bmiddle/407fb5bcgbe13577bad8f&amp;690" real_src="http://s16.sinaimg.cn/bmiddle/407fb5bcgbe13577bad8f&amp;690" name="image_operate_14711334897333451" alt="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" title="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" action-data="http%3A%2F%2Fs16.sinaimg.cn%2Fbmiddle%2F407fb5bcgbe13577bad8f%26690" action-type="show-slide" style="margin:0px;padding:0px;border:0px;list-style:none;" /></a></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;font-size:16px;"><b><br />
</b></span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;font-size:16px;"><b>创建框架</b></span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;font-size:16px;"><b><br />
</b></span></div>
<div>3.创建一个Framework Target</div>
<div>通过点击你项目，选择右面视图的TARGETS点击左下角Add Target按钮，与创建&nbsp;<wbr>“Cocoa Touch Static Library” 和 &nbsp;<wbr>“Cocoa Framework” 不同我们创建一个"Bundle" Target。</div>
<div><div>因为“Cocoa&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;">Framework</span>”Target 不能被编译到armv6/armv7和Xcode不允许使用“静态库”中的“Cocoa&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;">Framework</span>”，所以我们不能用这个Target。另外，不是使用“Cocoa Touch Static Library”，因为它不能使用我们想要创建的Framework。</div>
<div><div style="text-align:center;"><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=43a2eee70101affo&amp;url=http://s8.sinaimg.cn/orignal/407fb5bcgbe1386bfac07" target="_blank" style="text-decoration:none;color:#526673;"><img src="http://s8.sinaimg.cn/bmiddle/407fb5bcgbe1386bfac07&amp;690" real_src="http://s8.sinaimg.cn/bmiddle/407fb5bcgbe1386bfac07&amp;690" name="image_operate_93081334897371832" alt="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" title="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" action-data="http%3A%2F%2Fs8.sinaimg.cn%2Fbmiddle%2F407fb5bcgbe1386bfac07%26690" action-type="show-slide" style="margin:0px;padding:0px;border:0px;list-style:none;" /></a></div>
</div>
<div>4.设置 Bundle</div>
<div>和以往的教程不同，你不需要做任何删除。因为所有的东西都会被忽略。选中刚刚创建的Bundle，选择 "Build Settings" 选项卡。</div>
</div>
<div><div style="text-align:center;"><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=43a2eee70101affo&amp;url=http://s12.sinaimg.cn/orignal/407fb5bcgbe13a5b6e2ab" target="_blank" style="text-decoration:none;color:#526673;"><img src="http://s12.sinaimg.cn/bmiddle/407fb5bcgbe13a5b6e2ab&amp;690" real_src="http://s12.sinaimg.cn/bmiddle/407fb5bcgbe13a5b6e2ab&amp;690" name="image_operate_68331334897372010" alt="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" title="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" action-data="http%3A%2F%2Fs12.sinaimg.cn%2Fbmiddle%2F407fb5bcgbe13a5b6e2ab%26690" action-type="show-slide" style="margin:0px;padding:0px;border:0px;list-style:none;" /></a></div>
<br />
</div>
<div><br />
</div>
<div>修改一下设置：(可以通过搜素找到这些选项)</div>
<div><ul style="margin:0.4em 0px 1em;padding:0px;border:0px;list-style:none;font-family:'segoe Ui', Calibri, 'Myriad pro', Myriad, 'Trebuchet Ms', Helvetica, Arial, sans-serif;line-height:19px;font-size:13px;text-align:-webkit-auto;"><li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Base SDK</em></strong>:&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">Latest iOS (iOS X.X)</strong></span>&nbsp;<wbr></li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Architectures</em></strong>:&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">$(ARCHS_STANDARD_32_BIT) armv6</strong></span>&nbsp;<wbr>( 这是一个非常重要的设置，如果你是新版本可以选择armv7).</li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Build Active Architecture Only</em></strong>:&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">NO</strong></span>&nbsp;<wbr>(这个设置可以同时编译armv6和armv7).</li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Valid Architecture</em></strong>:&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">$(ARCHS_STANDARD_32_BIT)</strong></span>&nbsp;<wbr>(如果这个值是两行，删除后插入蓝色的值).&nbsp;<wbr></li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Dead Code Stripping</em></strong>:&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">NO</strong></span>.</li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Link With Standard Libraries</em></strong>:&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">NO</strong></span>.</li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Mach-O Type</em></strong>:&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">Relocatable Object File</strong></span>. （这个设置指定编译器作一个可以重定位的文件捆绑，通过这样做，可以把函数设置包装在框架内）</li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Other Linker Flags</em></strong>: （这不是强制性设置，但是如果你打算使用c++代码在此框架内，建议使用"-lstdc++"选项。在这种情况下，可以使用"-objc"旧的编译器，避免冲突。）</li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Wrapper Extension</em></strong>:&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">framework</strong></span>. （这里将bundle修改为framework，在xcode，框架只是一个扩展的文件夹。框架里面包含了一个或多个编译的二进制源、资源和一些文件夹。文件夹通常背称为"Headers"，包含了所有的公共头文件）</li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;"><strong style="color:#4e4e4e;margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Generate Debug Symbols</em></strong><span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#4E4E4E;">:&nbsp;<wbr></span><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">NO</strong></span><span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#4E4E4E;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>(这是一个非常重要的设置，否则框架无法正常使用，</span><span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#ED1C24;">xcode4.2 上没有找到这个选项</span><span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#4E4E4E;">).</span></li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Precompile Prefix Header</em></strong>:&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">NO</strong></span>.（<span style="word-wrap:normal;word-break:normal;color:#ed1c24;">xcode4.2 上没有找到这个选项</span>）</li>
<li style="margin:0px 0px 0px 2.5em;padding:0px;border:0px;list-style:disc outside;color:#4e4e4e;"><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;">Prefix Header</em></strong>:&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;line-height:19.5px;margin:0px;padding:0px;color:#3366ff;"><strong style="margin:0px;padding:0px;">“”</strong></span>. (不用填写，<span style="word-wrap:normal;word-break:normal;color:#ed1c24;">xcode4.2 上没有找到这个选项</span>).</li>
</ul>
</div>
<div><br />
</div>
<div><div>重要提示：由于Xcode的4.x的架构ARMv6的已不再支持。所以我还要作一下操作：</div>
<div><ul style="margin:0px;padding:0px;border:0px;list-style:none;"><li style="margin:0px 0px 0px 30px;padding:0px;border:0px;list-style:disc;">更改以上设置<span style="word-wrap:normal;word-break:normal;">后</span>关闭了Xcode，在Finder中找到：xcodeproj（项目文件），然后选择“显示包内容”。</li>
<li style="margin:0px 0px 0px 30px;padding:0px;border:0px;list-style:disc;">到一个文本编辑器打开文件“project.pbxproj”。</li>
<li style="margin:0px 0px 0px 30px;padding:0px;border:0px;list-style:disc;">与VALID_ARCHS=“$（ARCHS_STANDARD_32_BIT）”删除所有行。</li>
</ul>
</div>
</div>
<div>5.添加源代码到 Framework</div>
<div>首先选择TARGETS下面创建的framewok。然后选择Build Phases选项卡。点击右下角的“Add Build Phase”按钮，选择“Add Copy Headers”。</div>
<div>打开刚刚创建的“Copy Headers”区域，这里可以分离你的公共头、私有头和工程头。</div>
<div>区别如下：</div>
<div><div>公共头：这里的头文件可以让其他的开发者通过xcode查看内容。</div>
<div>私人头：<span style="word-wrap:normal;word-break:normal;">这里的头文件不能让其他的开发者通过xcode查看内容。</span></div>
<div>项目头：这些头将不会被编译到最终框架中，这只是让编译器创建自定义的框架。</div>
<div>现在将所有头文件添加到里面去。</div>
</div>
<div><br />
</div>
<div>参考下图：</div>
<div><div style="text-align:center;"><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=43a2eee70101affo&amp;url=http://s1.sinaimg.cn/orignal/407fb5bcgbe14a7d12c50" target="_blank" style="text-decoration:none;color:#526673;"><img src="http://s1.sinaimg.cn/bmiddle/407fb5bcgbe14a7d12c50&amp;690" real_src="http://s1.sinaimg.cn/bmiddle/407fb5bcgbe14a7d12c50&amp;690" name="image_operate_2001334897419612" alt="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" title="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" style="margin:0px;padding:0px;border:0px;list-style:none;" /></a></div>
<br />
</div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;font-size:16px;"><b>创建通用框架</b></span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;"><span style="word-wrap:normal;word-break:normal;line-height:21px;"><br />
</span></span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;"><span style="word-wrap:normal;word-break:normal;line-height:21px;">6.创建通用的Targets</span></span></div>
<div><div><span style="word-wrap:normal;word-break:normal;">使用锂工具。它是一个<span style="word-wrap:normal;word-break:normal;">iOS SDK</span>工具，它是在“/Platforms/iPhoneOS.platform/Developer/usr/bin”中，其文件名是”lipo“。但我们并不需要知道它的位置，Xcode会给我们处理。</span></div>
<div style="line-height:24px;">点击"Add Target" 如图选择：</div>
<div style="line-height:24px;"><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=43a2eee70101affo&amp;url=http://s12.sinaimg.cn/orignal/407fb5bcgbe14c8d0833b" target="_blank" style="text-decoration:none;color:#526673;"><img src="http://s12.sinaimg.cn/bmiddle/407fb5bcgbe14c8d0833b&amp;690" real_src="http://s12.sinaimg.cn/bmiddle/407fb5bcgbe14c8d0833b&amp;690" name="image_operate_7621334897419630" alt="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" title="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" style="margin:0pt auto;padding:0px;border:0px;list-style:none;display:block;" /></a><br />
它不直接创建任何产品，它的目的是聚合另一个“target” 或 运行一些脚本，使用他通过"lipo”工具运行脚本，最终生产framework。</div>
<div><div><span style="word-wrap:normal;word-break:normal;"><br />
</span></div>
<div style="line-height:24px;text-align:center;"><b><span style="word-wrap:normal;word-break:normal;line-height:36px;font-size:24px;"><br />
</span></b></div>
<div style="line-height:24px;">7.使用 Lipo 工具运行脚本</div>
<div style="line-height:24px;">这就是我们最重要的部分，下面的脚本内容通过 Lipo 工具编译成我们想要得到的框架结构。</div>
<div style="line-height:24px;">选中刚刚创建的Aggregate标签，选中Build Phases选项卡，点击Add Build Phase按钮，选择“Add Run Script”。让后将脚本粘贴进去。</div>
<div style="line-height:24px;"><div><br />
</div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># Sets the target folders and the final framework product.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;">FMK_NAME=Test</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;">FMK_VERSION=A</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># Install dir will be the final output to the framework.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># The following line create it in the root folder of the current project.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;">INSTALL_DIR=${SRCROOT}/Products/${FMK_NAME}.framework</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><br />
</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># Working dir will be deleted after the framework creation.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;">WRK_DIR=build</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;">DEVICE_DIR=${WRK_DIR}/Release-iphoneos/${FMK_NAME}.framework</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;">SIMULATOR_DIR=${WRK_DIR}/Release-iphonesimulator/${FMK_NAME}.framework</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><br />
</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># Building both architectures.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;">xcodebuild -configuration&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;">"Release"</span>&nbsp;<wbr>-target&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;">"${FMK_NAME}"</span>&nbsp;<wbr>-sdk iphoneos</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;">xcodebuild -configuration&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;">"Release"</span>&nbsp;<wbr>-target&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;">"${FMK_NAME}"</span>&nbsp;<wbr>-sdk iphonesimulator</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># Cleaning the oldest.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;">if [ -d&nbsp;<wbr></span>"${INSTALL_DIR}"<span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr>]</span></span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;">then</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;">rm -rf&nbsp;<wbr></span>"${INSTALL_DIR}"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;">fi</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># Creates and renews the final product folder.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;">mkdir -p&nbsp;<wbr></span>"${INSTALL_DIR}"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;">mkdir -p&nbsp;<wbr></span>"${INSTALL_DIR}/Versions"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;">mkdir -p&nbsp;<wbr></span>"${INSTALL_DIR}/Versions/${FMK_VERSION}"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;">mkdir -p&nbsp;<wbr></span>"${INSTALL_DIR}/Versions/${FMK_VERSION}/Resources"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;">mkdir -p&nbsp;<wbr></span>"${INSTALL_DIR}/Versions/${FMK_VERSION}/Headers"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><br />
</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># Creates the internal links.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># It MUST uses relative path, otherwise will not work when the folder is copied/moved.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;">ln -s&nbsp;<wbr></span>"${FMK_VERSION}"<span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr></span>"${INSTALL_DIR}/Versions/Current"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;">ln -s&nbsp;<wbr></span>"Versions/Current/Headers"<span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr></span>"${INSTALL_DIR}/Headers"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;">ln -s&nbsp;<wbr></span>"Versions/Current/Resources"<span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr></span>"${INSTALL_DIR}/Resources"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;">ln -s&nbsp;<wbr></span>"Versions/Current/${FMK_NAME}"<span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr></span>"${INSTALL_DIR}/${FMK_NAME}"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><br />
</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># Copies the headers and resources files to the final product folder.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;">cp -R&nbsp;<wbr></span>"${DEVICE_DIR}/Headers/"<span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr></span>"${INSTALL_DIR}/Versions/${FMK_VERSION}/Headers/"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;">cp -R&nbsp;<wbr></span>"${DEVICE_DIR}/"<span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr></span>"${INSTALL_DIR}/Versions/${FMK_VERSION}/Resources/"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><br />
</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># Removes the binary and header from the resources folder.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;">rm -r&nbsp;<wbr></span>"${INSTALL_DIR}/Versions/${FMK_VERSION}/Resources/Headers""${INSTALL_DIR}/Versions/${FMK_VERSION}/Resources/${FMK_NAME}"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><br />
</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"># Uses the Lipo Tool to merge both binary files (i386 + armv6/armv7) into one Universal final product.</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;">lipo -create&nbsp;<wbr></span>"${DEVICE_DIR}/${FMK_NAME}"<span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr></span>"${SIMULATOR_DIR}/${FMK_NAME}"<span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr>-output</span>"${INSTALL_DIR}/Versions/${FMK_VERSION}/${FMK_NAME}"</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><br />
</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:21px;color:#2A9F00;"><span style="word-wrap:normal;word-break:normal;">rm -r&nbsp;<wbr></span>"${WRK_DIR}"</span></div>
</div>
<div style="line-height:24px;"><br />
</div>
<div><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=43a2eee70101affo&amp;url=http://s8.sinaimg.cn/orignal/407fb5bcgbe14ef9e4c67" target="_blank" style="text-decoration:none;color:#526673;"><img src="http://s8.sinaimg.cn/bmiddle/407fb5bcgbe14ef9e4c67&amp;690" real_src="http://s8.sinaimg.cn/bmiddle/407fb5bcgbe14ef9e4c67&amp;690" name="image_operate_64181334898978978" alt="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" title="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" action-data="http%3A%2F%2Fs8.sinaimg.cn%2Fbmiddle%2F407fb5bcgbe14ef9e4c67%26690" action-type="show-slide" style="margin:0pt auto;padding:0px;border:0px;list-style:none;display:block;" /></a><br />
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:24px;">修改脚本：</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:24px;"><span style="word-wrap:normal;word-break:normal;">FMK_NAME=Test（这个修改为你的Framework名称）</span></p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:24px;">FMK_VERSION=A（这个为版本）</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:24px;">选中XCODE如图：</p>
<span style="word-wrap:normal;word-break:normal;line-height:24px;margin:0pt auto;"><img src="http://s12.sinaimg.cn/bmiddle/407fb5bcg7968812091eb&amp;690" real_src="http://s12.sinaimg.cn/bmiddle/407fb5bcg7968812091eb&amp;690" name="image_operate_78151334898977893" alt="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" title="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" style="margin:0pt auto;padding:0px;border:0px;list-style:none;display:block;" /></span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;margin:0pt auto;"><br />
</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;margin:0pt auto;"><br />
</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;">然后 command+b 编译该target。编译可能会出现错误，将&nbsp;<wbr>Test-Prefix.pch 中的代码注释解决这个错误。</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;">生成后的framework文件将保存在项目目录/Products 里面。</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;"><br />
</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;">8.添加使用 Framework</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;">打开需要使用Framework的工程文件。选中项目名称。右边视图选中TARGETS下的项目，然后选中</span><span style="word-wrap:normal;word-break:normal;line-height:24px;">Build Phases选项卡，打开Link Binary With Libraries区域，点击"+"号，点击Add Other按钮然后找到刚刚在项目中生成的framework文件夹，如图打开文件夹，OK，你已经学会如何创建及使用自定义动态库了。</span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:24px;"><br />
</span></div>
<div><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=43a2eee70101affo&amp;url=http://s16.sinaimg.cn/orignal/407fb5bcgbe153342b94f" target="_blank" style="text-decoration:none;color:#526673;"><img src="http://s16.sinaimg.cn/bmiddle/407fb5bcgbe153342b94f&amp;690" real_src="http://s16.sinaimg.cn/bmiddle/407fb5bcgbe153342b94f&amp;690" width="490" height="343" name="image_operate_34571334898976797" alt="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" title="[转载]IOS&nbsp;&lt;wbr&gt;Framework制作全攻略" style="margin:0pt auto;padding:0px;border:0px;list-style:none;display:block;" /></a></div>
</div>
</div>
</div>
</div>
<div><br />
</div>
</div>
</div>
</div></body></html>