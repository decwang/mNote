<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2014-12-08T07:12:26Z"/><meta name="updated" content="2014-12-08T07:12:28Z"/><title>iOS开发网络数据之AFNetworking使用    (2014-01-25 11:54:10)转载▼    标签： afnetworking   afnetworking开发   ios开发af</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="articalTitle" style="clear:both;line-height:20px;padding-bottom:10px;color:#323e32;font-family:Verdana, 宋体, sans-serif;font-size:12px;"><h2 id="t_68661bd80101r1xz" class="titName SG_txta" style="margin:0px;padding:0px;border:0px;list-style:none;color:#2544a7;font-size:18px;font-family:微软雅黑, 黑体;font-weight:300;display:inline;">iOS开发网络数据之AFNetworking使用</h2>
&nbsp;<span class="img2" style="white-space:nowrap;padding-top:4px;"><img width="15" height="15" align="absmiddle" title="此博文包含图片" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" class="SG_icon SG_icon18" style="margin:0px 0px 0px 5px;padding:0px;border:0px;list-style:none;background-image:url(http://simg.sinajs.cn/blog7style/images/common/sg_icon.png?20131218);vertical-align:text-bottom;background-position:255px 0%;" />	</span><span class="time SG_txtc" style="color:#637160;white-space:nowrap;font-family:Arial;font-size:10px;margin-left:5px;margin-right:13px;">(2014-01-25 11:54:10)</span><div class="turnBoxzz" style="float:right;"><a class="SG_aBtn SG_aBtn_ico SG_turn" action-type="reblog" action-data="{srcBlog:1, blogId:'68661bd80101r1xz'}" style="cursor:pointer;padding:0px 0px 0px 3px;overflow:hidden;white-space:nowrap;display:inline-block;margin-right:6px;background-image:url(http://simg.sinajs.cn/blog7newtpl/image/10/10_87/images/sg_newsp.png);position:relative;letter-spacing:5px;width:86px;zoom:1;background-position:0px 0px;background-repeat:no-repeat no-repeat;"><cite style="font-style:normal;line-height:23px;padding:0px 20px 0px 32px;height:23px;min-width:1px;overflow-x:visible;background-image:url(http://simg.sinajs.cn/blog7newtpl/image/10/10_87/images/sg_newsp.png);width:34px;display:inline-block !important;background-position:100% -28px;background-repeat:no-repeat no-repeat;"><img class="SG_icon SG_icon111" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="15" height="15" align="absmiddle" style="margin:0px;padding:0px;border:0px;list-style:none;background-image:url(http://simg.sinajs.cn/blog7style/images/common/sg_icon.png?20131218);position:absolute;left:11px;top:4px;background-position:495px -60px;" />转载<span class="arrow" style="font-size:7px;position:absolute;right:5px;top:2px;">▼</span></cite></a></div>
</div>
<div class="articalTag" id="sina_keyword_ad_area" style="width:690px;clear:both;word-break:break-all;line-height:20px;color:#323e32;font-family:Verdana, 宋体, sans-serif;font-size:12px;"><table style="margin:0px;padding:0px;"><tbody><tr><td class="blog_tag" style="margin:0px;padding:0px 10px 0px 0px;font-family:宋体;vertical-align:top;"><span class="SG_txtb" style="color:#637160;">标签：</span>&nbsp;<h3 style="margin:0px 5px 0px 0px;padding:0px;border:0px;list-style:none;display:inline;font-size:12px;font-weight:normal;"><a href="http://search.sina.com.cn/?c=blog&amp;q=afnetworking&amp;by=tag" target="_blank" style="text-decoration:none;color:#2544a7;white-space:nowrap;">afnetworking</a></h3>
&nbsp;<h3 style="margin:0px 5px 0px 0px;padding:0px;border:0px;list-style:none;display:inline;font-size:12px;font-weight:normal;"><a href="http://search.sina.com.cn/?c=blog&amp;q=afnetworking%BF%AA%B7%A2&amp;by=tag" target="_blank" style="text-decoration:none;color:#2544a7;white-space:nowrap;">afnetworking开发</a></h3>
&nbsp;<h3 style="margin:0px 5px 0px 0px;padding:0px;border:0px;list-style:none;display:inline;font-size:12px;font-weight:normal;"><a href="http://search.sina.com.cn/?c=blog&amp;q=ios%BF%AA%B7%A2afnetworking&amp;by=tag" target="_blank" style="text-decoration:none;color:#2544a7;white-space:nowrap;">ios开发afnetworking</a></h3>
&nbsp;<h3 style="margin:0px 5px 0px 0px;padding:0px;border:0px;list-style:none;display:inline;font-size:12px;font-weight:normal;"><a href="http://search.sina.com.cn/?c=blog&amp;q=ios%BF%AA%B7%A2%CD%F8%C2%E7%C7%EB%C7%F3&amp;by=tag" target="_blank" style="text-decoration:none;color:#2544a7;white-space:nowrap;">ios开发网络请求</a></h3>
<h3 style="margin:0px 5px 0px 0px;padding:0px;border:0px;list-style:none;display:inline;font-size:12px;font-weight:normal;"><a href="http://search.sina.com.cn/?c=blog&amp;q=afnetworking%BB%F1%C8%A1%CA%FD%BE%DD&amp;by=tag" target="_blank" style="text-decoration:none;color:#2544a7;white-space:nowrap;">afnetworking获取数据</a></h3>
</td>
<td class="blog_class" style="margin:0px;padding:0px;font-family:宋体;vertical-align:top;width:220px;white-space:nowrap;"></td>
</tr>
</tbody>
</table>
</div>
<div id="sina_keyword_ad_area2" class="articalContent " style="width:690px;clear:both;padding-top:18px;line-height:21px;padding-bottom:30px;word-wrap:normal;word-break:normal;overflow:hidden;font-family:simsun;color:#323e32;"><div>http网络库是集XML解析，Json解析，网络图片下载，plist解析，数据流请求操作，上传，下载，缓存等网络众多功能于一身的强大的类库。最新版本支持session，<span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;font-size:11px;">xctool</span>单元测试<span style="word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;">。</span>网络获取数据一直是手机软件的重中之重，如果处理的不好，会造成很差的用户体验。<span style="word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:'Heiti sC Light';">随着</span><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">ASIHTTPRequest</span><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:'Heiti sC Light';">的停止更新，更换网络库是必然的事情，</span></span><span style="word-wrap:normal;word-break:normal;">AFNetworking就是很好的替代品。</span>而且都是轻量级，不要担心加入太多库会多软件性能有影响。</div>
<div>1.<span style="word-wrap:normal;word-break:normal;">为什么用第三方网络库？先说如果不用网络库，我曾有一次觉得什么都用苹果原生的好，XML解析用苹果自带的委托，下载图片自己写，如果你也有跟我一样的经历，那你会发现自己管理起来很复杂，很容易出错。而且性能不好。如果你是一个追求完美的人，那就放下你的固执，就如当初的我一样，尝试一下网络库吧。</span></div>
<div><span style="word-wrap:normal;word-break:normal;">2.</span>为什么要用AFNetworking?第一点，它有人更新和维护，而且目前使用者很多，第二点，还是使用者很多，那么他的资料，文档，demo就多，很好找遇到问题好解决。如果不用AFNetworking，还有一种<span style="word-wrap:normal;word-break:normal;color:#333333;">MKNetworkKit也不错，不妨一试。</span></div>
<div><b><span style="word-wrap:normal;word-break:normal;color:#FF0000;">如何选择AFNetworking版本</span></b></div>
<div><p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:'Heiti sC Light';"><span style="word-wrap:normal;word-break:normal;line-height:21px;">首先得下载<span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">AFNetworking</span>库文件，下载时得首先弄清楚，你将要开发的软件兼容的最低版本是多少。<span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">AFNetworking 2.0</span>或者之后的版本需要<span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">xcode5.0</span>版本并且只能为<span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">IOS6</span>或更高的手机系统上运行，如果开发<span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">MAC</span>程序，那么<span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">2.0</span>版本只能在<span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">MAC OS X 10.8</span>或者更高的版本上运行。</span></p>
</div>
<div><a href="https://github.com/AFNetworking/AFNetworking" target="_blank" style="text-decoration:none;color:#2544a7;">AFNetworking 2.0的下载地址https://github.com/AFNetworking/AFNetworking</a></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:22.5px;color:#333333;font-size:15px;">如果你想要兼容IOS5或MAC OS X 10.7，那你需要用最新发布的1.x</span><span style="word-wrap:normal;word-break:normal;line-height:22.5px;color:#333333;font-size:15px;">版本</span></div>
<div><a href="https://github.com/AFNetworking/AFNetworking/tree/1.x" target="_blank" style="text-decoration:none;color:#2544a7;">AFNetworking 1.x的下载地址https://github.com/AFNetworking/AFNetworking/tree/1.x</a></div>
<div>如果要兼容4.3或者MAC OS X 10.6，<span style="word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:'Heiti sC Light';">需要用最新发布的</span><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">0.10.x</span><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:'Heiti sC Light';">版本</span></span></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:21px;">AFNetworking 0.10.x</span></span><a href="https://github.com/AFNetworking/AFNetworking/tree/0.10.x" target="_blank" style="text-decoration:none;color:#2544a7;">https://github.com/AFNetworking/AFNetworking/tree/0.10.x</a></div>
<div><br />
</div>
<div>2013年大多数软件兼容的最低版本为4.3，而2014年，估计大多数软件兼容的最低版本将会是5.0甚至6.0；</div>
<div>所以，<span style="word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:'Heiti sC Light';">目前最好的选择还是</span><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">1.x</span><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:'Heiti sC Light';">版本，兼容到</span><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">IOS5.0</span><span style="word-wrap:normal;word-break:normal;line-height:normal;font-family:'Heiti sC Light';">。</span></span></div>
<div><b style="line-height:1.5;"><span style="word-wrap:normal;word-break:normal;color:#FF0000;">如何通过URL获取json数据</span></b></div>
<div><span style="word-wrap:normal;word-break:normal;color:#333333;"><span style="word-wrap:normal;word-break:normal;line-height:22px;font-size:15px;">第一种，利用</span></span><span style="word-wrap:normal;word-break:normal;line-height:normal;color:#3495af;font-family:Menlo;font-size:11px;">AFJSONRequestOperation，</span><span style="word-wrap:normal;word-break:normal;line-height:22.5px;font-size:15px;color:#333333;">官方网站上给的例子：</span></div>
<div><p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#b4261a;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;NSString</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*str=[</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSString</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">stringWithFormat</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span>@"https://alpha-api.app.net/stream/0/posts/stream/global"<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;NSURL&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*url = [</span>NSURL URLWithString<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:[str</span>&nbsp;stringByAddingPercentEsc<wbr>apesUsingEncoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span>NSUTF8StringEncoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;NSURLRequest&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*request = [</span>NSURLRequest requestWithURL<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:url];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#008f00;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;//&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';">从</span>URL<span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';">获取</span>json<span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';">数据</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;AFJSONRequestOperation&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*operation1 = [</span>AFJSONRequestOperation JSONRequestOperationWith<wbr>Request<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:request</span>success<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:^(</span>NSURLRequest&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*request,</span>&nbsp;NSHTTPURLResponse&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*response,</span>&nbsp;NSDictionary<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">* JSON) {</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"</span><span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';color:#b4261a;">获取到的数据为：</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">%@"</span>,JSON);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">failure</span>:^(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSURLRequest</span>&nbsp;*request,&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSHTTPURLResponse</span>&nbsp;*response,&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSError</span>&nbsp;*error,&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">id</span>&nbsp;data) {</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"</span><span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';color:#b4261a;">发生错误！</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">%@"</span>,error);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[operation1&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">start</span>];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;">第二种方法，利用</span><span style="word-wrap:normal;word-break:normal;color:#3495af;">AFHTTPRequestOperation&nbsp;<wbr></span><span style="word-wrap:normal;word-break:normal;line-height:21px;font-size:14px;">先获取到字符串形式的数据，然后转换成json格式，将</span><span style="word-wrap:normal;word-break:normal;color:#3495af;">NSString</span><span style="word-wrap:normal;word-break:normal;line-height:21px;font-size:14px;">格式的数据转换成json数据，利用IOS5自带的json解析方法：</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>NSString<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>*str=[</span>NSString<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr></span>stringWithFormat<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;color:#b4261a;">@"https://alpha-api.app.net/stream/0/posts/stream/global"</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<wbr></span>NSURL<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>*url = [</span>NSURL<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr></span>URLWithString<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:[str&nbsp;<wbr></span>stringByAddingPercentEsc<wbr>apesUsingEncoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span>NSUTF8StringEncoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<wbr></span>NSURLRequest<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>*request = [</span>NSURLRequest<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr></span>requestWithURL<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:url];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span><span style="word-wrap:normal;word-break:normal;">AFHTTPRequestOperation</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*operation = [[</span><span style="word-wrap:normal;word-break:normal;">AFHTTPRequestOperation</span>&nbsp;<span style="word-wrap:normal;word-break:normal;">alloc</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]</span>&nbsp;<span style="word-wrap:normal;word-break:normal;">initWithRequest</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:request];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[operation</span>&nbsp;setCompletionBlockWithSu<wbr>ccess<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:^(</span>AFHTTPRequestOperation&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*operation,</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">id</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">responseObject) {</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSString</span>&nbsp;*html = operation.<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">responseString</span>;</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>NSData<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">* data=[html</span>&nbsp;dataUsingEncoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span>NSUTF8StringEncoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr></span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">id</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">dict=[</span>NSJSONSerialization<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr></span>&nbsp;JSONObjectWithData<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:data</span>&nbsp;options<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:0</span>&nbsp;error<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">nil</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"</span><span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';color:#b4261a;">获取到的数据为：</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">%@"</span>,dict);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}</span>failure<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:^(</span>AFHTTPRequestOperation&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*operation,</span>&nbsp;NSError&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*error) {</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"</span><span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';color:#b4261a;">发生错误！</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">%@"</span>,error);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;NSOperationQueue&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*queue = [[</span>NSOperationQueue alloc<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]</span>&nbsp;init<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[queue&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">addOperation</span>:operation];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">如果发生<b>Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x14defc80 {NSUnderlyingError=0x14deea10 "bad URL", NSLocalizedDescription=bad URL这个错误，请检查URL编码格式。有没有进行</b><span style="word-wrap:normal;word-break:normal;color:#3495af;">stringByAddingPercentEsc<wbr>apesUsingEncoding</span>:<span style="word-wrap:normal;word-break:normal;color:#3495af;">NSUTF8StringEncoding</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;color:#3495af;"><br />
</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;color:#3495af;"><br />
</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><b style="font-family:宋体, Verdana, Arial, Helvetica, sans-serif;font-size:15px;line-height:22px;"><span style="word-wrap:normal;word-break:normal;line-height:22.5px;color:#FF0000;">如何通过URL获取图片</span></b></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;">异步获取图片，通过队列实现，而且图片会有缓存，在下次请求相同的链接时，系统会自动调用缓存，而不从网上请求数据。</p>
<pre style="white-space:normal;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;margin-top:15px;margin-bottom:15px;background-color:#f8f8f8;border:1px solid #dddddd;line-height:19px;overflow:auto;padding:6px 10px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-wrap:normal;color:#333333;"> <span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#3495af;">UIImageView</span>&nbsp;*imageView = [[<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#3495af;">UIImageView</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#3495af;">alloc</span>]&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#3495af;">initWithFrame</span>:<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#3495af;">CGRectMake</span>(0.0f, 100.0f, 100.0f, 100.0f)];&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[imageView&nbsp;</span>setImageWithURL<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#000000;">:[</span>NSURL<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#000000;">&nbsp;</span>URLWithString<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#b4261a;">@"http://i.imgur.com/r4uwx.jpg"</span><span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#000000;">]&nbsp;</span>placeholderImage<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#000000;">:[</span>UIImage<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#000000;">&nbsp;</span>imageNamed<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#b4261a;">@"placeholder-avatar"</span><span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#000000;">]];</span>&nbsp;
&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#0433ff;">self</span>.<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#3495af;">view</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:19.5px;color:#3495af;">addSubview</span>:imageView];</pre><p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:21px;">上面的方法是官方提供的，还有一种方法，</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#b4261a;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSURLRequest</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*request = [</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSURLRequest</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">requestWithURL</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:[</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSURL</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">URLWithString</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span>@"http://www.scott-sherwood.com/wp-content/uploads/2013/01/scene.png"<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;AFImageRequestOperation&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*operation = [</span>AFImageRequestOperation imageRequestOperationWit<wbr>hRequest<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:request</span>&nbsp;imageProcessingBlock<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">nil</span>&nbsp;success<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:^(</span>NSURLRequest&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*request,</span>&nbsp;NSHTTPURLResponse&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*response,</span>UIImage&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*image) {</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">self</span>.backgroundImageView.image = image;</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}</span>&nbsp;failure<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:^(</span>NSURLRequest&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*request,</span>&nbsp;NSHTTPURLResponse&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*response,</span>&nbsp;NSError&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*error) {</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"Error %@"</span>,error);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[operation&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">start</span>];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:21px;font-size:14px;">如果使用第一种</span><span style="word-wrap:normal;word-break:normal;">URLWithString：</span><span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr>&nbsp;<wbr></span><span style="word-wrap:normal;word-break:normal;font-size:14px;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;font-size:11px;">placeholderImage：</span>会有更多的细节处理，其实实现还是通过</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">AFImageRequestOperation</span><span style="word-wrap:normal;word-break:normal;line-height:21px;font-size:14px;">处理，可以点击</span><span style="word-wrap:normal;word-break:normal;">URLWithString：</span><span style="word-wrap:normal;word-break:normal;">&nbsp;<wbr>&nbsp;<wbr></span><span style="word-wrap:normal;word-break:normal;font-size:14px;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;font-size:11px;">placeholderImage：</span></span><span style="word-wrap:normal;word-break:normal;line-height:21px;font-size:14px;">方法进去看一下就一目了然了。所以我觉得还是用第一种好。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><b style="font-family:宋体, Verdana, Arial, Helvetica, sans-serif;font-size:15px;line-height:22px;"><span style="word-wrap:normal;word-break:normal;line-height:22.5px;color:#FF0000;">如何通过URL获取plist文件</span></b></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;">通过url获取plist文件的内容，用的很少，这个方法在官方提供的方法里面没有</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#b4261a;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;NSString</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*weatherUrl =</span>&nbsp;@"http://www.calinks.com.cn/buick/kls/Buickhousekeeper.plist"<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;NSURL&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*url = [</span>NSURL URLWithString<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:[weatherUrl</span>&nbsp;stringByAddingPercentEsc<wbr>apesUsingEncoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span>NSUTF8StringEncoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;NSURLRequest&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*request = [</span>NSURLRequest requestWithURL<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:url];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[</span>AFPropertyListRequestOpe<wbr>ration addAcceptableContentType<wbr>s<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:[</span>NSSet setWithObject<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"text/plain"</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;AFPropertyListRequestOpe<wbr>ration&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*operation = [</span>AFPropertyListRequestOpe<wbr>ration propertyListRequestOpera<wbr>tionWithRequest<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:request</span>&nbsp;success<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:^(</span>NSURLRequest&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*request,</span>&nbsp;NSHTTPURLResponse&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*response,</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">id</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">propertyList) {</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"%@"</span>,(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSDictionary</span>&nbsp;*)propertyList);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;min-height:13px;">&nbsp;<wbr>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">failure</span>:^(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSURLRequest</span>&nbsp;*request,&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSHTTPURLResponse</span>&nbsp;*response,&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSError</span>&nbsp;*error,&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">id</span>&nbsp;propertyList) {</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"%@"</span>,error);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[operation&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">start</span>];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:22px;font-size:15px;color:#333333;">如果稍不留神，可能就出现</span><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>Error Domain=AFNetworkingErrorDomain Code=-1016 "Expected content type {(</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;"application/x-plist"</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>)}, got text/plain" UserInfo=0x16e91ce0 {NSLocalizedRecoverySugge<wbr>stion=</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">&nbsp;<wbr></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>...</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>...</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>, AFNetworkingOperationFai<wbr>lingURLRequestErrorKey= { }, NSErrorFailingURLKey=, NSLocalizedDescription=Expected content type {(</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;"application/x-plist"</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>)}, got text/plain, AFNetworkingOperationFai<wbr>linponseErrorKey= { URL: &nbsp;<wbr>} { status code: 200, headers {</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;"Accept-Ranges" = bytes;</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;Connection = "keep-alive";</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;"Content-Length" = 974;</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;"Content-Type" = "text/plain";</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;Date = "Sat, 25 Jan 2014 07:29:26 GMT";</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;Etag = ""1014c2-3ce-4ee63e1c80e00"";</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;"Last-Modified" = "Wed, 25 Dec 2013 23:04:24 GMT";</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;Server = "nginx/1.4.2";</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;">&nbsp;<wbr></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:15px;font-size:10px;"><b>} }}</b></span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;">可能还会出现乱码，解决办法就是</span>[<span style="word-wrap:normal;word-break:normal;color:#3495af;">AFPropertyListRequestOpe<wbr>ration</span>&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;color:#3495af;">addAcceptableContentType<wbr>s</span>:[<span style="word-wrap:normal;word-break:normal;color:#3495af;">NSSet</span>&nbsp;<wbr><span style="word-wrap:normal;word-break:normal;color:#3495af;">setWithObject</span>:<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"text/plain"</span>]];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><b style="font-family:宋体, Verdana, Arial, Helvetica, sans-serif;font-size:15px;line-height:22px;"><span style="word-wrap:normal;word-break:normal;line-height:22.5px;color:#FF0000;">如何通过URL获取XML数据</span></b></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;color:#333333;"><span style="word-wrap:normal;word-break:normal;line-height:22px;font-size:15px;">xml解析使用</span></span><span style="word-wrap:normal;word-break:normal;line-height:normal;color:#3495af;font-family:Menlo;font-size:11px;">AFXMLRequestOperation，</span><span style="word-wrap:normal;word-break:normal;line-height:22.5px;color:#333333;font-size:15px;">需要实现苹果自带的</span><span style="word-wrap:normal;word-break:normal;line-height:normal;color:#3495af;font-family:Menlo;font-size:11px;">NSXMLParserDelegate</span><span style="word-wrap:normal;word-break:normal;line-height:22.5px;color:#333333;font-size:15px;">委托方法，XML中有一些不需要的协议格式内容，所以就不能像json那样解析，还得实现委托。我之前有想过能否所有的XML链接用一个类处理，而且跟服务端做了沟通，结果很不方便，效果不好。XML大多标签不同，格式也不固定，所以就有问题，使用json就要方便的多。</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;line-height:22.5px;color:#333333;font-size:15px;">第一步；在.h文件中加入委托</span><span style="word-wrap:normal;word-break:normal;line-height:normal;color:#3495af;font-family:Menlo;font-size:11px;">NSXMLParserDelegate</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;">第二步；在.m文件方法中加入代码</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;font-size:11px;color:#3495af;">NSURL</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;font-size:11px;">*url = [</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;font-size:11px;color:#3495af;">NSURL</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;font-size:11px;color:#3495af;">URLWithString</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;font-size:11px;">:</span><span style="word-wrap:normal;word-break:normal;line-height:normal;color:#b4261a;font-family:Menlo;font-size:11px;">@"http://113.106.90.22:5244/sshopinfo"</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;font-size:11px;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;NSURLRequest&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*request = [</span>NSURLRequest requestWithURL<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:url];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;AFXMLRequestOperation&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*operation =</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[</span>AFXMLRequestOperation XMLParserRequestOperatio<wbr>nWithRequest<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:request</span>&nbsp;success<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:^(</span>NSURLRequest&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*request,</span>NSHTTPURLResponse&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*response,</span>&nbsp;NSXMLParser&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*XMLParser) {</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;XMLParser.<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">delegate</span>&nbsp;=&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">self</span>;</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[XMLParser</span>&nbsp;setShouldProcessNamespac<wbr>es<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">YES</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[XMLParser&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">parse</span>];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">failure</span>:^(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSURLRequest</span>&nbsp;*request,&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSHTTPURLResponse</span>&nbsp;*response,&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSError</span>&nbsp;*error,&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSXMLParser</span>*XMLParser) {</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"%@"</span>,error);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[operation&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">start</span>];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;">第三步；在.m文件中实现委托方法</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<wbr></span><span style="word-wrap:normal;word-break:normal;color:#008f00;">//</span><span style="word-wrap:normal;word-break:normal;color:#008f00;font-family:'Heiti sC Light';">在文档开始的时候触发</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">-(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">void</span>)parserDidStartDocument:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSXMLParser</span>&nbsp;*)parser{</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#b4261a;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">(</span>@"<span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';">解析开始！</span>"<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">);</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">}</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:'Heiti sC Light';color:#008f00;"><span style="word-wrap:normal;word-break:normal;font-family:Menlo;">//</span>解析起始标记</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">- (<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">void</span>)parser:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSXMLParser</span>&nbsp;*)parser didStartElement:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSString</span>&nbsp;*)elementName namespaceURI:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSString</span>*)namespaceURI qualifiedName:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSString</span>&nbsp;*)qName attributes:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSDictionary</span>&nbsp;*)attributeDict{</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"</span><span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';color:#b4261a;">标记：</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">%@"</span>,elementName);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;min-height:13px;">&nbsp;<wbr>&nbsp;<wbr>&nbsp;&nbsp;<wbr></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">}</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:'Heiti sC Light';color:#008f00;"><span style="word-wrap:normal;word-break:normal;font-family:Menlo;">//</span>解析文本节点</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">- (<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">void</span>)parser:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSXMLParser</span>&nbsp;*)parser foundCharacters:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSString</span>&nbsp;*)string{</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"</span><span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';color:#b4261a;">值：</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">%@"</span>,string);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">}</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:'Heiti sC Light';color:#008f00;"><span style="word-wrap:normal;word-break:normal;font-family:Menlo;">//</span>解析结束标记</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">- (<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">void</span>)parser:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSXMLParser</span>&nbsp;*)parser didEndElement:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSString</span>&nbsp;*)elementName namespaceURI:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSString</span>*)namespaceURI qualifiedName:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSString</span>&nbsp;*)qName{</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"</span><span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';color:#b4261a;">结束标记：</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">%@"</span>,elementName);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">}</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:'Heiti sC Light';color:#008f00;"><span style="word-wrap:normal;word-break:normal;font-family:Menlo;">//</span>文档结束时触发</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">-(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">void</span>) parserDidEndDocument:(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSXMLParser</span>&nbsp;*)parser{</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#b4261a;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">(</span>@"<span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';">解析结束！</span>"<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">);</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">}</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">运行的结果：<a href="http://photo.blog.sina.com.cn/showpic.html#blogid=68661bd80101r1xz&amp;url=http://album.sina.com.cn/pic/001UxcX6ty6G4h7Cnnj21" target="_blank" style="text-decoration:none;color:#2544a7;"><img src="http://s2.sinaimg.cn/mw690/001UxcX6ty6G4h7Cnnj21&amp;690" real_src="http://s2.sinaimg.cn/mw690/001UxcX6ty6G4h7Cnnj21&amp;690" width="490" height="193" name="image_operate_1851390709938188" alt="iOS开发网络数据之AFNetworking使用" title="iOS开发网络数据之AFNetworking使用" style="margin:0px;padding:0px;border:0px;list-style:none;" /></a><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=68661bd80101r1xz&amp;url=http://album.sina.com.cn/pic/001UxcX6ty6G4h6pA4j13" target="_blank" style="text-decoration:none;color:#2544a7;"></a></p>
<br />
<b style="font-size:15px;line-height:22px;"><span style="word-wrap:normal;word-break:normal;line-height:22.5px;color:#FF0000;">如何使用AFHTTPClient进行web service操作</span></b></div>
<div><span style="word-wrap:normal;word-break:normal;line-height:25px;font-family:'open sans', sans-serif;"><span style="word-wrap:normal;word-break:normal;line-height:21px;">AFHTTPClient处理GET 和 POST请求</span></span><span style="word-wrap:normal;word-break:normal;">.做网页的朋友们这个方法用的比较多。在要经常调用某个请求时，可以封装，节省资源。</span></div>
<div><p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#b4261a;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span><span style="word-wrap:normal;word-break:normal;color:#3495af;">BaseURLString</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>=</span>&nbsp;@"http://www.raywenderlich.com/downloads/weather_sample/"<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">;</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<wbr></span><span style="word-wrap:normal;word-break:normal;">NSURL</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*baseURL = [</span><span style="word-wrap:normal;word-break:normal;">NSURL</span>&nbsp;<span style="word-wrap:normal;word-break:normal;">URLWithString</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:[</span><span style="word-wrap:normal;word-break:normal;">NSString</span>&nbsp;<span style="word-wrap:normal;word-break:normal;">stringWithFormat</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;">BaseURLString</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;NSDictionary&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*parameters = [</span>NSDictionary dictionaryWithObject<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"json"</span>&nbsp;forKey<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"format"</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;AFHTTPClient&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*client = [[</span>AFHTTPClient alloc<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]</span>&nbsp;initWithBaseURL<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:baseURL];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;min-height:13px;">&nbsp;<wbr>&nbsp;<wbr>&nbsp;&nbsp;<wbr></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[client</span>&nbsp;registerHTTPOperationCla<wbr>ss<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:[</span>AFJSONRequestOperation class<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[client</span>&nbsp;setDefaultHeader<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"Accept"</span>&nbsp;value<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"text/html"</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[client&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">postPath</span>:<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"weather.php"</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">parameters</span>:parameters&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">success</span>:^(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">AFHTTPRequestOperation</span>&nbsp;*operation,<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">id</span>&nbsp;responseObject) {</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;NSString<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">* newStr = [[</span>NSString alloc<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]</span>&nbsp;initWithData<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:responseObject</span>&nbsp;encoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span>NSUTF8StringEncoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"POST</span><span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';color:#b4261a;">请求</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">:%@"</span>,newStr);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}</span>failure<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:^(</span>AFHTTPRequestOperation&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*operation,</span>&nbsp;NSError&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*error) {</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"%@"</span>,error);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;min-height:13px;">&nbsp;<wbr>&nbsp;<wbr>&nbsp;&nbsp;<wbr></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;[client&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">getPath</span>:<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"weather.php"</span>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">parameters</span>:parameters&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">success</span>:^(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">AFHTTPRequestOperation</span>&nbsp;*operation,&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#0433ff;">id</span>responseObject) {</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr></span>&nbsp;NSString<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">* newStr = [[</span>NSString alloc<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">]</span>&nbsp;initWithData<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:responseObject</span>&nbsp;encoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:</span>NSUTF8StringEncoding<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"GET</span><span style="word-wrap:normal;word-break:normal;font-family:'Heiti sC Light';color:#b4261a;">请求：</span><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">%@"</span>,newStr);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;color:#3495af;"><span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}</span>failure<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">:^(</span>AFHTTPRequestOperation&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*operation,</span>&nbsp;NSError&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#000000;">*error) {</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#3495af;">NSLog</span>(<span style="word-wrap:normal;word-break:normal;line-height:16.5px;color:#b4261a;">@"%@"</span>,error);</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;}];</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">运行结果：<a href="http://photo.blog.sina.com.cn/showpic.html#blogid=68661bd80101r1xz&amp;url=http://album.sina.com.cn/pic/001UxcX6ty6G4QWipxt0f" target="_blank" style="text-decoration:none;color:#2544a7;"><img src="http://s16.sinaimg.cn/mw690/001UxcX6ty6G4QWipxt0f&amp;690" real_src="http://s16.sinaimg.cn/mw690/001UxcX6ty6G4QWipxt0f&amp;690" width="490" height="214" name="image_operate_76601390709974697" alt="iOS开发网络数据之AFNetworking使用" title="iOS开发网络数据之AFNetworking使用" style="margin:0px;padding:0px;border:0px;list-style:none;" /></a></p>
<br />
</div>
<div>如果需要显示网络活动指示器，可以用下面方法：</div>
<div>[AFNetworkActivityIndicat<wbr>orManager sharedManager].enabled = YES;</div>
<div><p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;"><br />
</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;"><br />
</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;">时间有限，先写到这，因为没有服务端，很多功能没办法测试，如果有的朋友，希望借服务器测试，相互交流：QQ：915893620</span></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;"><br />
</span></p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><b>Error: Error Domain=AFNetworkingErrorDomain Code=-1016 "Request failed: unacceptable content-type: text/html" UserInfo=0x16774de0 {NSErrorFailingURLKey=http://</b><b>192.168.2.2</b><b>:8181/ecar/tsp/uploadLocation?CID=781666&amp;serviceType=1, AFNetworkingOperationFai<wbr>linponseErrorKey= { URL: http://192.168.2.2:8181/ecar/tsp/uploadLocation?CID=781666&amp;serviceType=1 } { status code: 200, headers {</b></p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><b>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;XXX</b></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;">&nbsp;<wbr></p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><b>} }, NSLocalizedDescription=Request failed: unacceptable content-type: text/html}</b></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;line-height:normal;font-size:11px;font-family:Menlo;"><span style="word-wrap:normal;word-break:normal;line-height:22px;color:#333333;font-size:15px;">返回数据格式不对。注销这句话：&nbsp;<wbr></span><span style="word-wrap:normal;word-break:normal;line-height:21px;font-size:14px;">op.responseSerializer = [AFJSONResponseSerializer<wbr>serializer];然后将返回的数据自己转换。</span></p>
</div>
</div></body></html>