<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2015-03-26T02:51:27Z"/><meta name="updated" content="2015-12-23T10:40:25Z"/><title>UIViewController 没有跟着UIWindow一起旋转的原因分析   (2012-07-11 15:50:07)转载▼    标签： 杂谈              转发  对于iPho</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="articalTitle" style="clear:both;line-height:20px;padding-bottom:10px;color:#494949;font-family:Verdana, 宋体, sans-serif;font-size:12px;"><h2 id="t_82b6630601016xid" class="titName SG_txta" style="margin:0px;padding:0px;border:0px;list-style:none;color:#ce3535;font-size:18px;font-family:微软雅黑, 黑体;font-weight:300;display:inline;">UIViewController&nbsp;没有跟着UIWindow一起旋转的原因分析</h2>
&nbsp;<span class="time SG_txtc" style="color:#85837e;white-space:nowrap;font-family:Arial;font-size:10px;margin-left:5px;margin-right:13px;">(2012-07-11 15:50:07)</span><div class="turnBoxzz" style="float:right;"><a class="SG_aBtn SG_aBtn_ico SG_turn" action-type="reblog" action-data="{srcBlog:1, blogId:'82b6630601016xid'}" style="cursor:pointer;padding:0px 0px 0px 3px;overflow:hidden;white-space:nowrap;display:inline-block;margin-right:6px;background-image:url(http://simg.sinajs.cn/blog7newtpl/image/5/5_9/images/sg_newsp.png);position:relative;letter-spacing:5px;width:86px;zoom:1;background-position:0px 0px;background-repeat:no-repeat no-repeat;"><cite style="font-style:normal;line-height:23px;padding:0px 20px 0px 32px;height:23px;min-width:1px;overflow-x:visible;background-image:url(http://simg.sinajs.cn/blog7newtpl/image/5/5_9/images/sg_newsp.png);width:34px;display:inline-block !important;background-position:100% -28px;background-repeat:no-repeat no-repeat;"><img class="SG_icon SG_icon111" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="15" height="15" align="absmiddle" style="margin:0px;padding:0px;border:0px;list-style:none;background-image:url(http://simg.sinajs.cn/blog7style/images/common/sg_icon.png?20131218);position:absolute;left:11px;top:4px;background-position:495px -60px;" />转载<span class="arrow" style="font-size:7px;position:absolute;right:5px;top:2px;">▼</span></cite></a></div>
</div>
<div class="articalTag" id="sina_keyword_ad_area" style="width:690px;clear:both;word-break:break-all;line-height:20px;color:#494949;font-family:Verdana, 宋体, sans-serif;font-size:12px;"><table style="margin:0px;padding:0px;"><tbody><tr><td class="blog_tag" style="margin:0px;padding:0px 10px 0px 0px;font-family:宋体;vertical-align:top;"><span class="SG_txtb" style="color:#85837e;">标签：</span>&nbsp;<h3 style="margin:0px 5px 0px 0px;padding:0px;border:0px;list-style:none;display:inline;font-size:12px;font-weight:normal;"><a href="http://search.sina.com.cn/?c=blog&amp;q=%D4%D3%CC%B8&amp;by=tag" target="_blank" style="text-decoration:none;color:#ce3535;white-space:nowrap;">杂谈</a></h3>
</td>
<td class="blog_class" style="margin:0px;padding:0px;font-family:宋体;vertical-align:top;width:220px;white-space:nowrap;"></td>
</tr>
</tbody>
</table>
</div>
<div id="sina_keyword_ad_area2" class="articalContent " style="width:690px;clear:both;padding-top:18px;padding-bottom:30px;overflow:hidden;font-family:simsun;word-wrap:normal;word-break:normal;line-height:21px;color:#494949;"><div style="text-indent:2em;"><p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;">转发</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;">对于iPhone app,UIViewController类提供了基本的视图管理模式。当设备改变方向的时候view controller的视图会自动随之旋转的。如果视图和子视图的autoresizing属性设置是对的，这时候视图又没有随着设备一起旋转，可能是以下的原因：</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;">1.view controller没有完成代理方法</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;">- (BOOL)shouldAutorotateToInterf<wbr><wbr>aceOrientation:(UIInterfaceOrientation)interfaceOrientation;</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;">也要实现了</span>shouldAutorotateToInterf<wbr><wbr>aceOrientation<span style="word-wrap:normal;word-break:normal;">方法，同时</span>shouldAutorotateToInterf<wbr><wbr>aceOrientation<span style="word-wrap:normal;word-break:normal;">方法要返回YES来支持所有的旋转方向</span></p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;">2.</span>view controller的UIView属性嵌入在UIWindow中，并非是一个附加的view controller</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;">你可能会发现<span style="word-wrap:normal;word-break:normal;">shouldAutorotateToInterf<wbr><wbr>aceOrientation</span>方法只会在view controller启动的时候被调用，不会因为设置的旋转而在被调用。这是因为view controller束缚着他们所管理的视图，view controller是用来处理时间的响应链的一部分。view controller是从UIResponder继承而来，同时他被插入到他所管理的视图和他的superview之间。因此，通常的做法是在你的app中有一个主view controller来作为响应链的一部分。通常来说会添加一个主view controller，例如<span style="word-wrap:normal;word-break:normal;">UINavigationController</span><span style="word-wrap:normal;word-break:normal;">,</span>&nbsp;<span style="word-wrap:normal;word-break:normal;">UITabBarController</span><span style="word-wrap:normal;word-break:normal;">或者</span><span style="word-wrap:normal;word-break:normal;">UIViewController</span>到<span style="word-wrap:normal;word-break:normal;">UIWindow</span>上<span style="word-wrap:normal;word-break:normal;">。</span></p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;">例如</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;">[myWindow addSubview:primaryViewController.view];&nbsp;<wbr><wbr>如果你添加了另外一个view controller的UIView属性到UIWindow（anotherController和主view controller在同一个等级上）[myWindow addSubview:anotherController.view];anotherController将不会接受旋转事件，只有第一个view controller（primaryViewController）会接受旋转事件。</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;">3.你添加了view controller的UIView属性到UIWindow作为subview，但是过早的release它。UIWindow会retain视图，而不是view controller。你不能过早的release他。<span style="word-wrap:normal;word-break:normal;">在</span><span style="word-wrap:normal;word-break:normal;">UIApplicationDelegate</span>子类中定义他为retain属性。</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;">4.在</span>UITabBarController<span style="word-wrap:normal;word-break:normal;">或者</span>UINavigationController<span style="word-wrap:normal;word-break:normal;">中的子view controller没有对同一方向的支持。</span>为了确保所有的子view controller旋转正确，你的每一个view controller，每一个tab或者额navigation都要完成<span style="word-wrap:normal;word-break:normal;">shouldAutorotateToInterf<wbr><wbr>aceOrientation</span>，而且必须支持对于同一方向的旋转，也就是说对于同一方向的位置要返回为YES。</p>
<p style="margin-top:0px;padding:0px;border:0px;list-style:none;word-wrap:normal;word-break:normal;"><span style="word-wrap:normal;word-break:normal;">5.重写</span>-(id)init:<span style="word-wrap:normal;word-break:normal;">或者</span>&nbsp;-(id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle&nbsp;<span style="word-wrap:normal;word-break:normal;">方法的时候没有调用super。</span>对于对象的初始化，在你的view controller的<span style="word-wrap:normal;word-break:normal;">init</span><span style="word-wrap:normal;word-break:normal;">或者</span><span style="word-wrap:normal;word-break:normal;">initWithNibName</span>方法中必须要调用super。</p>
</div>
</div></body></html>