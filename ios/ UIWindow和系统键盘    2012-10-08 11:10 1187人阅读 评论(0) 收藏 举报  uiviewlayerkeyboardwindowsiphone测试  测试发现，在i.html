<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2015-04-07T18:29:17Z"/><meta name="updated" content="2015-04-07T18:29:19Z"/><title> UIWindow和系统键盘    2012-10-08 11:10 1187人阅读 评论(0) 收藏 举报  uiviewlayerkeyboardwindowsiphone测试  测试发现，在i</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="article_title" style="margin:5px 0px;font-size:20px;line-height:30px;font-family:'Microsoft YaHei';">&nbsp;<h1 style="margin:0px;padding:0px;display:inline;font-weight:normal;font-size:20px;vertical-align:middle;"><span class="link_title"><a href="http://blog.csdn.net/leikezhu1981/article/details/8047442" style="color:#000000;text-decoration:none;">UIWindow和系统键盘</a></span></h1>
</div>
<div class="article_manage" style="padding:5px 0px;color:#999999;font-size:12px;line-height:24px;font-family:Arial;text-align:right;"><span class="link_postdate" style="margin:0px 5px 0px 0px;">2012-10-08 11:10</span>&nbsp;<span class="link_view" title="阅读次数" style="margin:0px 5px;padding:0px 0px 0px 14px;background-image:url(http://static.blog.csdn.net/images/ico_view.png);background-position:0% 50%;background-repeat:no-repeat no-repeat;">1187人阅读</span>&nbsp;<span class="link_comments" title="评论次数" style="margin:0px 5px;padding:0px 0px 0px 14px;background-image:url(http://static.blog.csdn.net/images/ico_comm.png);background-position:0% 50%;background-repeat:no-repeat no-repeat;"><a href="http://blog.csdn.net/leikezhu1981/article/details/8047442#comments" style="color:#336699;text-decoration:none;">评论</a>(0)</span>&nbsp;<span class="link_collect" style="margin:0px 5px;"><a title="收藏" style="color:#336699;">收藏</a></span>&nbsp;<span class="link_report" style="margin:0px 5px;"><a href="http://blog.csdn.net/leikezhu1981/article/details/8047442#report" title="举报" style="color:#336699;text-decoration:none;">举报</a></span></div>
<div class="tag2box" style="margin:10px 0px;color:#333333;font-family:Arial, Console, Verdana, 'Courier New';font-size:12px;line-height:normal;"><a href="http://www.csdn.net/tag/uiview" target="_blank" style="color:#336699;text-decoration:none;display:inline-block;padding:4px 10px;line-height:12px;margin-right:10px;border:1px solid #eeeeee;background-color:#eeeeee;border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;">uiview</a><a href="http://www.csdn.net/tag/layer" target="_blank" style="color:#336699;text-decoration:none;display:inline-block;padding:4px 10px;line-height:12px;margin-right:10px;border:1px solid #eeeeee;background-color:#eeeeee;border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;">layer</a><a href="http://www.csdn.net/tag/keyboard" target="_blank" style="color:#336699;text-decoration:none;display:inline-block;padding:4px 10px;line-height:12px;margin-right:10px;border:1px solid #eeeeee;background-color:#eeeeee;border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;">keyboard</a><a href="http://www.csdn.net/tag/windows" target="_blank" style="color:#336699;text-decoration:none;display:inline-block;padding:4px 10px;line-height:12px;margin-right:10px;border:1px solid #eeeeee;background-color:#eeeeee;border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;">windows</a><a href="http://www.csdn.net/tag/iphone" target="_blank" style="color:#336699;text-decoration:none;display:inline-block;padding:4px 10px;line-height:12px;margin-right:10px;border:1px solid #eeeeee;background-color:#eeeeee;border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;">iphone</a><a href="http://www.csdn.net/tag/%e6%b5%8b%e8%af%95" target="_blank" style="color:#336699;text-decoration:none;display:inline-block;padding:4px 10px;line-height:12px;margin-right:10px;border:1px solid #eeeeee;background-color:#eeeeee;border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;">测试</a></div>
<div id="article_content" class="article_content" style="margin:20px 0px 0px;line-height:26px;font-family:Arial;color:#333333;"><div id="sina_keyword_ad_area2" class="articalContent "><p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:'Heiti sC Light';"><strong>测试发现，在iphone程序设计时，弹出系统键盘的时候，有两个UIWindow，其实UIWindow是继承UIView，不要以为他很神秘。</strong></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;min-height:21px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;color:#3d227f;"><span style="color:#b933a1;">for</span>&nbsp;<span style="color:#000000;">(</span><span style="color:#7041a7;">UIWindow</span>&nbsp;<span style="color:#000000;">*w</span>&nbsp;<span style="color:#b933a1;">in</span><span style="color:#000000;">[[</span><span style="color:#7041a7;">UIApplication</span>&nbsp;sharedApplication<span style="color:#000000;">]</span>&nbsp;windows<span style="color:#000000;">])&nbsp;<wbr></span></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;">{</p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr><span style="color:#3d227f;">NSLog</span>(<span style="color:#cf3125;">@"%@"</span>, [w&nbsp;<span style="color:#3d227f;">description</span>] );</p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;">}</p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:'Heiti sC Light';"><strong>输出结果为：</strong></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;"><strong>2012-02-16 18:50:10.286 SogouLetter[6022:15203]&lt;UIWindow: 0xd646a90; frame = (0 0; 320 480); opaque= NO; autoresize = RM+BM; layer = &lt;UIWindowLayer:0xd646b50&gt;&gt;</strong></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;"><strong>2012-02-16 18:50:14.663 SogouLetter[6022:15203]&lt;UITextEffectsWindow: 0x837b4f0; frame = (0 0; 320480); opaque = NO; layer = &lt;UIWindowLayer:0x837b5b0&gt;&gt;</strong></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;min-height:21px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:'Heiti sC Light';"><strong>可以发现：第一个</strong><span style="font-family:Menlo;"><strong>window</strong></span><strong>程序设计时的主界面，而第二个window为系统键盘window，而它的大小也为</strong><span style="font-family:Menlo;"><strong>(00; 320 480)</strong></span><strong>。</strong></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;min-height:21px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;color:#3d227f;"><span style="color:#7041a7;">UIWindow</span><span style="color:#000000;">* tempWindow = [[[</span><span style="color:#7041a7;">UIApplication</span>&nbsp;sharedApplication<span style="color:#000000;">]</span>windows<span style="color:#000000;">]</span>&nbsp;objectAtIndex<span style="color:#000000;">:</span><span style="color:#2934d5;">1</span><span style="color:#000000;">];</span></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;"><span style="color:#b933a1;">int</span>&nbsp;viewCount =[tempWindow.<span style="color:#7041a7;">subviews</span><span style="color:#3d227f;">count</span>];</p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;"><span style="color:#b933a1;">for</span>&nbsp;(<span style="color:#b933a1;">int</span>&nbsp;i =&nbsp;<span style="color:#2934d5;">0</span>; i &lt; viewCount; i++)</p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;">{</p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;keyboard =[tempWindow.<span style="color:#7041a7;">subviews</span><span style="color:#3d227f;">objectAtIndex</span>:i];</p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;">&nbsp;<wbr>&nbsp;&nbsp;<wbr>&nbsp;&nbsp;<wbr><span style="color:#3d227f;">NSLog</span>(<span style="color:#cf3125;">@"%@"</span>,[keyboard&nbsp;<span style="color:#3d227f;">description</span>] );</p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;">}</p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:'Heiti sC Light';">输出结果为：</p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;"><strong>2012-02-16 18:57:41.161 SogouLetter[6088:15203]&lt;UIPeripheralHostView: 0x857c560; frame = (0 264;320 216); autoresizesSubviews = NO; layer =&lt;UIPeripheralHostLayer:0x857c510&gt;&gt;</strong></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;"><strong>2012-02-16 18:57:41.161 SogouLetter[6088:15203]&lt;UIKeyboardCornerView: 0x8586860; frame = (0 473; 77); opaque = NO; userInteractionEnabled = NO; animations = {position=&lt;CABasicAnimation:0x83587f0&gt;; }; layer = &lt;CALayer:0x85868c0&gt;&gt;</strong></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;"><strong>2012-02-16 18:57:41.162 SogouLetter[6088:15203]&lt;UIKeyboardCornerView: 0x8586a40; frame = (313 473;7 7); opaque = NO; userInteractionEnabled = NO; animations = {position=&lt;CABasicAnimation:0x837cf00&gt;; }; layer = &lt;CALayer:0x8586a80&gt;&gt;</strong></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:Menlo;min-height:21px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:'Heiti sC Light';"><strong>可见，第一个为系统键盘的view的大小，后面里两个为cornerView，且为透明的。&nbsp;<wbr></strong></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:'Heiti sC Light';min-height:19px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:'Heiti sC Light';"><strong>由此可以知道，系统键盘默认在最前面，如何才能挡住系统键盘呢？</strong></p>
<p style="margin-top:0px;margin-bottom:0px;font-size:18px;line-height:normal;font-family:'Heiti sC Light';"><strong>自己感觉是在系统键盘所在的UIWindow（UIView的基类）添加新的UIControl就可以。</strong></p>
</div>
</div></body></html>