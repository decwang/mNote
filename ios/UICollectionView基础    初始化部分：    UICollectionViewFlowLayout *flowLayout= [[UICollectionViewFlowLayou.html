<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2016-10-18T10:23:29Z"/><meta name="updated" content="2016-10-18T10:23:31Z"/><title>UICollectionView基础    初始化部分：    UICollectionViewFlowLayout *flowLayout= [[UICollectionViewFlowLayou</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><h1 class="postTitle" style="margin:20px 0px 10px;padding:0px;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#dddddd;font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;widows:1;"><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/wayne23/p/4013522.html" style="margin:0px;padding:0px;text-decoration:none;color:#333333;">UICollectionView基础</a></h1>
<div class="clear" style="margin:0px;padding:0px;clear:both;color:#333333;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:24px;widows:1;"></div>
<div class="postBody" style="margin:0px;padding:0px;color:#333333;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:24px;widows:1;"><div id="cnblogs_post_body" style="margin:0px 0px 20px;padding:0px;word-break:break-word;"><p class="p1" style="margin:10px auto;padding:0px;">初始化部分：</p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">UICollectionViewFlowLayout *flowLayout=<span style="margin:0px;padding:0px;line-height:1.5 !important;"> [[UICollectionViewFlowLayout alloc]init];
self.myCollectionView </span>= [[UICollectionView alloc] initWithFrame:CGRectMake(<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">20</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">20</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">250</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">350</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">) collectionViewLayout:flowLayout];
self.myCollectionView.backgroundColor </span>=<span style="margin:0px;padding:0px;line-height:1.5 !important;"> [UIColor grayColor];
[self.myCollectionView registerClass:[UICollectionViewCell </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">class</span>] forCellWithReuseIdentifier:@“myCell<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">];</span> self.myCollectionView.<span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">delegate</span> =<span style="margin:0px;padding:0px;line-height:1.5 !important;"> self;
self.myCollectionView.dataSource </span>=<span style="margin:0px;padding:0px;line-height:1.5 !important;"> self;

[self.view addSubview:self.myCollectionView];</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<hr style="margin:0px;padding:0px;" />
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><span style="margin:0px;padding:0px;font-size:18px;"><strong style="margin:0px;padding:0px;">UICollectionViewLayout</strong></span></p>
<p class="p1" style="margin:10px auto;padding:0px;">UICollectionViewLayout决定了UICollectionView如何显示在界面上，Apple提供了一个最简单的默认layout对象：UICollectionViewFlowLayout。</p>
<p class="p1" style="margin:10px auto;padding:0px;">Flow Layout是一个Cells的线性布局方案，并具有页面和页脚。其可定制的内容如下：</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">itemSize属性</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;">设定全局的Cell尺寸，如果想要单独定义某个Cell的尺寸，可以使用下面方法：</p>
<p class="p1" style="margin:10px auto;padding:0px;">-&nbsp;(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;"><span class="s1" style="margin:0px;padding:0px;"><span class="s2" style="margin:0px;padding:0px;">minimumLineSpacing<span class="s3" style="margin:0px;padding:0px;">属性</span></span></span></strong></p>
<p class="p1" style="margin:10px auto;padding:0px;">设定全局的行间距，如果想要设定指定区内Cell的最小行距，可以使用下面方法：</p>
<p class="p1" style="margin:10px auto;padding:0px;">-&nbsp;(CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;"><span class="s1" style="margin:0px;padding:0px;"><span class="s2" style="margin:0px;padding:0px;">minimumInteritemSpacing<span class="s3" style="margin:0px;padding:0px;">属性</span></span></span></strong></p>
<p class="p1" style="margin:10px auto;padding:0px;">设定全局的Cell间距，如果想要设定指定区内Cell的最小间距，可以使用下面方法：</p>
<p class="p1" style="margin:10px auto;padding:0px;">- (<span class="s1" style="margin:0px;padding:0px;">CGFloat)collectionView:(<span class="s1" style="margin:0px;padding:0px;">UICollectionView *)collectionView layout:(<span class="s1" style="margin:0px;padding:0px;">UICollectionViewLayout*)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(<span class="s1" style="margin:0px;padding:0px;">NSInteger)section;</span></span></span></span></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;"><span class="s1" style="margin:0px;padding:0px;"><span class="s2" style="margin:0px;padding:0px;">scrollDirection<span class="s3" style="margin:0px;padding:0px;">属性</span></span></span></strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><span class="s1" style="margin:0px;padding:0px;">设定滚动方向，有<span class="s2" style="margin:0px;padding:0px;">UICollectionViewScrollDirectionVertical<span class="s1" style="margin:0px;padding:0px;">和<span class="s2" style="margin:0px;padding:0px;">UICollectionViewScrollDirectionHorizontal<span class="s1" style="margin:0px;padding:0px;">两个值。</span></span></span></span></span></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">headerReferenceSize<span class="s1" style="margin:0px;padding:0px;">属性与footerReferenceSize<span class="s1" style="margin:0px;padding:0px;">属性</span></span></strong></p>
<p class="p1" style="margin:10px auto;padding:0px;">设定页眉和页脚的全局尺寸，需要注意的是，根据滚动方向不同，header和footer的width和height中只有一个会起作用。如果要单独设置指定区内的页面和页脚尺寸，可以使用下面方法：</p>
<p class="p1" style="margin:10px auto;padding:0px;">-&nbsp;(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section</p>
<p class="p1" style="margin:10px auto;padding:0px;">-&nbsp;(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForFooterInSection:(NSInteger)section</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;"><span class="s1" style="margin:0px;padding:0px;">sectionInset<span class="s2" style="margin:0px;padding:0px;">属性</span></span></strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><span class="s1" style="margin:0px;padding:0px;">设定全局的区内边距，如果想要设定指定区的内边距，可以使用下面方法：</span></p>
<p class="p1" style="margin:10px auto;padding:0px;">- (<span class="s1" style="margin:0px;padding:0px;">UIEdgeInsets)collectionView:(<span class="s1" style="margin:0px;padding:0px;">UICollectionView *)collectionView layout:(<span class="s1" style="margin:0px;padding:0px;">UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(<span class="s1" style="margin:0px;padding:0px;">NSInteger)section;</span></span></span></span></p>
<hr style="margin:0px;padding:0px;" />
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><span class="s1" style="margin:0px;padding:0px;">然后需要实现三种类型的委托：UICollectionViewDataSource<span class="s2" style="margin:0px;padding:0px;">, UICollectionViewDelagate<span class="s2" style="margin:0px;padding:0px;">和UICollectionViewDelegateFlowLayout<span class="s2" style="margin:0px;padding:0px;">。</span></span></span></span></p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;"><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">@interface</span> ViewController : UIViewController &lt;UICollectionViewDelegateFlowLayout, UICollectionViewDataSource&gt;</pre></div>
<p class="p1" style="margin:10px auto;padding:0px;">因为UICollectionViewDelegateFlowLayout实际上是UICollectionViewDelegate的一个子协议，它继承了UICollectionViewDelegate，所以只需要在声明处写上<span class="s1" style="margin:0px;padding:0px;">UICollectionViewDelegateFlowLayout就行了。</span></p>
<hr style="margin:0px;padding:0px;" />
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><span style="margin:0px;padding:0px;font-size:18px;"><strong style="margin:0px;padding:0px;">UICollectionViewDataSource</strong></span></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(<span class="s1" style="margin:0px;padding:0px;">NSInteger</span>)numberOfSectionsInCollectionView:(<span class="s1" style="margin:0px;padding:0px;">UICollectionView</span>&nbsp;*)collectionView</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">返回collection view里区(section)的个数，如果没有实现该方法，将默认返回1：</strong></p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)collectionView
{
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span> <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">2</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">;
}</span></pre></div>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(</strong><span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">NSInteger</strong></span><strong style="margin:0px;padding:0px;">)collectionView:(</strong><span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">UICollectionView</strong></span><strong style="margin:0px;padding:0px;">&nbsp;*)collectionView numberOfItemsInSection:(</strong><span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">NSInteger</strong></span><strong style="margin:0px;padding:0px;">)section</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">返回指定区(section)包含的数据源条目数(number of items)，该方法必须实现：</strong></p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">- (NSInteger)collectionView:(UICollectionView *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)collectionView numberOfItemsInSection:(NSInteger)section
{
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span> <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">7</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">;
}</span></pre></div>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(</strong><span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">UICollectionViewCell</strong></span><strong style="margin:0px;padding:0px;">&nbsp;*)collectionView:(</strong><span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">UICollectionView</strong></span><strong style="margin:0px;padding:0px;">&nbsp;*)collectionView cellForItemAtIndexPath:(</strong><span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">NSIndexPath</strong></span><strong style="margin:0px;padding:0px;">&nbsp;*)indexPath</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">返回某个indexPath对应的cell，该方法必须实现：</strong></p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)indexPath
{
    UICollectionViewCell </span>*cell = [collectionView dequeueReusableCellWithReuseIdentifier:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">myCell</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> forIndexPath:indexPath];
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">if</span>(indexPath.section==<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">0</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">)
    {
        cell.backgroundColor </span>=<span style="margin:0px;padding:0px;line-height:1.5 !important;"> [UIColor redColor];
    }
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">else</span> <span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">if</span>(indexPath.section==<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">1</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">)
    {
        cell.backgroundColor </span>=<span style="margin:0px;padding:0px;line-height:1.5 !important;"> [UIColor greenColor];
    }
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> cell;
}</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p class="p1" style="margin:10px auto;padding:0px;">UICollectionViewCell<span class="s1" style="margin:0px;padding:0px;">结构上相对比较简单，由下至上：</span></p>
<ul class="ul1" style="margin:0px 0px 0px 30px;padding:0px;"><li class="li1" style="margin:0px;padding:0px;list-style:disc;"><span class="s1" style="margin:0px;padding:0px;">首先是cell<span class="s1" style="margin:0px;padding:0px;">本身作为容器view</span></span></li>
<li class="li1" style="margin:0px;padding:0px;list-style:disc;"><span class="s1" style="margin:0px;padding:0px;">然后是一个大小自动适应整个cell<span class="s1" style="margin:0px;padding:0px;">的backgroundView<span class="s1" style="margin:0px;padding:0px;">，用作cell<span class="s1" style="margin:0px;padding:0px;">平时的背景</span></span></span></span></li>
<li class="li1" style="margin:0px;padding:0px;list-style:disc;"><span class="s1" style="margin:0px;padding:0px;">再其次是selectedBackgroundView<span class="s1" style="margin:0px;padding:0px;">，是cell<span class="s1" style="margin:0px;padding:0px;">被选中时的背景</span></span></span></li>
<li class="li1" style="margin:0px;padding:0px;list-style:disc;"><span class="s1" style="margin:0px;padding:0px;">最后是一个contentView<span class="s1" style="margin:0px;padding:0px;">，自定义内容应被加在这个view<span class="s1" style="margin:0px;padding:0px;">上</span></span></span></li>
</ul>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(</strong><span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">UICollectionReusableView</strong></span><strong style="margin:0px;padding:0px;">&nbsp;*)collectionView:(</strong><span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">UICollectionView</strong></span><strong style="margin:0px;padding:0px;">&nbsp;*)collectionView viewForSupplementaryElementOfKind:(</strong><span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">NSString</strong></span><strong style="margin:0px;padding:0px;">&nbsp;*)kind atIndexPath:(</strong><span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">NSIndexPath</strong></span><strong style="margin:0px;padding:0px;">&nbsp;*)indexPath</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">为collection view添加一个补充视图(页眉或页脚)</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">设定页眉的尺寸</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForFooterInSection:(NSInteger)section</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">设定页脚的尺寸</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(void)registerClass:(Class)viewClass forSupplementaryViewOfKind:(<span class="s1" style="margin:0px;padding:0px;">NSString</span>&nbsp;*)elementKind withReuseIdentifier:(<span class="s1" style="margin:0px;padding:0px;">NSString</span>&nbsp;*)identifier</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;">添加页眉和页脚以前需要注册类和标识：</p>
<hr style="margin:0px;padding:0px;" />
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;">添加补充视图的代码示例：</p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">[self.myCollectionView registerClass:[MyHeadView <span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">class</span>] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">hxwHeader</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">];
[self.myCollectionView registerClass:[MyHeadView </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">class</span>] forSupplementaryViewOfKind:UICollectionElementKindSectionFooter withReuseIdentifier:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">hxwHeader</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">];</span>-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section
{
    CGSize size </span>= {<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">240</span>,<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">25</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">};
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> size;
}</span>-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)collectionViewLayout referenceSizeForFooterInSection:(NSInteger)section
{
    CGSize size </span>= {<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">240</span>,<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">25</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">};
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> size;
}</span>- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)indexPath
{
    MyHeadView </span>*<span style="margin:0px;padding:0px;line-height:1.5 !important;">headView;
    
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">if</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">([kind isEqual:UICollectionElementKindSectionHeader])
    {
         headView </span>= [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">hxwHeader</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> forIndexPath:indexPath];
        [headView setLabelText:[NSString stringWithFormat:</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">section %d's header</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">,indexPath.section]];
    }
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">else</span> <span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">if</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">([kind isEqual:UICollectionElementKindSectionFooter])
    {
        headView </span>= [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionFooter withReuseIdentifier:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">hxwHeader</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> forIndexPath:indexPath];
        [headView setLabelText:[NSString stringWithFormat:</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">section %d's footer</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">,indexPath.section]];
    }
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> headView;
}</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;">MyHeadView.h</p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;"><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">#import</span> &lt;UIKit/UIKit.h&gt;<span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">@interface</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> MyHeadView : UICollectionReusableView</span>- (<span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">void</span>) setLabelText:(NSString *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)text;</span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">@end</span></pre></div>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;">MyHeadView.m</p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;"><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">#import</span> <span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">MyHeadView.h</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span> <span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">@interface</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> MyHeadView()

@property (strong, nonatomic) UILabel </span>*<span style="margin:0px;padding:0px;line-height:1.5 !important;">label;</span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">@end</span> <span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">@implementation</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> MyHeadView</span>- (<span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">id</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">)initWithFrame:(CGRect)frame
{
    self </span>=<span style="margin:0px;padding:0px;line-height:1.5 !important;"> [super initWithFrame:frame];
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">if</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> (self)
    {
        self.label </span>=<span style="margin:0px;padding:0px;line-height:1.5 !important;"> [[UILabel alloc] init];
        self.label.font </span>= [UIFont systemFontOfSize:<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">18</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">];
        [self addSubview:self.label];
    }
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> self;
}</span>- (<span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">void</span>) setLabelText:(NSString *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)text
{
    self.label.text </span>=<span style="margin:0px;padding:0px;line-height:1.5 !important;"> text;
    [self.label sizeToFit];
}</span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">@end</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;">在注册Cell和补充视图时，也可以用新建xib文件的方式：</p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">[self.myCollectionView registerNib:[UINib nibWithNibName:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">MyCollectionCell</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span> bundle:nil] forCellWithReuseIdentifier:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">hxwCell</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">];

[self.myCollectionView registerNib:[UINib nibWithNibName:</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">MySupplementaryView</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span> bundle:nil] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">hxwHeader</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">];
    
[self.myCollectionView registerNib:[UINib nibWithNibName:</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">MySupplementaryView</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span> bundle:nil] forSupplementaryViewOfKind:UICollectionElementKindSectionFooter withReuseIdentifier:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">hxwFooter</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span>];</pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p class="p1" style="margin:10px auto;padding:0px;">用这种方式注册后，甚至可以不用新建类去绑定这个xib，直接通过viewWithTag的方式获取xib里的控件：</p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">UICollectionReusableView *view =  [collectionView dequeueReusableSupplementaryViewOfKind :kind withReuseIdentifier:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">hxwHeader</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> forIndexPath:indexPath];

UILabel </span>*label = (UILabel *)[view viewWithTag:<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">1</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">];

label.text </span>= <span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">empty</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span>;</pre></div>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<hr style="margin:0px;padding:0px;" />
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><span style="margin:0px;padding:0px;font-size:18px;"><strong style="margin:0px;padding:0px;">UICollectionViewDelegateFlowLayout</strong></span></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">设定指定Cell的尺寸</strong></p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)indexPath
{
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">if</span>(indexPath.section==<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">0</span> &amp;&amp; indexPath.row==<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">1</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">)
    {
        </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span> CGSizeMake(<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">50</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">50</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">);
    }
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">else</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">     {
        </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span> CGSizeMake(<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">75</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">30</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">);
    }
}</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">- (<span class="s1" style="margin:0px;padding:0px;">UIEdgeInsets)collectionView:(<span class="s1" style="margin:0px;padding:0px;">UICollectionView *)collectionView layout:(<span class="s1" style="margin:0px;padding:0px;">UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(<span class="s1" style="margin:0px;padding:0px;">NSInteger)section;</span></span></span></span></strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">设定collectionView(指定区)的边距</strong></p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)collectionViewLayout insetForSectionAtIndex:(NSInteger)section
{
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">if</span>(section==<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">0</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">)
    {
        </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span> UIEdgeInsetsMake(<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">35</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">25</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">15</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">25</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">);
    }
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">else</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">     {
        </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span> UIEdgeInsetsMake(<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">15</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">15</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">15</span>, <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">15</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">);
    }
}</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;"><span class="s1" style="margin:0px;padding:0px;">设定指定区内Cell的最小行距，也可以直接设置UICollectionViewFlowLayout<span class="s2" style="margin:0px;padding:0px;">的minimumLineSpacing<span class="s2" style="margin:0px;padding:0px;">属性</span></span></span></strong></p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*<span style="margin:0px;padding:0px;line-height:1.5 !important;">)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section
{
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">if</span>(section==<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">0</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">)
    {
        </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span> <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">10.0</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">;
    }
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">else</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">     {
        </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span> <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">20.0</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">;
    }
}</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">- (<span class="s1" style="margin:0px;padding:0px;">CGFloat)collectionView:(<span class="s1" style="margin:0px;padding:0px;">UICollectionView *)collectionView layout:(<span class="s1" style="margin:0px;padding:0px;">UICollectionViewLayout*)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(<span class="s1" style="margin:0px;padding:0px;">NSInteger)section;</span></span></span></span></strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;"><span class="s1" style="margin:0px;padding:0px;">设定指定区内Cell的最小间距，也可以直接设置UICollectionViewFlowLayout<span class="s2" style="margin:0px;padding:0px;">的<span class="s3" style="margin:0px;padding:0px;">minimumInteritemSpacing<span class="s2" style="margin:0px;padding:0px;">属性</span></span></span></span></strong></p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*<span style="margin:0px;padding:0px;line-height:1.5 !important;">)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(NSInteger)section
{
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">if</span>(section==<span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">0</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">)
    {
        </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span> <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">10.0</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">;
    }
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">else</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">     {
        </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span> <span style="margin:0px;padding:0px;color:#800080;line-height:1.5 !important;">20.0</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">;
    }
}</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
<hr style="margin:0px;padding:0px;" />
<p class="p1" style="margin:10px auto;padding:0px;"><span style="margin:0px;padding:0px;font-size:18px;"><strong style="margin:0px;padding:0px;">UICollectionViewDelegate</strong></span></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(void)collectionView:(<span class="s1" style="margin:0px;padding:0px;">UICollectionView</span>&nbsp;*)collectionView didSelectItemAtIndexPath:(<span class="s1" style="margin:0px;padding:0px;">NSIndexPath</span>&nbsp;*)indexPath</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">当指定indexPath处的item被选择时触发</strong></p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">- (<span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">void</span>)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)indexPath
{
[self.myArray removeObjectAtIndex:indexPath.row];

[collectionView deleteItemsAtIndexPaths:[NSArray arrayWithObject:indexPath]];
}</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p class="p1" style="margin:10px auto;padding:0px;">P.s. 当你删除或添加元素时，一定要更新<span class="s1" style="margin:0px;padding:0px;"><strong style="margin:0px;padding:0px;">numberOfItemsInSection</strong>的返回情况。</span></p>
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(void)collectionView:(<span class="s1" style="margin:0px;padding:0px;">UICollectionView</span>&nbsp;*)collectionView didDeselectItemAtIndexPath:(<span class="s1" style="margin:0px;padding:0px;">NSIndexPath</span>&nbsp;*)indexPath</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;">当指定indexPath处的item被取消选择时触发，仅在允许多选时被调用</p>
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;">下面是三个和高亮有关的方法：</p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(BOOL)collectionView:(<span class="s1" style="margin:0px;padding:0px;">UICollectionView</span>&nbsp;*)collectionView shouldHighlightItemAtIndexPath:(<span class="s1" style="margin:0px;padding:0px;">NSIndexPath</span>&nbsp;*)indexPath</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(void)collectionView:(<span class="s1" style="margin:0px;padding:0px;">UICollectionView</span>&nbsp;*)collectionView didHighlightItemAtIndexPath:(<span class="s1" style="margin:0px;padding:0px;">NSIndexPath</span>&nbsp;*)indexPath</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;"><strong style="margin:0px;padding:0px;">-&nbsp;(void)collectionView:(<span class="s1" style="margin:0px;padding:0px;">UICollectionView</span>&nbsp;*)collectionView didUnhighlightItemAtIndexPath:(<span class="s1" style="margin:0px;padding:0px;">NSIndexPath</span>&nbsp;*)indexPath</strong></p>
<p class="p1" style="margin:10px auto;padding:0px;">&nbsp;</p>
<p class="p1" style="margin:10px auto;padding:0px;">事件的处理顺序如下：</p>
<ol class="ol1" style="margin:0px;padding:0px 0px 0px 40px;"><li class="li1" style="margin:0px;padding:0px;list-style:decimal;">手指按下</li>
<li class="li2" style="margin:0px;padding:0px;list-style:decimal;"><span class="s1" style="margin:0px;padding:0px;">shouldHighlightItemAtIndexPath (<span class="s2" style="margin:0px;padding:0px;">如果返回YES<span class="s2" style="margin:0px;padding:0px;">则向下执行，否则执行到这里为止)</span></span></span></li>
<li class="li2" style="margin:0px;padding:0px;list-style:decimal;"><span class="s1" style="margin:0px;padding:0px;">didHighlightItemAtIndexPath (<span class="s2" style="margin:0px;padding:0px;">高亮)</span></span></li>
<li class="li2" style="margin:0px;padding:0px;list-style:decimal;"><span class="s1" style="margin:0px;padding:0px;">手指松开</span></li>
<li class="li2" style="margin:0px;padding:0px;list-style:decimal;"><span class="s1" style="margin:0px;padding:0px;">didUnhighlightItemAtIndexPath (<span class="s2" style="margin:0px;padding:0px;">取消高亮)</span></span></li>
<li class="li2" style="margin:0px;padding:0px;list-style:decimal;"><span class="s1" style="margin:0px;padding:0px;">shouldSelectItemAtIndexPath (<span class="s2" style="margin:0px;padding:0px;">如果返回YES<span class="s2" style="margin:0px;padding:0px;">则向下执行，否则执行到这里为止)</span></span></span></li>
<li class="li2" style="margin:0px;padding:0px;list-style:decimal;"><span class="s1" style="margin:0px;padding:0px;">didSelectItemAtIndexPath (<span class="s2" style="margin:0px;padding:0px;">执行选择事件)</span></span></li>
</ol>
<p class="p1" style="margin:10px auto;padding:0px;">如果只是简单实现点击后cell改变显示状态，只需要在<span class="s1" style="margin:0px;padding:0px;">cellForItemAtIndexPath方法里返回cell时，指定cell的selectedBackgroundView：</span></p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)indexPath
{
    UICollectionViewCell </span>*cell = [collectionView dequeueReusableCellWithReuseIdentifier:<span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">@"</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">myCell</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">"</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> forIndexPath:indexPath];
    
    UIView</span>* selectedBGView =<span style="margin:0px;padding:0px;line-height:1.5 !important;"> [[UIView alloc] initWithFrame:cell.bounds];
    selectedBGView.backgroundColor </span>=<span style="margin:0px;padding:0px;line-height:1.5 !important;"> [UIColor blueColor];
    cell.selectedBackgroundView </span>=<span style="margin:0px;padding:0px;line-height:1.5 !important;"> selectedBGView;
    
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> cell;
}</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p class="p1" style="margin:10px auto;padding:0px;">如果要实现点击时(手指未松开)的显示状态与点击后(手指松开)的显示状态，则需要通过上面提到的方法来实现：</p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;border:1px solid #cccccc;overflow:auto;color:#000000;font-family:'Courier New' !important;font-size:12px !important;background-color:#f5f5f5;"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:'Courier New' !important;">- (BOOL)collectionView:(UICollectionView *)collectionView shouldHighlightItemAtIndexPath:(NSIndexPath *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)indexPath
{
    </span><span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">return</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> YES;
}</span>- (<span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">void</span>)collectionView:(UICollectionView *)colView didHighlightItemAtIndexPath:(NSIndexPath *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)indexPath
{
    UICollectionViewCell</span>* cell =<span style="margin:0px;padding:0px;line-height:1.5 !important;"> [colView cellForItemAtIndexPath:indexPath];
    
    [cell setBackgroundColor:[UIColor purpleColor]];
}</span>- (<span style="margin:0px;padding:0px;color:#0000ff;line-height:1.5 !important;">void</span>)collectionView:(UICollectionView *)colView  didUnhighlightItemAtIndexPath:(NSIndexPath *<span style="margin:0px;padding:0px;line-height:1.5 !important;">)indexPath
{
    UICollectionViewCell</span>* cell =<span style="margin:0px;padding:0px;line-height:1.5 !important;"> [colView cellForItemAtIndexPath:indexPath];
    
    [cell setBackgroundColor:[UIColor yellowColor]];
}</span></pre><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;"><span class="cnblogs_code_copy" style="margin:0px;padding:0px 5px 0px 0px;line-height:1.5 !important;"><a title="复制代码" style="margin:0px;padding:0px;border:none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px;padding:0px;max-width:900px;border:none !important;" /></a></span></div>
</div>
<p style="margin:10px auto;padding:0px;">&nbsp;</p>
</div>
</div></body></html>