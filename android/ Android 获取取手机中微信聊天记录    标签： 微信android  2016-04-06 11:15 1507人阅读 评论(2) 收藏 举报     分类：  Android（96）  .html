<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content=mNote Mac 2.5.11"/><meta name="created" content="2016-10-08T07:33:08Z"/><meta name="updated" content="2016-10-08T09:04:15Z"/><title> Android 获取取手机中微信聊天记录    标签： 微信android  2016-04-06 11:15 1507人阅读 评论(2) 收藏 举报     分类：  Android（96）  </title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div class="article_title" style="margin:5px 0px;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-size:20px;line-height:30px;font-family:'Microsoft YaHei';widows:1;">&nbsp;<h1 style="margin:0px;padding:0px;display:inline;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-weight:normal;font-size:20px;line-height:30px;vertical-align:middle;"><span class="link_title"><a href="http://blog.csdn.net/f2006116/article/details/51073202" style="color:#333333;text-decoration:none;">Android 获取取手机中微信聊天记录</a></span></h1>
</div>
<div class="article_manage clearfix" style="padding:0px 20px 5px;color:#999999;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-size:12px;line-height:22px;font-family:Arial;text-align:right;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:#ededed;margin:0px -20px;overflow:hidden;widows:1;"><div class="article_l" style="width:946px;float:left;"><span class="link_categories" style="margin:0px 5px;float:left;">标签：&nbsp;<a href="http://www.csdn.net/tag/%e5%be%ae%e4%bf%a1" target="_blank" style="color:#ff9900;text-decoration:none;display:inline-block;margin-right:10px;">微信</a><a href="http://www.csdn.net/tag/android" target="_blank" style="color:#ff9900;text-decoration:none;display:inline-block;margin-right:10px;">android</a></span></div>
<div class="article_r"><span class="link_postdate" style="margin:0px 5px 0px 0px;">2016-04-06 11:15</span>&nbsp;<span class="link_view" title="阅读次数" style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(http://static.blog.csdn.net/images/ico_view.png) 0% 50% no-repeat;">1507人阅读</span>&nbsp;<span class="link_comments" title="评论次数" style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(http://static.blog.csdn.net/images/ico_comm.png) 0% 50% no-repeat;"><a href="http://blog.csdn.net/f2006116/article/details/51073202#comments" style="color:#ff9900;text-decoration:none;">评论</a>(2)</span>&nbsp;<span class="link_collect tracking-ad" data-mod="popu_171" style="margin:0px 5px;"><a title="收藏" target="_blank" style="color:#ff9900;">收藏</a></span>&nbsp;<span class="link_report" style="margin:0px 5px;"><a href="http://blog.csdn.net/f2006116/article/details/51073202#report" title="举报" style="color:#ff9900;text-decoration:none;">举报</a></span></div>
</div>
<div class="category clearfix" style="margin:0px -20px;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:#ededed;padding:5px 20px;font-family:Arial, Console, Verdana, 'Courier New';font-size:12px;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:normal;widows:1;"><div class="category_l" style="display:inline-block;font-size:14px;color:#333333;width:70px;float:left;line-height:28px;"><img src="http://static.blog.csdn.net/images/category_icon.jpg" style="border:none;vertical-align:middle;" />&nbsp;<span style="display:inline-block;vertical-align:middle;">分类：</span></div>
<div class="category_r" style="display:inline-block;font-size:14px;color:#df3434;float:left;width:851.391px;"><label style="display:inline-block;margin-left:15px;cursor:pointer;line-height:28px;position:relative;">Android（96）&nbsp;<img class="arrow-down" src="http://static.blog.csdn.net/images/arrow_triangle%20_down.jpg" style="border:none;display:inline;" /></label></div>
</div>
<div id="article_content" class="article_content" style="margin:20px 0px 0px;font-variant-ligatures:normal;font-variant-position:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;line-height:26px;font-family:Arial;widows:1;"><p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">关于如何在&nbsp;<a href="http://lib.csdn.net/base/15" class="replace_word" title="undefined" target="_blank" style="color:#df3434;text-decoration:none;font-weight:bold;">Android</a>&nbsp;手机上窃取微信聊天记录。</p>
<a target="_blank" id="more" style="color:#258fb8;margin:0px;padding:0px;border:0px;outline:none;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;"></a><p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">这几天事情比较多，可还是想尽快写下这篇文章。</p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">本以为微信的聊天记录以我本人现存能力获取不到，但经过一番尝试，还是成功了。前提：手机需要已经&nbsp;<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size:14px;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">root</code>。</p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">在我的直觉里，微信的聊天记录一定会是加密的，而且是用了现代密码学中的加密算法，只要官方保存好密钥那么我等平民不可能获取得到。而接下来，我想说的是我等平民如何能够获取到微信的所有聊天记录。</p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">一般来说，Android 应用程序的数据库文件会保存在&nbsp;<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size:14px;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">/data/data/packagename/database</code>&nbsp;文件夹下，而微信稍稍有些不同，但也不难发现其数据库文件保存位置，位于：<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size:14px;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">/data/data/com.tencent.mm/MicroMsg</code>&nbsp;路径下，注意这里有两个像是乱码的很长名字的文件夹，这两个文件夹正是用户的个人信息保存的位置（我这里有两个，估计是之前谁用我的手机登录过微信。。。），再看这个文件夹里面有一个很显眼的数据库文件&nbsp;<span style="margin:0px;padding:0px;border:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;"><code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size:14px;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">EnMicroMsg.db</code></span>&nbsp;，凭猜测也可以感觉到前缀 En 应该是 Encrypt 的缩写，果然，用 SQLite Professional 打开提示该数据库文件被加密，具体如下几幅图</p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;"><img src="http://7xivx9.com1.z0.glb.clouddn.com/wxwx1.png" alt="image" style="border:0px;margin:0px;padding:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;" /><br />
<img src="http://7xivx9.com1.z0.glb.clouddn.com/wxwx2.png" alt="image" style="border:0px;margin:0px;padding:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;" /><br />
<img src="http://7xivx9.com1.z0.glb.clouddn.com/wxwx3.png" alt="image" style="border:0px;margin:0px;padding:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;" /></p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">说实话，给 SQLite 加密，我还是第一次遇到。于是放狗搜，发现有一个软件叫做 sqlcipher.exe，在有密钥的情况下可以打开被加密的 db 文件（这个软件国内很难找，我放在了我的七牛云存储上，<a target="_blank" href="http://7xivx9.com1.z0.glb.clouddn.com/wxsqlcipher.exe" rel="external" style="color:#258fb8;text-decoration:none;margin:0px;padding:0px;border:0px;outline:none;font-style:inherit;font-family:inherit;vertical-align:baseline;">点此下载</a>）。那么问题来了，密钥是什么？</p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">不懂微信为何要这样做，密钥是当前手机的&nbsp;<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size:14px;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">IMEI + 微信UIN 的 MD5值（32位小写）前7位</code>。（注：此处信息不是自己发现的，是无意中在网上搜到的）分别说如何获得如上内容：</p>
<ul style="margin:10px 0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;vertical-align:baseline;list-style:none;line-height:28.8px;"><li style="margin:0px;padding:0px;border:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;">获取 IMEI 码 :<br />
手机拨号输入&nbsp;<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">*#06#</code>&nbsp;显示出来的即是所需 IMEI</li>
<li style="margin:0px;padding:0px;border:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;">获取微信 UIN 码 :<br />
相信大家都用过微信的网页版，我们就通过它来获取。首先登录微信版网页，再新建一个标签页&nbsp;<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">chrome://net-internals/#events</code>，这个是 chrome 内置的抓包工具，所有进出的数据包都能看到，所以类似于下面这样</li>
</ul>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;"><img src="http://7xivx9.com1.z0.glb.clouddn.com/wxwx4.png" alt="image" style="border:0px;margin:0px;padding:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;" /></p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">之后在网页聊天界面随意给某个联系人发送一条消息，回到抓包标签页，按 Ctrl + F 全局搜索&nbsp;<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size:14px;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">uin</code>&nbsp;，这个时候就会看到下图中的 uin 码，我这里是 9 位</p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;"><img src="http://7xivx9.com1.z0.glb.clouddn.com/wxwx5.png" alt="image" style="border:0px;margin:0px;padding:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;" /></p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">到此为止，我们获取了设备的 IMEI(如12345) 和 微信账号的 UIN(如67890) 码，下面来计算&nbsp;<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size:14px;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">32 位 MD5 消息摘要值</code>，使用&nbsp;<a target="_blank" href="http://md5jiami.51240.com/" rel="external" style="color:#258fb8;text-decoration:none;margin:0px;padding:0px;border:0px;outline:none;font-style:inherit;font-family:inherit;vertical-align:baseline;">MD5</a>&nbsp;在线加密的网站就可以，则要加密的字符串为&nbsp;<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size:14px;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">IMEI+UIN</code>，即&nbsp;<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size:14px;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">1234567890</code>，加密后就会得到四种 MD5 值，我们需要的是32位长度小写的，如图</p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;"><img src="http://7xivx9.com1.z0.glb.clouddn.com/wxwx6.png" alt="image" style="border:0px;margin:0px;padding:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;" /></p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">取该&nbsp;<code style="margin:0px 3px;padding:1px 3px;border:1px solid #cccccc;outline:0px;font-style:inherit;font-family:Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size:14px;vertical-align:baseline;word-wrap:break-word;background-color:#dddddd;background-position:initial initial;background-repeat:initial initial;">MD5 值前 7 位</code>，即为密钥。接下来，打开 sqlcipher.exe ，File-&gt;Open Database， 选择 EnMicroMsg.db 文件，打开后就可以看到让我们输入密钥，输入刚才的7位密钥，点击OK，如图</p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;"><img src="http://7xivx9.com1.z0.glb.clouddn.com/wxwx7.png" alt="image" style="border:0px;margin:0px;padding:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;" /></p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">如果你成功看到了下图的界面，则说明99%已经成功了。</p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;"><img src="http://7xivx9.com1.z0.glb.clouddn.com/wxwx8.png" alt="image" style="border:0px;margin:0px;padding:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;" /></p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">那如何能看到真正的聊天记录内容呢，点击 Browse Data，再筛选 message ，看吧，赤裸裸的聊天记录赫然摆在眼前。。。</p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;"><img src="http://7xivx9.com1.z0.glb.clouddn.com/wxwx10.png" alt="image" style="border:0px;margin:0px;padding:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;" /></p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;"><span style="margin:0px;padding:0px;border:0px;outline:0px;font-style:inherit;font-family:inherit;vertical-align:baseline;">最后，想跟各位说的是，手机千万不要交给程序员。。。<br />
<br />
</span></p>
<p style="margin-top:10px;margin-bottom:0px;padding:0px;border:0px;outline:0px;font-family:微软雅黑, HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;vertical-align:baseline;line-height:28.8px;">原文地址：http://blog.csdn.net/icodeyou/article/details/49556547</p>
</div></body></html>